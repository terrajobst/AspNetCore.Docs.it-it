---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Lab pratico: Le applicazioni Web in tempo reale con SignalR | Documenti Microsoft'
author: rick-anderson
description: "Applicazioni Web in tempo reale offrono la possibilità di effettuare il push del contenuto ai client connessi non appena si verifica in tempo reale sul lato server. Per gli sviluppatori ASP.NET, ASP..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/16/2014
ms.topic: article
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 96d3b8b82f78d8f6da85012aac8a1411cf297e26
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/10/2017
---
<a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="eaa55-104">Lab pratico: Le applicazioni Web in tempo reale con SignalR</span><span class="sxs-lookup"><span data-stu-id="eaa55-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>
====================
<span data-ttu-id="eaa55-105">da [categorie Web Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="eaa55-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="eaa55-106">Download Web categorie Kit di formazione</span><span class="sxs-lookup"><span data-stu-id="eaa55-106">Download Web Camps Training Kit</span></span>](http://aka.ms/webcamps-training-kit)

> <span data-ttu-id="eaa55-107">Applicazioni Web in tempo reale offrono la possibilità di effettuare il push del contenuto ai client connessi non appena si verifica in tempo reale sul lato server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="eaa55-108">Per gli sviluppatori ASP.NET, **ASP.NET SignalR** è una raccolta per aggiungere funzionalità web in tempo reale alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="eaa55-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="eaa55-109">Consente di usufruire dei trasporti diversi, il trasporto disponibile meglio assegnato il client e più disponibile il trasporto del server di selezione automatica.</span><span class="sxs-lookup"><span data-stu-id="eaa55-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="eaa55-110">Consente di usufruire del **WebSocket**, un'API di HTML5 che consente la comunicazione bidirezionale tra il browser e server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="eaa55-111">**SignalR** fornisce inoltre un'API semplice di alto livello per l'esecuzione di server per client RPC (chiamata di funzioni JavaScript nei browser dei client dal codice .NET sul lato server) nell'applicazione ASP.NET, nonché l'aggiunta di utili hook per la gestione connessione, ad esempio connettere/disconnettere gli eventi, le connessioni di raggruppamento e autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="eaa55-112">**SignalR** è un'astrazione su alcuni dei trasporti che sono necessari per svolgere il lavoro in tempo reale tra client e server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="eaa55-113">Oggetto **SignalR** connessione viene avviato come HTTP e quindi viene promosso a un **WebSocket** connessione, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="eaa55-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="eaa55-114">**WebSocket** è il trasporto ideale per **SignalR**, in quanto rende l'utilizzo più efficiente della memoria del server, ha la latenza più bassa e le funzionalità più sottostante (ad esempio la comunicazione full duplex tra client e Server), ma ha anche i requisiti più rigidi: **WebSocket** richiede che il server utilizzino **Windows Server 2012** o **Windows 8**, insieme a **.NET framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="eaa55-115">Se non vengono soddisfatti questi requisiti, **SignalR** tenterà di utilizzare altri trasporti per rendere le connessioni (ad esempio *Ajax polling prolungato*).</span><span class="sxs-lookup"><span data-stu-id="eaa55-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="eaa55-116">Il **SignalR** API contiene due modelli per la comunicazione tra client e server: **connessioni permanenti** e **hub**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="eaa55-117">Oggetto **connessione** rappresenta un endpoint di tipo semplice per l'invio singolo destinatario, raggruppati o trasmissione di messaggi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="eaa55-118">Oggetto **Hub** è una pipeline più alto livello basata sull'API di connessione che consente il client e server chiamare i metodi direttamente tra loro.</span><span class="sxs-lookup"><span data-stu-id="eaa55-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![Architettura di SignalR](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="eaa55-120">Tutto il codice di esempio e i frammenti di codice sono inclusi nel Web categorie Training Kit, disponibile all'indirizzo [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="eaa55-120">All sample code and snippets are included in the Web Camps Training Kit, available at [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span></span>


<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="eaa55-121">Panoramica</span><span class="sxs-lookup"><span data-stu-id="eaa55-121">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="eaa55-122">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="eaa55-122">Objectives</span></span>

<span data-ttu-id="eaa55-123">In questa esercitazione pratica, si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="eaa55-123">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="eaa55-124">Inviare notifiche dal server al client utilizzando SignalR.</span><span class="sxs-lookup"><span data-stu-id="eaa55-124">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="eaa55-125">Scalabilità orizzontale SignalR applicazione utilizzando **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-125">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="eaa55-126">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="eaa55-126">Prerequisites</span></span>

<span data-ttu-id="eaa55-127">Di seguito è necessario per completare questa esercitazione pratica:</span><span class="sxs-lookup"><span data-stu-id="eaa55-127">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="eaa55-128">[Visual Studio Express 2013 per Web](https://www.microsoft.com/visualstudio/) o versione successiva</span><span class="sxs-lookup"><span data-stu-id="eaa55-128">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="eaa55-129">Configurazione</span><span class="sxs-lookup"><span data-stu-id="eaa55-129">Setup</span></span>

<span data-ttu-id="eaa55-130">Per eseguire gli esercizi di questa esercitazione pratica, è necessario configurare prima di tutto l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-130">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="eaa55-131">Aprire una finestra di Esplora risorse e individuare il lab **origine** cartella.</span><span class="sxs-lookup"><span data-stu-id="eaa55-131">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="eaa55-132">Fare doppio clic su **Setup.cmd** e selezionare **Esegui come amministratore** per avviare il processo di installazione che la configurazione dell'ambiente e installare i frammenti di codice di Visual Studio per questo ambiente lab.</span><span class="sxs-lookup"><span data-stu-id="eaa55-132">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="eaa55-133">Se viene visualizzata la finestra di dialogo controllo dell'Account utente, confermare l'azione per continuare.</span><span class="sxs-lookup"><span data-stu-id="eaa55-133">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="eaa55-134">Assicurarsi di avere selezionato tutte le dipendenze per questa esercitazione prima di eseguire il programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-134">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>


<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="eaa55-135">Utilizzo dei frammenti di codice</span><span class="sxs-lookup"><span data-stu-id="eaa55-135">Using the Code Snippets</span></span>

<span data-ttu-id="eaa55-136">In tutto il documento lab, verrà invitati a inserire i blocchi di codice.</span><span class="sxs-lookup"><span data-stu-id="eaa55-136">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="eaa55-137">Per praticità, la maggior parte di questo codice viene fornito come Visual Studio frammenti di codice che è possibile accedere da all'interno di Visual Studio 2013 per evitare di dover aggiungerla manualmente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-137">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="eaa55-138">Ogni esercizio è accompagnata da una soluzione inizia all'interno di **iniziare** cartella dell'esercizio che consente di seguire ogni esercizio indipendentemente dalle altre.</span><span class="sxs-lookup"><span data-stu-id="eaa55-138">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="eaa55-139">Tenere presente che i frammenti di codice aggiunti durante un esercizio non sono presenti queste soluzioni di avvio e potrebbero non funzionare fino a completare l'esercizio.</span><span class="sxs-lookup"><span data-stu-id="eaa55-139">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="eaa55-140">All'interno del codice sorgente per un esercizio, si avrà inoltre un **fine** cartella che contiene una soluzione di Visual Studio con il codice generato da completare i passaggi nell'esercizio corrispondente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-140">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="eaa55-141">Se è necessario ulteriore assistenza durante l'utilizzo tramite questa esercitazione pratica, è possibile usare queste soluzioni come guida.</span><span class="sxs-lookup"><span data-stu-id="eaa55-141">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>


* * *

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="eaa55-142">Esercizi</span><span class="sxs-lookup"><span data-stu-id="eaa55-142">Exercises</span></span>

<span data-ttu-id="eaa55-143">Questa esercitazione include gli esercizi seguenti:</span><span class="sxs-lookup"><span data-stu-id="eaa55-143">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="eaa55-144">Utilizzo di dati in tempo reale tramite SignalR</span><span class="sxs-lookup"><span data-stu-id="eaa55-144">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="eaa55-145">Scalabilità orizzontale mediante SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaa55-145">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="eaa55-146">Tempo stimato per completare questa esercitazione: **60 minuti**</span><span class="sxs-lookup"><span data-stu-id="eaa55-146">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="eaa55-147">Al primo avvio di Visual Studio, è necessario selezionare una delle raccolte di impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="eaa55-147">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="eaa55-148">Ogni raccolta predefinita è progettato in modo che corrisponda a un particolare stile di sviluppo e determina il layout di finestra, il comportamento dell'editor, frammenti di codice IntelliSense e finestre di dialogo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-148">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="eaa55-149">Le procedure descritte in questa esercitazione vengono descritte le azioni necessarie per eseguire una determinata attività in Visual Studio quando si utilizza il **impostazioni generali per lo sviluppo** insieme.</span><span class="sxs-lookup"><span data-stu-id="eaa55-149">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="eaa55-150">Se si sceglie una raccolta di impostazioni diverse per l'ambiente di sviluppo, possono essere presenti differenze nei passaggi che è necessario prendere in considerazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-150">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>


<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="eaa55-151">Esercizio 1: Utilizzo di dati in tempo reale tramite SignalR</span><span class="sxs-lookup"><span data-stu-id="eaa55-151">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="eaa55-152">Mentre chat viene spesso utilizzata come esempio, è possibile eseguire un intero molte altre funzionalità Web in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="eaa55-152">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="eaa55-153">Ogni volta che un utente aggiorna una pagina web per visualizzare i nuovi dati o l'oggetto implementa pagina Ajax lungo il polling per recuperare nuovi dati, è possibile utilizzare SignalR.</span><span class="sxs-lookup"><span data-stu-id="eaa55-153">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="eaa55-154">Supporta SignalR **push server** o **broadcast** funzionalità; gestisce automaticamente la gestione della connessione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-154">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="eaa55-155">In connessioni HTTP classiche per la comunicazione tra client e server, viene ristabilita per ogni richiesta di connessione, ma SignalR fornisce una connessione permanente tra il client e server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-155">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="eaa55-156">In SignalR che il codice server effettua una chiamata a un codice del client nel browser utilizzando le chiamate RPC (Remote Procedure), anziché il modello di richiesta-risposta sappiamo oggi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-156">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="eaa55-157">In questo esercizio, si configurerà il **appassionato Quiz** applicazione per l'utilizzo di SignalR per visualizzare il dashboard di statistiche e le metriche aggiornate senza la necessità di aggiornare la pagina intera.</span><span class="sxs-lookup"><span data-stu-id="eaa55-157">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="eaa55-158">Attività 1: la pagina di statistiche Quiz appassionato di esplorazione</span><span class="sxs-lookup"><span data-stu-id="eaa55-158">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="eaa55-159">In questa attività verrà passare attraverso l'applicazione e verificare come viene visualizzata la pagina statistiche e come è possibile migliorare la modalità di informazioni viene aggiornata.</span><span class="sxs-lookup"><span data-stu-id="eaa55-159">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="eaa55-160">Aprire **Visual Studio Express 2013 per Web** e aprire il **GeekQuiz.sln** soluzione si trova nel **Source\Ex1 WorkingWithRealTimeData\Begin** cartella.</span><span class="sxs-lookup"><span data-stu-id="eaa55-160">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="eaa55-161">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-161">Press **F5** to run the solution.</span></span> <span data-ttu-id="eaa55-162">Il **Accedi** verrà visualizzata la pagina nel browser.</span><span class="sxs-lookup"><span data-stu-id="eaa55-162">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="eaa55-163">![Esecuzione della soluzione](real-time-web-applications-with-signalr/_static/image2.png "esecuzione della soluzione")</span><span class="sxs-lookup"><span data-stu-id="eaa55-163">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="eaa55-164">*Esecuzione della soluzione*</span><span class="sxs-lookup"><span data-stu-id="eaa55-164">*Running the solution*</span></span>
3. <span data-ttu-id="eaa55-165">Fare clic su **registrare** nell'angolo superiore destro della pagina per creare un nuovo utente nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-165">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="eaa55-166">![Registrare collegamento](real-time-web-applications-with-signalr/_static/image3.png "collegamento registra")</span><span class="sxs-lookup"><span data-stu-id="eaa55-166">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="eaa55-167">*Collegamento di registro*</span><span class="sxs-lookup"><span data-stu-id="eaa55-167">*Register link*</span></span>
4. <span data-ttu-id="eaa55-168">Nel **registrare** pagina, immettere un **nome utente** e **Password**, quindi fare clic su **registrare**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-168">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="eaa55-169">![Registrazione di un utente](real-time-web-applications-with-signalr/_static/image4.png "registrazione di un utente")</span><span class="sxs-lookup"><span data-stu-id="eaa55-169">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="eaa55-170">*Registrazione di un utente*</span><span class="sxs-lookup"><span data-stu-id="eaa55-170">*Registering a user*</span></span>
5. <span data-ttu-id="eaa55-171">L'applicazione Registra nuovo account e l'utente è autenticato e reindirizzato alla home page che mostra la prima domanda quiz.</span><span class="sxs-lookup"><span data-stu-id="eaa55-171">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="eaa55-172">Aprire il **statistiche** pagina in una nuova finestra e inserire il **Home** pagina e **statistiche** pagina side-by-side.</span><span class="sxs-lookup"><span data-stu-id="eaa55-172">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="eaa55-173">![Windows side-by-side](real-time-web-applications-with-signalr/_static/image5.png "lato da windows lato")</span><span class="sxs-lookup"><span data-stu-id="eaa55-173">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="eaa55-174">*Windows side-by-side*</span><span class="sxs-lookup"><span data-stu-id="eaa55-174">*Side-by-side windows*</span></span>
7. <span data-ttu-id="eaa55-175">Nel **Home** pagina, rispondere alla domanda facendo clic su una delle opzioni.</span><span class="sxs-lookup"><span data-stu-id="eaa55-175">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="eaa55-176">![Per rispondere a una domanda](real-time-web-applications-with-signalr/_static/image6.png "rispondere")</span><span class="sxs-lookup"><span data-stu-id="eaa55-176">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="eaa55-177">*Per rispondere a una domanda*</span><span class="sxs-lookup"><span data-stu-id="eaa55-177">*Answering a question*</span></span>
8. <span data-ttu-id="eaa55-178">Dopo aver fatto clic su uno dei pulsanti, la risposta dovrebbe essere visualizzato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-178">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="eaa55-179">![Risposta corretta](real-time-web-applications-with-signalr/_static/image7.png "risposta corretta")</span><span class="sxs-lookup"><span data-stu-id="eaa55-179">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="eaa55-180">*Domanda ha risposto correttamente*</span><span class="sxs-lookup"><span data-stu-id="eaa55-180">*Question answered correctly*</span></span>
9. <span data-ttu-id="eaa55-181">Si noti che le informazioni fornite nella pagina delle statistiche sono obsolete.</span><span class="sxs-lookup"><span data-stu-id="eaa55-181">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="eaa55-182">Aggiornare la pagina per visualizzare i risultati aggiornati.</span><span class="sxs-lookup"><span data-stu-id="eaa55-182">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="eaa55-183">![Pagina statistiche](real-time-web-applications-with-signalr/_static/image8.png "pagina statistiche")</span><span class="sxs-lookup"><span data-stu-id="eaa55-183">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="eaa55-184">*Pagina statistiche*</span><span class="sxs-lookup"><span data-stu-id="eaa55-184">*Statistics page*</span></span>
10. <span data-ttu-id="eaa55-185">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="eaa55-185">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="eaa55-186">Attività 2: aggiunta di SignalR per il Quiz appassionato per visualizzare i grafici in linea</span><span class="sxs-lookup"><span data-stu-id="eaa55-186">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="eaa55-187">In questa attività verrà aggiunta SignalR alla soluzione e inviare gli aggiornamenti ai client automaticamente quando una nuova risposta viene inviata al server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-187">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="eaa55-188">Dal **strumenti** menu in Visual Studio, selezionare **Gestione pacchetti libreria**, quindi fare clic su **Console di gestione pacchetti**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-188">From the **Tools** menu in Visual Studio, select **Library Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="eaa55-189">Nel **Package Manager Console** finestra, eseguire il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="eaa55-189">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="eaa55-190">![Installazione del pacchetto SignalR](real-time-web-applications-with-signalr/_static/image9.png "SignalR installazione del pacchetto")</span><span class="sxs-lookup"><span data-stu-id="eaa55-190">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="eaa55-191">*Installazione del pacchetto di SignalR*</span><span class="sxs-lookup"><span data-stu-id="eaa55-191">*SignalR package installation*</span></span>

    > [!NOTE]
    > <span data-ttu-id="eaa55-192">Quando si installa **SignalR** versione di pacchetti di NuGet 2.0.2 da una nuova applicazione MVC 5, è necessario aggiornare manualmente **OWIN** dei pacchetti alla versione 2.0.1 (o versione successiva) prima di installare SignalR.</span><span class="sxs-lookup"><span data-stu-id="eaa55-192">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="eaa55-193">A tale scopo, è possibile eseguire lo script seguente nel **Package Manager Console**:</span><span class="sxs-lookup"><span data-stu-id="eaa55-193">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
    > 
    > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
    > 
    > <span data-ttu-id="eaa55-194">In una versione futura di SignalR, dipendenze OWIN verranno aggiornate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-194">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="eaa55-195">In **Esplora**, espandere il **script** cartella e notare che SignalR *js* file sono stati aggiunti alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-195">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="eaa55-196">![Fa riferimento a SignalR JavaScript](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript fa riferimento a")</span><span class="sxs-lookup"><span data-stu-id="eaa55-196">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="eaa55-197">*Riferimenti di SignalR JavaScript*</span><span class="sxs-lookup"><span data-stu-id="eaa55-197">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="eaa55-198">In **Esplora**, fare doppio clic su di **GeekQuiz** progetto, selezionare **Aggiungi** | **nuova cartella**e denominarla  **Gli hub**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-198">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="eaa55-199">Fare doppio clic su di **hub** cartella e selezionare **Aggiungi | Nuovo elemento**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-199">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="eaa55-200">![Aggiungi nuovo elemento](real-time-web-applications-with-signalr/_static/image11.png "Aggiungi nuovo elemento")</span><span class="sxs-lookup"><span data-stu-id="eaa55-200">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="eaa55-201">*Aggiungi nuovo elemento*</span><span class="sxs-lookup"><span data-stu-id="eaa55-201">*Add new item*</span></span>
6. <span data-ttu-id="eaa55-202">Nel **Aggiungi nuovo elemento** la finestra di dialogo, seleziona il **Visual c# | Web | SignalR** nodo nel riquadro a sinistra, seleziona **classe Hub SignalR (v2)** dal riquadro centrale, denominare il file **StatisticsHub.cs** e fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-202">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="eaa55-203">![Casella di dialogo Aggiungi nuovo elemento](real-time-web-applications-with-signalr/_static/image12.png "casella di dialogo Aggiungi nuovo elemento")</span><span class="sxs-lookup"><span data-stu-id="eaa55-203">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="eaa55-204">*Aggiungere una finestra di dialogo Nuovo elemento*</span><span class="sxs-lookup"><span data-stu-id="eaa55-204">*Add new item dialog box*</span></span>
7. <span data-ttu-id="eaa55-205">Sostituire il codice di **StatisticsHub** classe con il codice seguente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-205">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="eaa55-206">(- Frammento di codice *StatisticsHubClass RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-206">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="eaa55-207">Aprire **Startup.cs** e aggiungere la riga seguente alla fine del **configurazione** metodo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-207">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="eaa55-208">(- Frammento di codice *MapSignalR RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-208">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="eaa55-209">Aprire il **StatisticsService.cs** pagina all'interno di **servizi** cartella e aggiungere le seguenti direttive using.</span><span class="sxs-lookup"><span data-stu-id="eaa55-209">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="eaa55-210">(- Frammento di codice *UsingDirectives RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-210">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="eaa55-211">Per notificare ai client connessi degli aggiornamenti, è innanzitutto necessario recuperare un **contesto** oggetto per la connessione corrente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-211">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="eaa55-212">Il **Hub** oggetto contiene i metodi per inviare messaggi a un unico client o di trasmissione per tutti i client.</span><span class="sxs-lookup"><span data-stu-id="eaa55-212">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="eaa55-213">Aggiungere il metodo seguente per il **StatisticsService** classe per trasmettere i dati delle statistiche.</span><span class="sxs-lookup"><span data-stu-id="eaa55-213">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="eaa55-214">(- Frammento di codice *NotifyUpdatesMethod RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-214">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="eaa55-215">Nel codice precedente, si utilizza un nome di metodo arbitrario per chiamare una funzione nel client (ad esempio: *updateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="eaa55-215">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="eaa55-216">Il nome del metodo specificato viene interpretato come un oggetto dinamico, ovvero che nessuna IntelliSense o la relativa convalida in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-216">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="eaa55-217">L'espressione viene valutata in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-217">The expression is evaluated at run time.</span></span> <span data-ttu-id="eaa55-218">Quando viene eseguita la chiamata al metodo, il nome del metodo e i valori dei parametri SignalR invia al client.</span><span class="sxs-lookup"><span data-stu-id="eaa55-218">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="eaa55-219">Se il client dispone di un metodo che corrisponde al nome, tale metodo viene chiamato e i valori dei parametri vengono passati al metodo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-219">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="eaa55-220">Se viene trovato alcun metodo di corrispondenza nel client, viene generato alcun errore.</span><span class="sxs-lookup"><span data-stu-id="eaa55-220">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="eaa55-221">Per ulteriori informazioni, vedere [ASP.NET SignalR hub API Guida](../guide-to-the-api/hubs-api-guide-server.md).</span><span class="sxs-lookup"><span data-stu-id="eaa55-221">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="eaa55-222">Aprire il **TriviaController.cs** pagina all'interno di **controller** cartella e aggiungere le seguenti direttive using.</span><span class="sxs-lookup"><span data-stu-id="eaa55-222">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="eaa55-223">Aggiungere il codice evidenziato di seguito per il **Post** metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-223">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="eaa55-224">(- Frammento di codice *NotifyUpdatesCall RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-224">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="eaa55-225">Aprire il **Statistics.cshtml** pagina all'interno di **viste | Home** cartella.</span><span class="sxs-lookup"><span data-stu-id="eaa55-225">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="eaa55-226">Individuare il **script** sezione e aggiungere i riferimenti a script seguente all'inizio della sezione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-226">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="eaa55-227">(- Frammento di codice *SignalRScriptReferences RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-227">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="eaa55-228">Quando si aggiungono SignalR e altre librerie di script al progetto di Visual Studio, la gestione dei pacchetti potrebbe installare una versione del file di script SignalR più recenti rispetto a quella illustrata in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="eaa55-228">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="eaa55-229">Assicurarsi che il riferimento allo script nel codice corrisponda alla versione della libreria di script installata nel progetto.</span><span class="sxs-lookup"><span data-stu-id="eaa55-229">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="eaa55-230">Aggiungere il codice evidenziato di seguito per connettere il client per l'hub SignalR e aggiornare i dati delle statistiche quando viene ricevuto un nuovo messaggio dall'hub.</span><span class="sxs-lookup"><span data-stu-id="eaa55-230">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="eaa55-231">(- Frammento di codice *SignalRClientCode RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-231">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="eaa55-232">In questo codice, la creazione di un Proxy dell'Hub e registrare un gestore eventi per restare in attesa per i messaggi inviati dal server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-232">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="eaa55-233">In questo caso, si è in ascolto dei messaggi inviati mediante il *updateStatistics* metodo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-233">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="eaa55-234">Attività 3: esecuzione della soluzione</span><span class="sxs-lookup"><span data-stu-id="eaa55-234">Task 3 – Running the Solution</span></span>

<span data-ttu-id="eaa55-235">In questa attività si eseguirà la soluzione per verificare che la visualizzazione delle statistiche viene aggiornata automaticamente mediante SignalR dopo la risposta a una nuova domanda.</span><span class="sxs-lookup"><span data-stu-id="eaa55-235">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="eaa55-236">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-236">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="eaa55-237">Se non è già stato effettuato l'accesso all'applicazione, accedere con l'utente creato nell'attività 1.</span><span class="sxs-lookup"><span data-stu-id="eaa55-237">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="eaa55-238">Aprire il **statistiche** pagina in una nuova finestra e inserire il **Home** pagina e **statistiche** pagina side-by-side, come descritto nell'attività 1.</span><span class="sxs-lookup"><span data-stu-id="eaa55-238">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="eaa55-239">Nel **Home** pagina, rispondere alla domanda facendo clic su una delle opzioni.</span><span class="sxs-lookup"><span data-stu-id="eaa55-239">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="eaa55-240">![Per rispondere a un'altra domanda](real-time-web-applications-with-signalr/_static/image13.png "per rispondere a un'altra domanda")</span><span class="sxs-lookup"><span data-stu-id="eaa55-240">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="eaa55-241">*Per rispondere a un'altra domanda*</span><span class="sxs-lookup"><span data-stu-id="eaa55-241">*Answering another question*</span></span>
4. <span data-ttu-id="eaa55-242">Dopo aver fatto clic su uno dei pulsanti, la risposta dovrebbe essere visualizzato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-242">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="eaa55-243">Si noti che le informazioni sulle statistiche nella pagina viene aggiornate automaticamente dopo la risposta alla domanda con le informazioni aggiornate senza la necessità di aggiornare la pagina intera.</span><span class="sxs-lookup"><span data-stu-id="eaa55-243">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="eaa55-244">![Pagina statistiche aggiornata dopo la risposta](real-time-web-applications-with-signalr/_static/image14.png "pagina statistiche aggiornata dopo la risposta")</span><span class="sxs-lookup"><span data-stu-id="eaa55-244">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="eaa55-245">*Pagina statistiche aggiornato dopo la risposta*</span><span class="sxs-lookup"><span data-stu-id="eaa55-245">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="eaa55-246">Esercizio 2: Scalabilità orizzontale mediante SQL Server</span><span class="sxs-lookup"><span data-stu-id="eaa55-246">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="eaa55-247">Quando si ridimensiona un'applicazione web, in genere è possibile scegliere tra *scalabilità* e *la scalabilità orizzontale* opzioni.</span><span class="sxs-lookup"><span data-stu-id="eaa55-247">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="eaa55-248">*Applicare la scalabilità verticale* comporta l'utilizzo di un server più grande, con più risorse (CPU, RAM e così via) durante *scalabilità* comporta l'aggiunta di più server per gestire il carico.</span><span class="sxs-lookup"><span data-stu-id="eaa55-248">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="eaa55-249">Il problema con il secondo è che i client possono ottenere indirizzati al server diversi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-249">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="eaa55-250">Un client connesso a un server non riceverà i messaggi inviati da un altro server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-250">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="eaa55-251">È possibile risolvere questi problemi usando un componente chiamato *backplane*per inoltrare i messaggi tra server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-251">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="eaa55-252">Con un backplane è abilitato, ogni istanza dell'applicazione invia messaggi al backplane e li inoltra backplane alle altre istanze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-252">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="eaa55-253">Esistono attualmente tre tipi dei ripiani posteriori per SignalR:</span><span class="sxs-lookup"><span data-stu-id="eaa55-253">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="eaa55-254">**Windows Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-254">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="eaa55-255">Bus di servizio è un'infrastruttura di messaggistica che consente ai componenti di inviare messaggi regime di controllo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-255">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="eaa55-256">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-256">**SQL Server**.</span></span> <span data-ttu-id="eaa55-257">SQL Server backplane scrive i messaggi alle tabelle SQL.</span><span class="sxs-lookup"><span data-stu-id="eaa55-257">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="eaa55-258">Backplane utilizza Service Broker per la messaggistica efficiente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-258">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="eaa55-259">Tuttavia, funziona anche se Service Broker non è abilitato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-259">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="eaa55-260">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-260">**Redis**.</span></span> <span data-ttu-id="eaa55-261">Redis è un archivio chiave-valore in memoria.</span><span class="sxs-lookup"><span data-stu-id="eaa55-261">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="eaa55-262">Redis supporta un modello di pubblicazione/sottoscrizione ("pubblicazione/sottoscrizione") per l'invio di messaggi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-262">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="eaa55-263">Ogni messaggio viene inviato tramite un bus di messaggi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-263">Every message is sent through a message bus.</span></span> <span data-ttu-id="eaa55-264">Implementa un bus di messaggi di [IMessageBus](https://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interfaccia, che fornisce un'astrazione di pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-264">A message bus implements the [IMessageBus](https://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="eaa55-265">Sostituendo il valore predefinito di lavoro dei ripiani posteriori delle **IMessageBus** con un bus progettato per tale backplane.</span><span class="sxs-lookup"><span data-stu-id="eaa55-265">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="eaa55-266">Ogni istanza del server si connette al backplane tramite il bus.</span><span class="sxs-lookup"><span data-stu-id="eaa55-266">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="eaa55-267">Quando viene inviato un messaggio, passa al backplane e backplane invia ogni server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-267">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="eaa55-268">Quando un server riceve un messaggio dal backplane, archivia il messaggio nella propria cache locale.</span><span class="sxs-lookup"><span data-stu-id="eaa55-268">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="eaa55-269">Il server recapita i messaggi per i client dalla cache locale.</span><span class="sxs-lookup"><span data-stu-id="eaa55-269">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="eaa55-270">Per ulteriori informazioni sull'uso di backplane SignalR, leggere questo [articolo](../performance/scaleout-in-signalr.md).</span><span class="sxs-lookup"><span data-stu-id="eaa55-270">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="eaa55-271">Esistono alcuni scenari in cui un backplane può diventare un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="eaa55-271">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="eaa55-272">Ecco alcuni scenari tipici di SignalR:</span><span class="sxs-lookup"><span data-stu-id="eaa55-272">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="eaa55-273">[Trasmissione server](tutorial-server-broadcast-with-signalr.md) (ad esempio, le quotazioni di borsa): i ripiani posteriori delle funziona anche per questo scenario, perché il server controlla la frequenza con cui vengono inviati i messaggi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-273">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="eaa55-274">[Client-client](tutorial-getting-started-with-signalr.md) (ad esempio, chat): In questo scenario, backplane potrebbe essere un collo di bottiglia se il numero di messaggi viene ridimensionato con il numero di client; ovvero se si estende la quantità di messaggi client proporzionalmente all'aumentare del join.</span><span class="sxs-lookup"><span data-stu-id="eaa55-274">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="eaa55-275">[In tempo reale ad alta frequenza](tutorial-high-frequency-realtime-with-signalr.md) (ad esempio, giochi in tempo reale): un backplane non è consigliato per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="eaa55-275">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>


<span data-ttu-id="eaa55-276">In questo esercizio, si utilizzerà **SQL Server** per distribuire i messaggi tra il **appassionato Quiz** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-276">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="eaa55-277">Eseguire queste attività in un computer singolo test per informazioni su come impostare la configurazione, ma per ottenere l'effetto completo, è necessario distribuire l'applicazione di SignalR per due o più server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-277">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="eaa55-278">È inoltre necessario installare SQL Server in uno dei server o in un server dedicato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-278">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![Scalabilità orizzontale utilizzando SQL Server diagramma](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="eaa55-280">Attività 1: comprendere lo Scenario</span><span class="sxs-lookup"><span data-stu-id="eaa55-280">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="eaa55-281">In questa attività si eseguiranno 2 istanze di **appassionato Quiz** simulando IIS più istanze nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="eaa55-281">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="eaa55-282">In questo scenario, quando si risponde alle domande gli elementi semplici su un'applicazione, è non riceverà alcuna notifica aggiornamento nella pagina delle statistiche della seconda istanza.</span><span class="sxs-lookup"><span data-stu-id="eaa55-282">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="eaa55-283">La simulazione è simile a un ambiente in cui l'applicazione viene distribuita in più istanze e l'utilizzo di un servizio di bilanciamento del carico per comunicare con essi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-283">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="eaa55-284">Aprire il **Begin.sln** soluzione si trova nel **origine/Ex2-ScalingOutWithSQLServer/inizio** cartella.</span><span class="sxs-lookup"><span data-stu-id="eaa55-284">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="eaa55-285">Una volta caricato, si noterà nel **Esplora Server** che la soluzione include due progetti con nomi diversi ma le strutture.</span><span class="sxs-lookup"><span data-stu-id="eaa55-285">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="eaa55-286">Ciò consente di simulare in esecuzione due istanze della stessa applicazione sul computer locale.</span><span class="sxs-lookup"><span data-stu-id="eaa55-286">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="eaa55-287">![Iniziare soluzione simulando 2 istanze del Quiz appassionato](real-time-web-applications-with-signalr/_static/image16.png "soluzione simulando 2 istanze del Quiz appassionato di iniziare")</span><span class="sxs-lookup"><span data-stu-id="eaa55-287">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="eaa55-288">*Soluzione simulando 2 istanze del Quiz appassionato di iniziare*</span><span class="sxs-lookup"><span data-stu-id="eaa55-288">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="eaa55-289">Aprire la pagina delle proprietà della soluzione facendo clic sul nodo della soluzione e selezionando **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-289">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="eaa55-290">In **progetto di avvio**selezionare **più progetti di avvio** e modificare il **azione** valore per entrambi i progetti per *avviare*.</span><span class="sxs-lookup"><span data-stu-id="eaa55-290">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="eaa55-291">![Avviare più progetti](real-time-web-applications-with-signalr/_static/image17.png "avviare più progetti")</span><span class="sxs-lookup"><span data-stu-id="eaa55-291">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="eaa55-292">*Avviare più progetti*</span><span class="sxs-lookup"><span data-stu-id="eaa55-292">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="eaa55-293">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-293">Press **F5** to run the solution.</span></span> <span data-ttu-id="eaa55-294">L'applicazione verrà avviata due istanze di **appassionato Quiz** in porte diverse, la simulazione di più istanze della stessa applicazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-294">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="eaa55-295">Aggiungere uno dei browser a sinistra e l'altro a destra dello schermo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-295">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="eaa55-296">Accedere con le credenziali o registrare un nuovo utente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-296">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="eaa55-297">Una volta effettuato l'accesso, mantenere la pagina gli elementi semplici a sinistra e passare al **statistiche** pagina nel browser sulla destra.</span><span class="sxs-lookup"><span data-stu-id="eaa55-297">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Appassionato Quiz Side-by-Side](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="eaa55-299">*Appassionato Quiz Side-by-Side*</span><span class="sxs-lookup"><span data-stu-id="eaa55-299">*Geek Quiz Side by Side*</span></span>

    ![Quiz appassionato in porte diverse](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="eaa55-301">*Quiz appassionato in porte diverse*</span><span class="sxs-lookup"><span data-stu-id="eaa55-301">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="eaa55-302">Avviare rispondere alle domande nel browser a sinistra e si noterà che il **statistiche** pagina nel browser destra non viene aggiornato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-302">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="eaa55-303">In questo modo **SignalR** memorizzare nella cache locale viene utilizzato per distribuire i messaggi tra i client e questo scenario è la simulazione di più istanze, pertanto la cache non è condivisa tra di essi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-303">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="eaa55-304">È possibile verificare che **SignalR** stia funzionando, gli stessi passaggi di test, ma con una singola app.</span><span class="sxs-lookup"><span data-stu-id="eaa55-304">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="eaa55-305">Nelle attività seguente verrà configurato un backplane per replicare i messaggi tra istanze.</span><span class="sxs-lookup"><span data-stu-id="eaa55-305">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="eaa55-306">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="eaa55-306">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="eaa55-307">Attività 2: creazione di SQL Server Backplane</span><span class="sxs-lookup"><span data-stu-id="eaa55-307">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="eaa55-308">In questa attività si creerà un database che verrà utilizzato come un backplane per il **appassionato Quiz** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-308">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="eaa55-309">Si utilizzerà **Esplora oggetti di SQL Server** per esplorare il server e inizializzare il database.</span><span class="sxs-lookup"><span data-stu-id="eaa55-309">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="eaa55-310">Inoltre, si abiliterà il **Service Broker**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-310">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="eaa55-311">In **Visual Studio**, Apri menu **vista** e selezionare **Esplora oggetti di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-311">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="eaa55-312">Connettersi all'istanza di LocalDB facendo clic con il **SQL Server** nodo e selezionando **aggiungere SQL Server...**  opzione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-312">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="eaa55-313">![Aggiunta di un'istanza del Server SQL](real-time-web-applications-with-signalr/_static/image20.png "aggiunta di un'istanza SQL Server")</span><span class="sxs-lookup"><span data-stu-id="eaa55-313">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="eaa55-314">*Aggiunta di un'istanza di SQL Server in Esplora oggetti di SQL Server*</span><span class="sxs-lookup"><span data-stu-id="eaa55-314">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="eaa55-315">Impostare il **nome server** a *(localdb) \v11.0* e lasciare **l'autenticazione di Windows** come modalità di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-315">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="eaa55-316">Fare clic su **Connetti** per continuare.</span><span class="sxs-lookup"><span data-stu-id="eaa55-316">Click **Connect** to continue.</span></span>

    <span data-ttu-id="eaa55-317">![Connessione a LocalDB](real-time-web-applications-with-signalr/_static/image21.png "connessione a LocalDB")</span><span class="sxs-lookup"><span data-stu-id="eaa55-317">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="eaa55-318">*Connessione a LocalDB*</span><span class="sxs-lookup"><span data-stu-id="eaa55-318">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="eaa55-319">Ora che si è connessi all'istanza di LocalDB, sarà necessario creare un database che rappresenterà il backplane di SQL Server per SignalR.</span><span class="sxs-lookup"><span data-stu-id="eaa55-319">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="eaa55-320">A tale scopo, fare doppio clic su di **database** nodo e selezionare **aggiungere un nuovo Database**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-320">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="eaa55-321">![Aggiunge un nuovo database](real-time-web-applications-with-signalr/_static/image22.png "aggiunge un nuovo database")</span><span class="sxs-lookup"><span data-stu-id="eaa55-321">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="eaa55-322">*Aggiunge un nuovo database*</span><span class="sxs-lookup"><span data-stu-id="eaa55-322">*Adding a new database*</span></span>
5. <span data-ttu-id="eaa55-323">Impostare il nome del database *SignalR* e fare clic su **OK** per la sua creazione.</span><span class="sxs-lookup"><span data-stu-id="eaa55-323">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="eaa55-324">![Creazione del database SignalR](real-time-web-applications-with-signalr/_static/image23.png "la creazione del database di SignalR")</span><span class="sxs-lookup"><span data-stu-id="eaa55-324">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="eaa55-325">*Creazione del database di SignalR*</span><span class="sxs-lookup"><span data-stu-id="eaa55-325">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="eaa55-326">È possibile scegliere qualsiasi nome per il database.</span><span class="sxs-lookup"><span data-stu-id="eaa55-326">You can choose any name for the database.</span></span>
6. <span data-ttu-id="eaa55-327">Per ricevere gli aggiornamenti in modo più efficiente da backplane, è consigliabile abilitare Service Broker per il database.</span><span class="sxs-lookup"><span data-stu-id="eaa55-327">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="eaa55-328">Service Broker fornisce supporto nativo per la messaggistica e Accodamento messaggi in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-328">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="eaa55-329">Backplane funziona anche senza Service Broker.</span><span class="sxs-lookup"><span data-stu-id="eaa55-329">The backplane also works without Service Broker.</span></span> <span data-ttu-id="eaa55-330">Aprire una nuova query facendo clic con il database e selezionare **nuova Query**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-330">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="eaa55-331">![Apertura di una nuova Query](real-time-web-applications-with-signalr/_static/image24.png "aperta una nuova Query")</span><span class="sxs-lookup"><span data-stu-id="eaa55-331">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="eaa55-332">*Apertura di una nuova Query*</span><span class="sxs-lookup"><span data-stu-id="eaa55-332">*Opening a New Query*</span></span>
7. <span data-ttu-id="eaa55-333">Per controllare se Service Broker è abilitato, eseguire una query di **è\_broker\_abilitato** colonna il **Sys. Databases** vista del catalogo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-333">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="eaa55-334">Eseguire lo script seguente nella finestra di query aperti di recente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-334">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="eaa55-335">![La ricerca dello stato di Service Broker](real-time-web-applications-with-signalr/_static/image25.png "la ricerca dello stato di Service Broker")</span><span class="sxs-lookup"><span data-stu-id="eaa55-335">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="eaa55-336">*La ricerca dello stato di Service Broker*</span><span class="sxs-lookup"><span data-stu-id="eaa55-336">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="eaa55-337">Se il valore della **è\_broker\_abilitato** colonna del database è &quot;0&quot;, usare il comando seguente per abilitarlo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-337">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="eaa55-338">Sostituire  **&lt;del DATABASE&gt;**  con il nome è impostato quando si crea il database (ad esempio: SignalR).</span><span class="sxs-lookup"><span data-stu-id="eaa55-338">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="eaa55-339">![Abilitazione di Service Broker](real-time-web-applications-with-signalr/_static/image26.png "abilitare Service Broker")</span><span class="sxs-lookup"><span data-stu-id="eaa55-339">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="eaa55-340">*Abilitazione di Service Broker*</span><span class="sxs-lookup"><span data-stu-id="eaa55-340">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="eaa55-341">Se questa query viene visualizzato per verificare un deadlock, assicurarsi che non sono presenti applicazioni connesse al database.</span><span class="sxs-lookup"><span data-stu-id="eaa55-341">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="eaa55-342">Attività 3: configurazione dell'applicazione di SignalR</span><span class="sxs-lookup"><span data-stu-id="eaa55-342">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="eaa55-343">In questa attività si configurerà **appassionato Quiz** per connettersi al backplane SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-343">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="eaa55-344">Innanzitutto si aggiungerà il **SignalR.SqlServer** pacchetto NuGet e impostare la connessione al database backplane di stringa.</span><span class="sxs-lookup"><span data-stu-id="eaa55-344">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="eaa55-345">Aprire il **Console di gestione pacchetti** da **strumenti** | **Gestione pacchetti libreria**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-345">Open the **Package Manager Console** from **Tools** | **Library Package Manager**.</span></span> <span data-ttu-id="eaa55-346">Assicurarsi che **GeekQuiz** selezionato nel progetto di **progetto predefinito** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="eaa55-346">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="eaa55-347">Digitare il comando seguente per installare il **italiano** pacchetto NuGet.</span><span class="sxs-lookup"><span data-stu-id="eaa55-347">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="eaa55-348">Ripetere il passaggio precedente, ma questa volta per progetto **GeekQuiz2**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-348">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="eaa55-349">Per configurare il backplane di SQL Server, aprire il **Startup.cs** file del **GeekQuiz** del progetto e aggiungere il codice seguente per il **configura** metodo.</span><span class="sxs-lookup"><span data-stu-id="eaa55-349">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="eaa55-350">Sostituire  **&lt;del DATABASE&gt;**  con il nome del database utilizzato per la creazione di backplane di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eaa55-350">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="eaa55-351">Ripetere questo passaggio per la **GeekQuiz2** progetto.</span><span class="sxs-lookup"><span data-stu-id="eaa55-351">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="eaa55-352">(- Frammento di codice *StartupConfiguration RealTimeSignalR - Ex2 -*)</span><span class="sxs-lookup"><span data-stu-id="eaa55-352">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="eaa55-353">Ora che entrambi i progetti configurati per utilizzare il backplane di SQL Server, premere **F5** eseguirli contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="eaa55-353">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="eaa55-354">Nuovamente, **Visual Studio** avvierà due istanze di **appassionato Quiz** in porte diverse.</span><span class="sxs-lookup"><span data-stu-id="eaa55-354">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="eaa55-355">Aggiungere uno dei browser sulla sinistra e l'altro a destra dello schermo e accedere con le credenziali.</span><span class="sxs-lookup"><span data-stu-id="eaa55-355">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="eaa55-356">Mantenere la pagina gli elementi semplici a sinistra e passare a **statistiche** pagein il browser di destra.</span><span class="sxs-lookup"><span data-stu-id="eaa55-356">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="eaa55-357">Avviare la risposta alle domande nel browser a sinistra.</span><span class="sxs-lookup"><span data-stu-id="eaa55-357">Start answering questions in the left browser.</span></span> <span data-ttu-id="eaa55-358">Questa volta il **statistiche** ringraziamenti backplane aggiornamento della pagina.</span><span class="sxs-lookup"><span data-stu-id="eaa55-358">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="eaa55-359">Commutatore tra applicazioni (**statistiche** è ora a sinistra e **gli elementi semplici** è a destra) e ripetere il test per convalidare il funzionamento di entrambe le istanze.</span><span class="sxs-lookup"><span data-stu-id="eaa55-359">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="eaa55-360">Funge da backplane un *cache condivisa* dei messaggi per tutti i server collegati e ogni server verranno archiviati i messaggi nella propria cache locale per la distribuzione ai client connessi.</span><span class="sxs-lookup"><span data-stu-id="eaa55-360">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="eaa55-361">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="eaa55-361">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="eaa55-362">Il componente backplane di SQL Server genera automaticamente le tabelle necessarie nel database specificato.</span><span class="sxs-lookup"><span data-stu-id="eaa55-362">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="eaa55-363">Nel **Esplora oggetti di SQL Server** pannello, aprire il database creato per backplane (ad esempio: SignalR) ed espandere le tabelle.</span><span class="sxs-lookup"><span data-stu-id="eaa55-363">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="eaa55-364">Verrà visualizzato nelle tabelle seguenti:</span><span class="sxs-lookup"><span data-stu-id="eaa55-364">You should see the following tables:</span></span>

    ![Backplane generato tabelle](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="eaa55-366">*Backplane generato tabelle*</span><span class="sxs-lookup"><span data-stu-id="eaa55-366">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="eaa55-367">Fare doppio clic su di **SignalR.Messages\_0** tabella e selezionare **Visualizza dati**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-367">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![Tabella di messaggi SignalR Backplane di visualizzazione](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="eaa55-369">*Tabella di messaggi SignalR Backplane di visualizzazione*</span><span class="sxs-lookup"><span data-stu-id="eaa55-369">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="eaa55-370">È possibile visualizzare i diversi messaggi inviati al **Hub** per rispondere alle domande gli elementi semplici.</span><span class="sxs-lookup"><span data-stu-id="eaa55-370">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="eaa55-371">Backplane distribuisce i messaggi in qualsiasi istanza connessa.</span><span class="sxs-lookup"><span data-stu-id="eaa55-371">The backplane distributes these messages to any connected instance.</span></span>

    ![Tabella di messaggi backplane](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="eaa55-373">*Tabella di messaggi backplane*</span><span class="sxs-lookup"><span data-stu-id="eaa55-373">*Backplane Messages Table*</span></span>

* * *

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="eaa55-374">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="eaa55-374">Summary</span></span>

<span data-ttu-id="eaa55-375">In questa esercitazione pratica, si è appreso come aggiungere **SignalR** per le notifiche di trasmissione e di applicazione dal server ai client connessi tramite **hub**.</span><span class="sxs-lookup"><span data-stu-id="eaa55-375">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="eaa55-376">Inoltre, si è appreso come scalare orizzontalmente l'applicazione utilizzando un *backplane* componente quando l'applicazione viene distribuita in più istanze IIS.</span><span class="sxs-lookup"><span data-stu-id="eaa55-376">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
