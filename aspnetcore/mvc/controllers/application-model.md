---
title: Utilizzo del modello di applicazione
author: ardalis
description: 
keywords: ASP.NET Core,ASP.NET Core MVC, il modello di applicazione
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 4eb7e52f-5665-41a4-a3e3-e348d07337f2
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/controllers/application-model
ms.openlocfilehash: 3c35184921dbe26cde100fd3d5124e38ea0d06cf
ms.sourcegitcommit: 78d28178345a0eea91556e4cd1adad98b1446db8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/22/2017
---
# <a name="working-with-the-application-model"></a><span data-ttu-id="13d60-103">Utilizzo del modello di applicazione</span><span class="sxs-lookup"><span data-stu-id="13d60-103">Working with the Application Model</span></span>

<span data-ttu-id="13d60-104">Da [Steve Smith](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="13d60-104">By [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="13d60-105">ASP.NET MVC di base definisce un *modello applicativo* che rappresentano i componenti di un'applicazione MVC.</span><span class="sxs-lookup"><span data-stu-id="13d60-105">ASP.NET Core MVC defines an *application model* representing the components of an MVC app.</span></span> <span data-ttu-id="13d60-106">È possibile leggere e modificare questo modello per modificare il comportano di elementi MVC.</span><span class="sxs-lookup"><span data-stu-id="13d60-106">You can read and manipulate this model to modify how MVC elements behave.</span></span> <span data-ttu-id="13d60-107">Per impostazione predefinita, MVC segue alcune convenzioni per determinare le classi che vengono considerate i controller, i metodi in tali classi sono azioni e il comportamento di routing e parametri.</span><span class="sxs-lookup"><span data-stu-id="13d60-107">By default, MVC follows certain conventions to determine which classes are considered to be controllers, which methods on those classes are actions, and how parameters and routing behave.</span></span> <span data-ttu-id="13d60-108">È possibile personalizzare questo comportamento in base alle esigenze dell'applicazione creando le convenzioni e applicarli a livello globale o come attributi.</span><span class="sxs-lookup"><span data-stu-id="13d60-108">You can customize this behavior to suit your app's needs by creating your own conventions and applying them globally or as attributes.</span></span>

## <a name="models-and-providers"></a><span data-ttu-id="13d60-109">I modelli e i provider</span><span class="sxs-lookup"><span data-stu-id="13d60-109">Models and Providers</span></span>

<span data-ttu-id="13d60-110">Il modello di applicazione ASP.NET MVC di base includono sia astratte interfacce e classi di implementazione concreta che descrivono un'applicazione MVC.</span><span class="sxs-lookup"><span data-stu-id="13d60-110">The ASP.NET Core MVC application model include both abstract interfaces and concrete implementation classes that describe an MVC application.</span></span> <span data-ttu-id="13d60-111">Questo modello è il risultato dell'individuazione dei controller, azioni, i parametri di azione, route e filtri in base alle convenzioni predefinite dell'app MVC.</span><span class="sxs-lookup"><span data-stu-id="13d60-111">This model is the result of MVC discovering the app's controllers, actions, action parameters, routes, and filters according to default conventions.</span></span> <span data-ttu-id="13d60-112">Quando si lavora con il modello di applicazione, è possibile modificare l'applicazione per seguire le convenzioni di diverse da quello predefinito MVC.</span><span class="sxs-lookup"><span data-stu-id="13d60-112">By working with the application model, you can modify your app to follow different conventions from the default MVC behavior.</span></span> <span data-ttu-id="13d60-113">I parametri, nomi, route e i filtri vengono tutti utilizzati come dati di configurazione per le azioni e controller.</span><span class="sxs-lookup"><span data-stu-id="13d60-113">The parameters, names, routes, and filters are all used as configuration data for actions and controllers.</span></span>

<span data-ttu-id="13d60-114">Il modello di applicazione MVC ASP.NET Core presenta la struttura seguente:</span><span class="sxs-lookup"><span data-stu-id="13d60-114">The ASP.NET Core MVC Application Model has the following structure:</span></span>

* <span data-ttu-id="13d60-115">ApplicationModel</span><span class="sxs-lookup"><span data-stu-id="13d60-115">ApplicationModel</span></span>
    * <span data-ttu-id="13d60-116">Controller (ControllerModel)</span><span class="sxs-lookup"><span data-stu-id="13d60-116">Controllers (ControllerModel)</span></span>
        * <span data-ttu-id="13d60-117">Azioni (ActionModel)</span><span class="sxs-lookup"><span data-stu-id="13d60-117">Actions (ActionModel)</span></span>
            * <span data-ttu-id="13d60-118">Parametri (ParameterModel)</span><span class="sxs-lookup"><span data-stu-id="13d60-118">Parameters (ParameterModel)</span></span>

<span data-ttu-id="13d60-119">Ogni livello del modello ha accesso a un comune `Properties` possono accedere e sovrascrivere i valori di proprietà impostati dai livelli superiori nella gerarchia di raccolta e i livelli inferiori.</span><span class="sxs-lookup"><span data-stu-id="13d60-119">Each level of the model has access to a common `Properties` collection, and lower levels can access and overwrite property values set by higher levels in the hierarchy.</span></span> <span data-ttu-id="13d60-120">Le proprietà vengono rese persistenti il `ActionDescriptor.Properties` quando vengono create le azioni.</span><span class="sxs-lookup"><span data-stu-id="13d60-120">The properties are persisted to the `ActionDescriptor.Properties` when the actions are created.</span></span> <span data-ttu-id="13d60-121">Quindi quando una richiesta viene gestita, le proprietà una convenzione di aggiunte o modificate sono accessibili tramite `ActionContext.ActionDescriptor.Properties`.</span><span class="sxs-lookup"><span data-stu-id="13d60-121">Then when a request is being handled, any properties a convention added or modified can be accessed through `ActionContext.ActionDescriptor.Properties`.</span></span> <span data-ttu-id="13d60-122">Utilizzo delle proprietà è un ottimo modo per configurare i filtri, raccoglitori di modelli e così via nei singoli per ogni azione.</span><span class="sxs-lookup"><span data-stu-id="13d60-122">Using properties is a great way to configure your filters, model binders, etc. on a per-action basis.</span></span>

> [!NOTE]
> <span data-ttu-id="13d60-123">Il `ActionDescriptor.Properties` raccolta non è thread-safe (per operazioni di scrittura) una volta terminata l'avvio dell'app.</span><span class="sxs-lookup"><span data-stu-id="13d60-123">The `ActionDescriptor.Properties` collection is not thread safe (for writes) once app startup has finished.</span></span> <span data-ttu-id="13d60-124">Convenzioni sono il modo migliore per aggiungere in modo sicuro i dati a questa raccolta.</span><span class="sxs-lookup"><span data-stu-id="13d60-124">Conventions are the best way to safely add data to this collection.</span></span>

### <a name="iapplicationmodelprovider"></a><span data-ttu-id="13d60-125">IApplicationModelProvider</span><span class="sxs-lookup"><span data-stu-id="13d60-125">IApplicationModelProvider</span></span>

<span data-ttu-id="13d60-126">Componenti di base di ASP.NET MVC carica il modello di applicazione utilizzando un modello di provider, definito dal [IApplicationModelProvider](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.iapplicationmodelprovider) interfaccia.</span><span class="sxs-lookup"><span data-stu-id="13d60-126">ASP.NET Core MVC loads the application model using a provider pattern, defined by the [IApplicationModelProvider](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.iapplicationmodelprovider) interface.</span></span> <span data-ttu-id="13d60-127">In questa sezione vengono illustrati alcuni dei dettagli relativi all'implementazione interna come funzioni questo provider.</span><span class="sxs-lookup"><span data-stu-id="13d60-127">This section covers some of the internal implementation details of how this provider functions.</span></span> <span data-ttu-id="13d60-128">Si tratta di un argomento avanzato, la maggior parte delle applicazioni che utilizzano il modello di applicazione necessario farlo quando si lavora con le convenzioni.</span><span class="sxs-lookup"><span data-stu-id="13d60-128">This is an advanced topic - most apps that leverage the application model should do so by working with conventions.</span></span>

<span data-ttu-id="13d60-129">Le implementazioni del `IApplicationModelProvider` interfaccia "wrap" un altro, con ogni chiamata di implementazione `OnProvidersExecuting` in ordine crescente in base relativa `Order` proprietà.</span><span class="sxs-lookup"><span data-stu-id="13d60-129">Implementations of the `IApplicationModelProvider` interface "wrap" one another, with each implementation calling `OnProvidersExecuting` in ascending order based on its `Order` property.</span></span> <span data-ttu-id="13d60-130">Il `OnProvidersExecuted` quindi viene chiamato il metodo in ordine inverso.</span><span class="sxs-lookup"><span data-stu-id="13d60-130">The `OnProvidersExecuted` method is then called in reverse order.</span></span> <span data-ttu-id="13d60-131">Il framework definisce diversi provider:</span><span class="sxs-lookup"><span data-stu-id="13d60-131">The framework defines several providers:</span></span>

<span data-ttu-id="13d60-132">Primo (`Order=-1000`):</span><span class="sxs-lookup"><span data-stu-id="13d60-132">First (`Order=-1000`):</span></span>

* [`DefaultApplicationModelProvider`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.internal.defaultapplicationmodelprovider)

<span data-ttu-id="13d60-133">Quindi (`Order=-990`):</span><span class="sxs-lookup"><span data-stu-id="13d60-133">Then (`Order=-990`):</span></span>

* [`AuthorizationApplicationModelProvider`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.internal.authorizationapplicationmodelprovider)
* [`CorsApplicationModelProvider`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.cors.internal.corsapplicationmodelprovider)

> [!NOTE]
> <span data-ttu-id="13d60-134">L'ordine in cui due provider con lo stesso valore per `Order` vengono chiamati è definito e pertanto non essere affidabile.</span><span class="sxs-lookup"><span data-stu-id="13d60-134">The order in which two providers with the same value for `Order` are called is undefined, and therefore should not be relied upon.</span></span>

> [!NOTE]
> <span data-ttu-id="13d60-135">`IApplicationModelProvider`è un concetto avanzato per gli autori di framework estendere.</span><span class="sxs-lookup"><span data-stu-id="13d60-135">`IApplicationModelProvider` is an advanced concept for framework authors to extend.</span></span> <span data-ttu-id="13d60-136">In generale, le app devono utilizzare le convenzioni e Framework devono utilizzare provider.</span><span class="sxs-lookup"><span data-stu-id="13d60-136">In general, apps should use conventions and frameworks should use providers.</span></span> <span data-ttu-id="13d60-137">La differenza principale è che i provider eseguiti sempre prima di convenzioni.</span><span class="sxs-lookup"><span data-stu-id="13d60-137">The key distinction is that providers always run before conventions.</span></span>

<span data-ttu-id="13d60-138">Il `DefaultApplicationModelProvider` stabilisce molti dei comportamenti predefinito utilizzati da ASP.NET MVC di base.</span><span class="sxs-lookup"><span data-stu-id="13d60-138">The `DefaultApplicationModelProvider` establishes many of the default behaviors used by ASP.NET Core MVC.</span></span> <span data-ttu-id="13d60-139">Le responsabilità includono:</span><span class="sxs-lookup"><span data-stu-id="13d60-139">Its responsibilities include:</span></span>

* <span data-ttu-id="13d60-140">Aggiunta di filtri globali al contesto</span><span class="sxs-lookup"><span data-stu-id="13d60-140">Adding global filters to the context</span></span>
* <span data-ttu-id="13d60-141">Aggiunta di controller nel contesto</span><span class="sxs-lookup"><span data-stu-id="13d60-141">Adding controllers to the context</span></span>
* <span data-ttu-id="13d60-142">Aggiunta di metodi pubblici controller come azioni</span><span class="sxs-lookup"><span data-stu-id="13d60-142">Adding public controller methods as actions</span></span>
* <span data-ttu-id="13d60-143">Aggiunta di parametri di metodo di azione al contesto</span><span class="sxs-lookup"><span data-stu-id="13d60-143">Adding action method parameters to the context</span></span>
* <span data-ttu-id="13d60-144">L'applicazione di route e gli altri attributi</span><span class="sxs-lookup"><span data-stu-id="13d60-144">Applying route and other attributes</span></span>

<span data-ttu-id="13d60-145">Alcuni comportamenti predefiniti vengono implementati mediante la `DefaultApplicationModelProvider`.</span><span class="sxs-lookup"><span data-stu-id="13d60-145">Some built-in behaviors are implemented by the `DefaultApplicationModelProvider`.</span></span> <span data-ttu-id="13d60-146">Questo provider è responsabile della costruzione di [ `ControllerModel` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.controllermodel), che a sua volta fa riferimento a [ `ActionModel` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.actionmodel#Microsoft_AspNetCore_Mvc_ApplicationModels_ActionModel), [ `PropertyModel` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.propertymodel), e [ `ParameterModel` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.parametermodel#Microsoft_AspNetCore_Mvc_ApplicationModels_ParameterModel) istanze.</span><span class="sxs-lookup"><span data-stu-id="13d60-146">This provider is responsible for constructing the [`ControllerModel`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.controllermodel), which in turn references [`ActionModel`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.actionmodel#Microsoft_AspNetCore_Mvc_ApplicationModels_ActionModel), [`PropertyModel`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.propertymodel), and [`ParameterModel`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.parametermodel#Microsoft_AspNetCore_Mvc_ApplicationModels_ParameterModel) instances.</span></span> <span data-ttu-id="13d60-147">La `DefaultApplicationModelProvider` classe è un dettaglio di implementazione interno del framework che possono e verrà modificato in futuro.</span><span class="sxs-lookup"><span data-stu-id="13d60-147">The `DefaultApplicationModelProvider` class is an internal framework implementation detail that can and will change in the future.</span></span> 

<span data-ttu-id="13d60-148">Il `AuthorizationApplicationModelProvider` è responsabile dell'applicazione il comportamento associato il `AuthorizeFilter` e `AllowAnonymousFilter` gli attributi.</span><span class="sxs-lookup"><span data-stu-id="13d60-148">The `AuthorizationApplicationModelProvider` is responsible for applying the behavior associated with the `AuthorizeFilter` and `AllowAnonymousFilter` attributes.</span></span> <span data-ttu-id="13d60-149">[Altre informazioni su questi attributi](xref:security/authorization/simple).</span><span class="sxs-lookup"><span data-stu-id="13d60-149">[Learn more about these attributes](xref:security/authorization/simple).</span></span>

<span data-ttu-id="13d60-150">Il `CorsApplicationModelProvider` implementa comportamento associato il `IEnableCorsAttribute` e `IDisableCorsAttribute`e `DisableCorsAuthorizationFilter`.</span><span class="sxs-lookup"><span data-stu-id="13d60-150">The `CorsApplicationModelProvider` implements behavior associated with the `IEnableCorsAttribute` and `IDisableCorsAttribute`, and the `DisableCorsAuthorizationFilter`.</span></span> <span data-ttu-id="13d60-151">[Altre informazioni su CORS](xref:security/cors).</span><span class="sxs-lookup"><span data-stu-id="13d60-151">[Learn more about CORS](xref:security/cors).</span></span>

## <a name="conventions"></a><span data-ttu-id="13d60-152">Convenzioni</span><span class="sxs-lookup"><span data-stu-id="13d60-152">Conventions</span></span>

<span data-ttu-id="13d60-153">Il modello di applicazione definisce astrazioni convenzione che forniscono un modo più semplice per personalizzare il comportamento dei modelli dell'override l'intero modello o un provider.</span><span class="sxs-lookup"><span data-stu-id="13d60-153">The application model defines convention abstractions that provide a simpler way to customize the behavior of the models than overriding the entire model or provider.</span></span> <span data-ttu-id="13d60-154">Le astrazioni sono il modo consigliato per modificare il comportamento dell'app.</span><span class="sxs-lookup"><span data-stu-id="13d60-154">These abstractions are the recommended way to modify your app's behavior.</span></span> <span data-ttu-id="13d60-155">Le convenzioni forniscono un modo scrivere codice che verrà applicate in modo dinamico le personalizzazioni.</span><span class="sxs-lookup"><span data-stu-id="13d60-155">Conventions provide a way for you to write code that will dynamically apply customizations.</span></span> <span data-ttu-id="13d60-156">Mentre [filtri](xref:mvc/controllers/filters) consentono di modificare il comportamento del framework, le personalizzazioni consentono di controllare la modalità di collegati l'intera app.</span><span class="sxs-lookup"><span data-stu-id="13d60-156">While [filters](xref:mvc/controllers/filters) provide a means of modifying the framework's behavior, customizations let you control how the whole app is wired together.</span></span>

<span data-ttu-id="13d60-157">Le convenzioni seguenti sono disponibili:</span><span class="sxs-lookup"><span data-stu-id="13d60-157">The following conventions are available:</span></span>

* [`IApplicationModelConvention`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.iapplicationmodelconvention)
* [`IControllerModelConvention`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.icontrollermodelconvention)
* [`IActionModelConvention`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.iactionmodelconvention)
* [`IParameterModelConvention`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.iparametermodelconvention)

<span data-ttu-id="13d60-158">Vengono applicate le convenzioni aggiungendo le opzioni di MVC o implementando `Attribute`s e li applica al controller, azioni o i parametri dell'azione (simile a [ `Filters` ](xref:mvc/controllers/filters)).</span><span class="sxs-lookup"><span data-stu-id="13d60-158">Conventions are applied by adding them to MVC options or by implementing `Attribute`s and applying them to controllers, actions, or action parameters (similar to [`Filters`](xref:mvc/controllers/filters)).</span></span> <span data-ttu-id="13d60-159">A differenza dei filtri, le convenzioni vengono eseguite solo quando si avvia l'applicazione, non come parte di ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="13d60-159">Unlike filters, conventions are only executed when the app is starting, not as part of each request.</span></span>

### <a name="sample-modifying-the-applicationmodel"></a><span data-ttu-id="13d60-160">Esempio: Modifica di ApplicationModel</span><span class="sxs-lookup"><span data-stu-id="13d60-160">Sample: Modifying the ApplicationModel</span></span>

<span data-ttu-id="13d60-161">La convenzione seguente viene utilizzata per aggiungere una proprietà del modello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="13d60-161">The following convention is used to add a property to the application model.</span></span> 

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/ApplicationDescription.cs)]

<span data-ttu-id="13d60-162">Convenzioni di modello di applicazione vengono applicate come opzioni quando MVC viene aggiunto `ConfigureServices` in `Startup`.</span><span class="sxs-lookup"><span data-stu-id="13d60-162">Application model conventions are applied as options when MVC is added in `ConfigureServices` in `Startup`.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Startup.cs?name=ConfigureServices&highlight=5)]

<span data-ttu-id="13d60-163">Le proprietà sono accessibili dal `ActionDescriptor` insieme di proprietà all'interno di azioni del controller:</span><span class="sxs-lookup"><span data-stu-id="13d60-163">Properties are accessible from the `ActionDescriptor` properties collection within controller actions:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/AppModelController.cs?name=AppModelController)]

### <a name="sample-modifying-the-controllermodel-description"></a><span data-ttu-id="13d60-164">Esempio: Modifica la descrizione ControllerModel</span><span class="sxs-lookup"><span data-stu-id="13d60-164">Sample: Modifying the ControllerModel Description</span></span>

<span data-ttu-id="13d60-165">Come nell'esempio precedente, è inoltre possibile modificare il modello di controller per includere le proprietà personalizzate.</span><span class="sxs-lookup"><span data-stu-id="13d60-165">As in the previous example, the controller model can also be modified to include custom properties.</span></span> <span data-ttu-id="13d60-166">Questi verranno eseguire l'override di proprietà esistenti con lo stesso nome specificato nel modello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="13d60-166">These will override existing properties with the same name specified in the application model.</span></span> <span data-ttu-id="13d60-167">L'attributo di convenzione seguente aggiunge una descrizione a livello di controller:</span><span class="sxs-lookup"><span data-stu-id="13d60-167">The following convention attribute adds a description at the controller level:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/ControllerDescriptionAttribute.cs)]

<span data-ttu-id="13d60-168">Questa convenzione viene applicata come un attributo in un controller.</span><span class="sxs-lookup"><span data-stu-id="13d60-168">This convention is applied as an attribute on a controller.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/DescriptionAttributesController.cs?name=ControllerDescription&highlight=1)]

<span data-ttu-id="13d60-169">La proprietà "descrizione" avviene nello stesso modo come negli esempi precedenti.</span><span class="sxs-lookup"><span data-stu-id="13d60-169">The "description" property is accessed in the same manner as in previous examples.</span></span>

### <a name="sample-modifying-the-actionmodel-description"></a><span data-ttu-id="13d60-170">Esempio: Modifica la descrizione ActionModel</span><span class="sxs-lookup"><span data-stu-id="13d60-170">Sample: Modifying the ActionModel Description</span></span>

<span data-ttu-id="13d60-171">Per singole azioni, l'override del comportamento già applicato a livello di applicazione o un controller, è possibile utilizzare una convenzione attributo separato.</span><span class="sxs-lookup"><span data-stu-id="13d60-171">A separate attribute convention can be applied to individual actions, overriding behavior already applied at the application or controller level.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/ActionDescriptionAttribute.cs)]

<span data-ttu-id="13d60-172">Questa applicazione a un'azione nel controller dell'esempio precedente viene illustrato come viene eseguito l'override della convenzione a livello di controller:</span><span class="sxs-lookup"><span data-stu-id="13d60-172">Applying this to an action within the previous example's controller demonstrates how it overrides the controller-level convention:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/DescriptionAttributesController.cs?name=DescriptionAttributesController&highlight=9)]

### <a name="sample-modifying-the-parametermodel"></a><span data-ttu-id="13d60-173">Esempio: Modifica di ParameterModel</span><span class="sxs-lookup"><span data-stu-id="13d60-173">Sample: Modifying the ParameterModel</span></span>

<span data-ttu-id="13d60-174">La convenzione seguente può essere applicata a parametri di azione per modificare i relativi `BindingInfo`.</span><span class="sxs-lookup"><span data-stu-id="13d60-174">The following convention can be applied to action parameters to modify their `BindingInfo`.</span></span> <span data-ttu-id="13d60-175">La convenzione seguente richiede che il parametro sia un parametro di route. altri possibili origini di associazione (ad esempio, i valori di stringa di query) vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="13d60-175">The following convention requires that the parameter be a route parameter; other potential binding sources (such as query string values) are ignored.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/MustBeInRouteParameterModelConvention.cs)]

<span data-ttu-id="13d60-176">L'attributo può essere applicato a qualsiasi parametro di azione:</span><span class="sxs-lookup"><span data-stu-id="13d60-176">The attribute may be applied to any action parameter:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/ParameterModelController.cs?name=ParameterModelController&highlight=5)]

### <a name="sample-modifying-the-actionmodel-name"></a><span data-ttu-id="13d60-177">Esempio: Modifica del nome ActionModel</span><span class="sxs-lookup"><span data-stu-id="13d60-177">Sample: Modifying the ActionModel Name</span></span>

<span data-ttu-id="13d60-178">La convenzione seguente modifica il `ActionModel` per aggiornare il *nome* dell'azione a cui viene applicato.</span><span class="sxs-lookup"><span data-stu-id="13d60-178">The following convention modifies the `ActionModel` to update the *name* of the action to which it is applied.</span></span> <span data-ttu-id="13d60-179">Il nuovo nome viene fornito come parametro all'attributo.</span><span class="sxs-lookup"><span data-stu-id="13d60-179">The new name is provided as a parameter to the attribute.</span></span> <span data-ttu-id="13d60-180">Questo nuovo nome viene utilizzato dal routing, in modo influisce negativamente la route utilizzata per raggiungere questo metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="13d60-180">This new name is used by routing, so it will affect the route used to reach this action method.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/CustomActionNameAttribute.cs)]

<span data-ttu-id="13d60-181">Questo attributo viene applicato a un metodo di azione di `HomeController`:</span><span class="sxs-lookup"><span data-stu-id="13d60-181">This attribute is applied to an action method in the `HomeController`:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/HomeController.cs?name=ActionModelConvention&highlight=2)]

<span data-ttu-id="13d60-182">Anche se è il nome del metodo `SomeName`, l'attributo sostituisce la convenzione MVC di utilizzare il nome del metodo e sostituisce il nome dell'azione con `MyCoolAction`.</span><span class="sxs-lookup"><span data-stu-id="13d60-182">Even though the method name is `SomeName`, the attribute overrides the MVC convention of using the method name and replaces the action name with `MyCoolAction`.</span></span> <span data-ttu-id="13d60-183">Pertanto, la route utilizzata per raggiungere questa azione è `/Home/MyCoolAction`.</span><span class="sxs-lookup"><span data-stu-id="13d60-183">Thus, the route used to reach this action is `/Home/MyCoolAction`.</span></span>

> [!NOTE]
> <span data-ttu-id="13d60-184">In questo esempio è sostanzialmente come l'utilizzo predefinito [ActionName](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.actionnameattribute) attributo.</span><span class="sxs-lookup"><span data-stu-id="13d60-184">This example is essentially the same as using the built-in [ActionName](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.actionnameattribute) attribute.</span></span>

### <a name="sample-custom-routing-convention"></a><span data-ttu-id="13d60-185">Esempio: Convenzione di Routing personalizzato</span><span class="sxs-lookup"><span data-stu-id="13d60-185">Sample: Custom Routing Convention</span></span>

<span data-ttu-id="13d60-186">È possibile utilizzare un `IApplicationModelConvention` per personalizzare il funzionamento del routing.</span><span class="sxs-lookup"><span data-stu-id="13d60-186">You can use an `IApplicationModelConvention` to customize how routing works.</span></span> <span data-ttu-id="13d60-187">Ad esempio, la convenzione seguente verrà incorporare spazi dei nomi dei controller i cicli di lavorazione, sostituendo `.` nello spazio dei nomi con `/` nella route:</span><span class="sxs-lookup"><span data-stu-id="13d60-187">For example, the following convention will incorporate Controllers' namespaces into their routes, replacing `.` in the namespace with `/` in the route:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/NamespaceRoutingConvention.cs)]

<span data-ttu-id="13d60-188">La convenzione viene aggiunto come un'opzione di avvio.</span><span class="sxs-lookup"><span data-stu-id="13d60-188">The convention is added as an option in Startup.</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Startup.cs?name=ConfigureServices&highlight=6)]

> [!TIP]
> <span data-ttu-id="13d60-189">È possibile aggiungere le convenzioni per il [middleware](xref:fundamentals/middleware) accedendo `MvcOptions` utilizzando`services.Configure<MvcOptions>(c => c.Conventions.Add(YOURCONVENTION));`</span><span class="sxs-lookup"><span data-stu-id="13d60-189">You can add conventions to your [middleware](xref:fundamentals/middleware) by accessing `MvcOptions` using `services.Configure<MvcOptions>(c => c.Conventions.Add(YOURCONVENTION));`</span></span>

<span data-ttu-id="13d60-190">In questo esempio si applica questa convenzione alle route che non si utilizzano l'attributo di routing in cui il controller è "Namespace" nel nome.</span><span class="sxs-lookup"><span data-stu-id="13d60-190">This sample applies this convention to routes that are not using attribute routing where the controller has  "Namespace" in its name.</span></span> <span data-ttu-id="13d60-191">Il controller seguente illustra questa convenzione:</span><span class="sxs-lookup"><span data-stu-id="13d60-191">The following controller demonstrates this convention:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Controllers/NamespaceRoutingController.cs?highlight=7-8)]

## <a name="application-model-usage-in-webapicompatshim"></a><span data-ttu-id="13d60-192">Utilizzo di modelli di applicazione in WebApiCompatShim</span><span class="sxs-lookup"><span data-stu-id="13d60-192">Application Model Usage in WebApiCompatShim</span></span>

<span data-ttu-id="13d60-193">Componenti di base di ASP.NET MVC viene utilizzato un diverso set di convenzioni di ASP.NET Web API 2.</span><span class="sxs-lookup"><span data-stu-id="13d60-193">ASP.NET Core MVC uses a different set of conventions from ASP.NET Web API 2.</span></span> <span data-ttu-id="13d60-194">Utilizza convenzioni personalizzate, è possibile modificare il comportamento di un'app ASP.NET MVC di base per essere coerente con quello di un'app Web API.</span><span class="sxs-lookup"><span data-stu-id="13d60-194">Using custom conventions, you can modify an ASP.NET Core MVC app's behavior to be consistent with that of a Web API app.</span></span> <span data-ttu-id="13d60-195">Viene fornito a Microsoft di [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim/) per questo scopo specifico.</span><span class="sxs-lookup"><span data-stu-id="13d60-195">Microsoft ships the [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim/) specifically for this purpose.</span></span>

> [!NOTE]
> <span data-ttu-id="13d60-196">Altre informazioni, vedere [la migrazione da ASP.NET Web API](xref:migration/webapi).</span><span class="sxs-lookup"><span data-stu-id="13d60-196">Learn more about [migrating from ASP.NET Web API](xref:migration/webapi).</span></span>

<span data-ttu-id="13d60-197">Per usare lo Shim di compatibilità di Web API, è necessario aggiungere il pacchetto al progetto e quindi aggiungere le convenzioni per MVC chiamando `AddWebApiConventions` in `Startup`:</span><span class="sxs-lookup"><span data-stu-id="13d60-197">To use the Web API Compatibility Shim, you need to add the package to your project and then add the conventions to MVC by calling `AddWebApiConventions` in `Startup`:</span></span>

```c#
services.AddMvc().AddWebApiConventions();
```

<span data-ttu-id="13d60-198">Le convenzioni dello shim vengono applicate solo alle parti dell'app che hanno alcuni attributi applicate ad essi.</span><span class="sxs-lookup"><span data-stu-id="13d60-198">The conventions provided by the shim are only applied to parts of the app that have had certain attributes applied to them.</span></span> <span data-ttu-id="13d60-199">Per controllare che le convenzioni modificate dalle convenzioni del shim devono disporre di controller, vengono utilizzati i quattro attributi seguenti:</span><span class="sxs-lookup"><span data-stu-id="13d60-199">The following four attributes are used to control which controllers should have their conventions modified by the shim's conventions:</span></span>

* [<span data-ttu-id="13d60-200">UseWebApiActionConventionsAttribute</span><span class="sxs-lookup"><span data-stu-id="13d60-200">UseWebApiActionConventionsAttribute</span></span>](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.webapicompatshim.usewebapiactionconventionsattribute)
* [<span data-ttu-id="13d60-201">UseWebApiOverloadingAttribute</span><span class="sxs-lookup"><span data-stu-id="13d60-201">UseWebApiOverloadingAttribute</span></span>](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.webapicompatshim.usewebapioverloadingattribute)
* [<span data-ttu-id="13d60-202">UseWebApiParameterConventionsAttribute</span><span class="sxs-lookup"><span data-stu-id="13d60-202">UseWebApiParameterConventionsAttribute</span></span>](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.webapicompatshim.usewebapiparameterconventionsattribute)
* [<span data-ttu-id="13d60-203">UseWebApiRoutesAttribute</span><span class="sxs-lookup"><span data-stu-id="13d60-203">UseWebApiRoutesAttribute</span></span>](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.webapicompatshim.usewebapiroutesattribute)

### <a name="action-conventions"></a><span data-ttu-id="13d60-204">Convenzioni di azione</span><span class="sxs-lookup"><span data-stu-id="13d60-204">Action Conventions</span></span>

<span data-ttu-id="13d60-205">Il `UseWebApiActionConventionsAttribute` viene utilizzato per eseguire il mapping alle azioni in base al nome di metodo HTTP (ad esempio, `Get` consente il mapping a `HttpGet`).</span><span class="sxs-lookup"><span data-stu-id="13d60-205">The `UseWebApiActionConventionsAttribute` is used to map the HTTP method to actions based on their name (for instance, `Get` would map to `HttpGet`).</span></span> <span data-ttu-id="13d60-206">Si applica solo alle azioni che non utilizzano l'attributo di routing.</span><span class="sxs-lookup"><span data-stu-id="13d60-206">It only applies to actions that do not use attribute routing.</span></span>

### <a name="overloading"></a><span data-ttu-id="13d60-207">Overload</span><span class="sxs-lookup"><span data-stu-id="13d60-207">Overloading</span></span>

<span data-ttu-id="13d60-208">Il `UseWebApiOverloadingAttribute` viene utilizzato per applicare il `WebApiOverloadingApplicationModelConvention` convenzione.</span><span class="sxs-lookup"><span data-stu-id="13d60-208">The `UseWebApiOverloadingAttribute` is used to apply the `WebApiOverloadingApplicationModelConvention` convention.</span></span> <span data-ttu-id="13d60-209">Questa convenzione viene aggiunto un `OverloadActionConstraint` per il processo di selezione di azione, che limita azioni candidato a quelli per cui la richiesta soddisfa tutti i parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="13d60-209">This convention adds an `OverloadActionConstraint` to the action selection process, which limits candidate actions to those for which the request satisfies all non-optional parameters.</span></span>

### <a name="parameter-conventions"></a><span data-ttu-id="13d60-210">Convenzioni dei parametri</span><span class="sxs-lookup"><span data-stu-id="13d60-210">Parameter Conventions</span></span>

<span data-ttu-id="13d60-211">Il `UseWebApiParameterConventionsAttribute` viene utilizzato per applicare il `WebApiParameterConventionsApplicationModelConvention` convenzione azione.</span><span class="sxs-lookup"><span data-stu-id="13d60-211">The `UseWebApiParameterConventionsAttribute` is used to apply the `WebApiParameterConventionsApplicationModelConvention` action convention.</span></span> <span data-ttu-id="13d60-212">Questa convenzione specifica che i tipi semplici usati come parametri di azione associati dall'URI per impostazione predefinita, mentre i tipi complessi sono associati dal corpo della richiesta.</span><span class="sxs-lookup"><span data-stu-id="13d60-212">This convention specifies that simple types used as action parameters are bound from the URI by default, while complex types are bound from the request body.</span></span>

### <a name="routes"></a><span data-ttu-id="13d60-213">Route</span><span class="sxs-lookup"><span data-stu-id="13d60-213">Routes</span></span>

<span data-ttu-id="13d60-214">Il `UseWebApiRoutesAttribute` controlli se il `WebApiApplicationModelConvention` convenzione controller viene applicato.</span><span class="sxs-lookup"><span data-stu-id="13d60-214">The `UseWebApiRoutesAttribute` controls whether the `WebApiApplicationModelConvention` controller convention is applied.</span></span> <span data-ttu-id="13d60-215">Quando abilitata, questa convenzione viene utilizzata per aggiungere supporto [aree](xref:mvc/controllers/areas) alla route.</span><span class="sxs-lookup"><span data-stu-id="13d60-215">When enabled, this convention is used to add support for [areas](xref:mvc/controllers/areas) to the route.</span></span>

<span data-ttu-id="13d60-216">Oltre a un set di convenzioni, il pacchetto di compatibilità include un `System.Web.Http.ApiController` classe base che sostituisce quella fornita dall'API Web.</span><span class="sxs-lookup"><span data-stu-id="13d60-216">In addition to a set of conventions, the compatibility package includes a `System.Web.Http.ApiController` base class that replaces the one provided by Web API.</span></span> <span data-ttu-id="13d60-217">In questo modo i controller per l'API Web e che eredita dal relativo `ApiController` a funzionare come sono stati progettati, durante l'esecuzione in ASP.NET MVC di base.</span><span class="sxs-lookup"><span data-stu-id="13d60-217">This allows your controllers written for Web API and inheriting from its `ApiController` to work as they were designed, while running on ASP.NET Core MVC.</span></span> <span data-ttu-id="13d60-218">Questa classe di controller di base è decorata con tutte le `UseWebApi*` gli attributi elencati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="13d60-218">This base controller class is decorated with all of the `UseWebApi*` attributes listed above.</span></span> <span data-ttu-id="13d60-219">Il `ApiController` espone proprietà, metodi e tipi di risultati che sono compatibili con quelle disponibili nell'API Web.</span><span class="sxs-lookup"><span data-stu-id="13d60-219">The `ApiController` exposes properties, methods, and result types that are compatible with those found in Web API.</span></span>

## <a name="using-apiexplorer-to-document-your-app"></a><span data-ttu-id="13d60-220">Utilizzo di ApiExplorer per documentare l'App</span><span class="sxs-lookup"><span data-stu-id="13d60-220">Using ApiExplorer to Document Your App</span></span>

<span data-ttu-id="13d60-221">Il modello di applicazione espone un [ `ApiExplorer` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.apiexplorermodel) proprietà ogni livello può essere usato per attraversare la struttura dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="13d60-221">The application model exposes an [`ApiExplorer`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.applicationmodels.apiexplorermodel) property at each level that can be used to traverse the app's structure.</span></span> <span data-ttu-id="13d60-222">Questo può essere utilizzato per [generare pagine della Guida per le API Web usando strumenti come Swagger](https://docs.microsoft.com/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span><span class="sxs-lookup"><span data-stu-id="13d60-222">This can be used to [generate help pages for your Web APIs using tools like Swagger](https://docs.microsoft.com/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span></span> <span data-ttu-id="13d60-223">Il `ApiExplorer` proprietà espone un `IsVisible` proprietà che è possibile impostare per specificare quali parti del modello dell'applicazione devono essere esposti.</span><span class="sxs-lookup"><span data-stu-id="13d60-223">The `ApiExplorer` property exposes an `IsVisible` property that can be set to specify which parts of your app's model should be exposed.</span></span> <span data-ttu-id="13d60-224">È possibile configurare questa impostazione utilizzando una convenzione:</span><span class="sxs-lookup"><span data-stu-id="13d60-224">You can configure this setting using a convention:</span></span>

[!code-csharp[Main](./application-model/sample/src/AppModelSample/Conventions/EnableApiExplorerApplicationConvention.cs)]

<span data-ttu-id="13d60-225">Usando questo approccio (e le convenzioni aggiuntive se necessario), è possibile attivare o disattivare la visibilità di API a qualsiasi livello all'interno dell'app.</span><span class="sxs-lookup"><span data-stu-id="13d60-225">Using this approach (and additional conventions if required), you can enable or disable API visibility at any level within your app.</span></span> 
