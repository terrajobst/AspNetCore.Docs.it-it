---
title: Routing in ASP.NET Core
author: ardalis
description: "Descrizione del modo in cui la funzionalità di routing di ASP.NET Core è responsabile del mapping di una richiesta in ingresso a un gestore di route."
manager: wpickett
ms.author: riande
ms.date: 10/14/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: fundamentals/routing
ms.openlocfilehash: d35c24347e8e06ed85e2af8addcc1f8cf28dc47a
ms.sourcegitcommit: f2a11a89037471a77ad68a67533754b7bb8303e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 02/01/2018
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="e1875-103">Routing in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e1875-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="e1875-104">Di [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="e1875-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="e1875-105">La funzionalità di routing è responsabile dell'esecuzione del mapping di una richiesta in ingresso a un gestore di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="e1875-106">Le route sono definite nell'app ASP.NET e vengono configurate all'avvio dell'app.</span><span class="sxs-lookup"><span data-stu-id="e1875-106">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="e1875-107">Una route può facoltativamente estrarre valori dall'URL contenuto nella richiesta e questi valori possono quindi essere usati per l'elaborazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="e1875-108">Usando le informazioni sulla route dell'app ASP.NET, la funzionalità di routing è anche in grado di generare URL che eseguono il mapping ai gestori di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-108">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="e1875-109">Di conseguenza, il routing è in grado di trovare un gestore di route in base a un URL oppure l'URL corrispondente a un gestore di route specifico in base alle informazioni del gestore di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-109">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="e1875-110">Questo documento descrive il routing di basso livello di ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e1875-110">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="e1875-111">Per il routing di ASP.NET Core MVC, vedere [Routing alle azioni del controller](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="e1875-111">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="e1875-112">[Visualizzare o scaricare il codice di esempio](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([procedura per il download](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="e1875-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="e1875-113">Nozioni fondamentali sul routing</span><span class="sxs-lookup"><span data-stu-id="e1875-113">Routing basics</span></span>

<span data-ttu-id="e1875-114">Il routing usa le *route* (implementazioni di [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) per:</span><span class="sxs-lookup"><span data-stu-id="e1875-114">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="e1875-115">eseguire il mapping di richieste in ingresso ai *gestori di route*</span><span class="sxs-lookup"><span data-stu-id="e1875-115">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="e1875-116">generare gli URL usati nelle risposte</span><span class="sxs-lookup"><span data-stu-id="e1875-116">generate URLs used in responses</span></span>

<span data-ttu-id="e1875-117">In genere, un'app ha un'unica raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="e1875-118">Quando arriva una richiesta, la raccolta di route viene elaborata in ordine.</span><span class="sxs-lookup"><span data-stu-id="e1875-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="e1875-119">La richiesta in ingresso cerca una route corrispondente all'URL di richiesta chiamando il metodo `RouteAsync` per ogni route disponibile nella raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-119">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="e1875-120">Al contrario, una risposta può usare il routing per generare URL, ad esempio per il reindirizzamento o i collegamenti, in base alle informazioni sulla route e in questo modo si evita di impostare gli URL come hardcoded ottimizzando la manutenibilità.</span><span class="sxs-lookup"><span data-stu-id="e1875-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="e1875-121">Il routing è connesso alla pipeline [middleware](xref:fundamentals/middleware/index) per mezzo della classe `RouterMiddleware`.</span><span class="sxs-lookup"><span data-stu-id="e1875-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="e1875-122">[ASP.NET Core MVC](xref:mvc/overview) aggiunge il routing alla pipeline middleware come parte della configurazione.</span><span class="sxs-lookup"><span data-stu-id="e1875-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="e1875-123">Per informazioni sull'uso del routing come componente autonomo, vedere [Uso del middleware di routing](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="e1875-123">To learn about using routing as a standalone component, see [Using routing middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="e1875-124">Corrispondenza URL</span><span class="sxs-lookup"><span data-stu-id="e1875-124">URL matching</span></span>

<span data-ttu-id="e1875-125">La corrispondenza dell'URL è il processo con cui il routing invia una richiesta in ingresso a un *gestore*.</span><span class="sxs-lookup"><span data-stu-id="e1875-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="e1875-126">Questo processo in genere si basa sui dati presenti nel percorso URL, ma può essere esteso in modo da prendere in considerazione tutti i dati della richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-126">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="e1875-127">La possibilità di inviare le richieste a gestori separati è fondamentale per ridurre le dimensioni e la complessità di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1875-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="e1875-128">Le richieste in ingresso immettono `RouterMiddleware`, che chiama il metodo `RouteAsync` per ogni route della sequenza.</span><span class="sxs-lookup"><span data-stu-id="e1875-128">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="e1875-129">L'istanza di `IRouter` sceglie se *gestire* la richiesta impostando `RouteContext.Handler` su un valore `RequestDelegate` diverso da Null.</span><span class="sxs-lookup"><span data-stu-id="e1875-129">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="e1875-130">Se una route imposta un gestore per la richiesta, l'elaborazione della route si interrompe e viene richiamato il gestore per elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-130">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="e1875-131">Se tutte le route vengono tentate e non viene trovato un gestore per la richiesta, il middleware chiama *next* e viene richiamato il middleware successivo nella pipeline di richieste.</span><span class="sxs-lookup"><span data-stu-id="e1875-131">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="e1875-132">L'input principale per `RouteAsync` è l'elemento `RouteContext.HttpContext` associato alla richiesta corrente.</span><span class="sxs-lookup"><span data-stu-id="e1875-132">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="e1875-133">`RouteContext.Handler` e `RouteContext.RouteData` sono gli output che verranno impostati quando una route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="e1875-133">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="e1875-134">Una corrispondenza durante `RouteAsync` imposta anche le proprietà di `RouteContext.RouteData` sui valori appropriati in base all'elaborazione della richiesta eseguita fino a questo punto.</span><span class="sxs-lookup"><span data-stu-id="e1875-134">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="e1875-135">Se una route corrisponde a una richiesta, `RouteContext.RouteData` conterrà informazioni importanti sullo stato relative al *risultato*.</span><span class="sxs-lookup"><span data-stu-id="e1875-135">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="e1875-136">`RouteData.Values` è un dizionario di *valori di route* prodotti dalla route.</span><span class="sxs-lookup"><span data-stu-id="e1875-136">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="e1875-137">Questi valori in genere sono determinati dalla suddivisione in token dell'URL e possono essere usati per accettare l'input dell'utente o per prendere ulteriori decisioni riguardo all'invio all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1875-137">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="e1875-138">`RouteData.DataTokens` è un elenco proprietà dei dati aggiuntivi correlati alla route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e1875-138">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="e1875-139">Gli elementi `DataTokens` sono disponibili per supportare l'associazione dei dati sullo stato con ogni route in modo che l'applicazione in un secondo tempo sia in grado di prendere decisioni in base alla route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e1875-139">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="e1875-140">Questi valori sono definiti dallo sviluppatore e **non** influiscono sul comportamento del routing in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="e1875-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="e1875-141">Inoltre, i valori accantonati nei token di dati possono essere di qualsiasi tipo, a differenza dei valori di route, che devono essere facilmente convertibili in e da stringhe.</span><span class="sxs-lookup"><span data-stu-id="e1875-141">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="e1875-142">`RouteData.Routers` è un elenco delle route che hanno preso parte alla corrispondenza corretta della richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-142">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="e1875-143">Le route possono essere annidate l'una nell'altra e la proprietà `Routers` riflette il percorso attraverso l'albero logico di route che hanno prodotto una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="e1875-143">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="e1875-144">In genere il primo elemento in `Routers` è la raccolta di route e deve essere usato per la generazione di URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-144">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="e1875-145">L'ultimo elemento in `Routers` è il gestore di route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e1875-145">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="e1875-146">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="e1875-146">URL generation</span></span>

<span data-ttu-id="e1875-147">La generazione di URL è il processo con cui il routing crea un percorso URL basato su un set di valori di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-147">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="e1875-148">Questo consente di avere una separazione logica tra i gestori e gli URL che vi accedono.</span><span class="sxs-lookup"><span data-stu-id="e1875-148">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="e1875-149">La generazione di URL segue un processo iterativo simile, ma inizia con la chiamata del codice dell'utente o del framework nel metodo `GetVirtualPath` della raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-149">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="e1875-150">Per ogni *route* il metodo `GetVirtualPath` verrà quindi chiamato in sequenza finché non viene restituito un valore `VirtualPathData` diverso da Null.</span><span class="sxs-lookup"><span data-stu-id="e1875-150">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="e1875-151">Gli input primari per `GetVirtualPath` sono:</span><span class="sxs-lookup"><span data-stu-id="e1875-151">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="e1875-152">Le route usano principalmente i valori di route specificati da `Values` e `AmbientValues` per decidere dove è possibile generare un URL e quali valori includere.</span><span class="sxs-lookup"><span data-stu-id="e1875-152">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="e1875-153">Gli elementi `AmbientValues` sono il set di valori di route prodotti dalla corrispondenza della richiesta corrente con il sistema di routing.</span><span class="sxs-lookup"><span data-stu-id="e1875-153">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="e1875-154">Al contrario, gli elementi `Values` sono i valori di route che specificano in che modo viene generato l'URL per l'operazione corrente.</span><span class="sxs-lookup"><span data-stu-id="e1875-154">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="e1875-155">`HttpContext` viene specificato nel caso in cui una route richieda la disponibilità di servizi o dati aggiuntivi associati al contesto corrente.</span><span class="sxs-lookup"><span data-stu-id="e1875-155">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="e1875-156">Suggerimento: considerare `Values` come un set di override per `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="e1875-156">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="e1875-157">La generazione di URL tenta di usare nuovamente i valori di route della richiesta corrente per semplificare la generazione di URL per i collegamenti che usano la stessa route o gli stessi valori di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-157">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="e1875-158">L'output di `GetVirtualPath` è un oggetto `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="e1875-158">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="e1875-159">`VirtualPathData` è parallelo di `RouteData`, contiene l'oggetto `VirtualPath` per l'URL di output, nonché alcune proprietà aggiuntive che devono essere impostate dalla route.</span><span class="sxs-lookup"><span data-stu-id="e1875-159">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="e1875-160">La proprietà `VirtualPathData.VirtualPath` contiene il *percorso virtuale* prodotto dalla route.</span><span class="sxs-lookup"><span data-stu-id="e1875-160">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="e1875-161">On base alle esigenze specifiche può essere necessario elaborare ulteriormente il percorso.</span><span class="sxs-lookup"><span data-stu-id="e1875-161">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="e1875-162">Ad esempio, per eseguire il rendering in HTML dell'URL generato, è necessario anteporre il percorso di base dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1875-162">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="e1875-163">`VirtualPathData.Router` è un riferimento alla route che ha generato correttamente l'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-163">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="e1875-164">`VirtualPathData.DataTokens` è un dizionario di dati aggiuntivi correlati alla route che ha generato l'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-164">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="e1875-165">È l'elemento parallelo di `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="e1875-165">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="e1875-166">Creazione di route</span><span class="sxs-lookup"><span data-stu-id="e1875-166">Creating routes</span></span>

<span data-ttu-id="e1875-167">Il routing specifica la classe `Route` come implementazione standard di `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="e1875-167">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="e1875-168">`Route` usa la sintassi del *modello di route* per definire i criteri in base ai quali confrontare il percorso dell'URL quando si chiama `RouteAsync`.</span><span class="sxs-lookup"><span data-stu-id="e1875-168">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="e1875-169">`Route` userà lo stesso modello di route per generare un URL quando si chiama `GetVirtualPath`.</span><span class="sxs-lookup"><span data-stu-id="e1875-169">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="e1875-170">La maggior parte delle applicazioni crea le route chiamando `MapRoute` o uno dei metodi di estensione simili definiti per `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="e1875-170">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="e1875-171">Questi metodi creano tutti un'istanza di `Route` e la aggiungono alla raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-171">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="e1875-172">Nota: `MapRoute` non accetta un parametro del gestore di route, aggiunge solo le route che verranno gestite da `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="e1875-172">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="e1875-173">Poiché il gestore predefinito è un oggetto `IRouter`, può decidere di non gestire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-173">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="e1875-174">Ad esempio, ASP.NET MVC viene in genere configurato come un gestore predefinito che gestisce solo le richieste che corrispondono a un'azione e un controller disponibili.</span><span class="sxs-lookup"><span data-stu-id="e1875-174">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="e1875-175">Per altre informazioni sul routing per MVC, vedere [Routing alle azioni del controller](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="e1875-175">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="e1875-176">Questo è un esempio di una chiamata `MapRoute` usata da una tipica definizione di route di ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="e1875-176">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="e1875-177">Questo modello confronta un percorso URL come `/Products/Details/17` ed estrae i valori della route `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="e1875-177">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="e1875-178">I valori della route vengono determinati suddividendo il percorso URL in segmenti e confrontando ogni segmento con il nome del *parametro di route* nel modello di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-178">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="e1875-179">I parametri di route sono denominati.</span><span class="sxs-lookup"><span data-stu-id="e1875-179">Route parameters are named.</span></span> <span data-ttu-id="e1875-180">Vengono definiti racchiudendo il nome del parametro tra parentesi graffe `{ }`.</span><span class="sxs-lookup"><span data-stu-id="e1875-180">They're defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="e1875-181">Il modello precedente può anche confrontare il percorso URL `/` generando i valori `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="e1875-181">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="e1875-182">Ciò accade perché i parametri di route `{controller}` e `{action}` hanno valori predefiniti e il parametro di route `id` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="e1875-182">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="e1875-183">Un segno di uguale `=` seguito da un valore dopo il nome del parametro di route definisce un valore predefinito per il parametro.</span><span class="sxs-lookup"><span data-stu-id="e1875-183">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="e1875-184">Un punto interrogativo `?` dopo il nome del parametro di route definisce il parametro come facoltativo.</span><span class="sxs-lookup"><span data-stu-id="e1875-184">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="e1875-185">I parametri di route con un valore predefinito producono *sempre* un valore di route quando la route corrisponde. I parametri facoltativi non producono un valore di route, se non esiste un segmento di percorso URL corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e1875-185">Route parameters with a default value *always* produce a route value when the route matches - optional parameters won't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="e1875-186">Vedere [Riferimento per i modelli di route](#route-template-reference) per una descrizione completa delle funzionalità e della sintassi del modello di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-186">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="e1875-187">Questo esempio include un *vincolo di route*:</span><span class="sxs-lookup"><span data-stu-id="e1875-187">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="e1875-188">Questo modello confronta un percorso URL come `/Products/Details/17`, ma non `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="e1875-188">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="e1875-189">La definizione del parametro di route `{id:int}` definisce un *vincolo di route* per il parametro di route `id`.</span><span class="sxs-lookup"><span data-stu-id="e1875-189">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="e1875-190">I vincoli di route implementano `IRouteConstraint` ed esaminano i valori di route per verificarli.</span><span class="sxs-lookup"><span data-stu-id="e1875-190">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="e1875-191">In questo esempio il valore di route `id` deve poter essere convertito in un numero intero.</span><span class="sxs-lookup"><span data-stu-id="e1875-191">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="e1875-192">Vedere [Riferimento per i vincoli di route](#route-constraint-reference) per una spiegazione più dettagliata dei vincoli di route specificati dal framework.</span><span class="sxs-lookup"><span data-stu-id="e1875-192">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="e1875-193">Altri overload di `MapRoute` accettano i valori per `constraints`, `dataTokens` e `defaults`.</span><span class="sxs-lookup"><span data-stu-id="e1875-193">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="e1875-194">Questi parametri aggiuntivi di `MapRoute` sono definiti come tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="e1875-194">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="e1875-195">L'uso tipico di questi parametri è passare un oggetto tipizzato in modo anonimo, in cui i nomi di proprietà di tipo anonimo corrispondono ai nomi dei parametri di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-195">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="e1875-196">I due esempi seguenti creano route equivalenti:</span><span class="sxs-lookup"><span data-stu-id="e1875-196">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="e1875-197">Suggerimento: la sintassi inline per definire i vincoli e i valori predefiniti può essere più utile per le route semplici.</span><span class="sxs-lookup"><span data-stu-id="e1875-197">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="e1875-198">Tuttavia, esistono funzionalità, ad esempio i token di dati, che non sono supportate dalla sintassi inline.</span><span class="sxs-lookup"><span data-stu-id="e1875-198">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="e1875-199">Questo esempio illustra alcune altre funzionalità:</span><span class="sxs-lookup"><span data-stu-id="e1875-199">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="e1875-200">Questo modello confronta un percorso URL come `/Blog/All-About-Routing/Introduction` ed estrae i valori `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="e1875-200">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="e1875-201">I valori di route predefiniti per `controller` e `action` vengono generati dalla route anche se sono non presenti parametri di route corrispondenti nel modello.</span><span class="sxs-lookup"><span data-stu-id="e1875-201">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="e1875-202">I valori predefiniti possono essere specificati nel modello di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-202">Default values can be specified in the route template.</span></span> <span data-ttu-id="e1875-203">Il parametro di route `article` è definito come *catch-all* dall'aspetto di un asterisco `*` prima del nome del parametro di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-203">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="e1875-204">I parametri di route catch-all acquisiscono il resto del percorso URL e possono anche corrispondere alla stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="e1875-204">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="e1875-205">In questo esempio vengono aggiunti i vincoli di route e i token di dati:</span><span class="sxs-lookup"><span data-stu-id="e1875-205">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="e1875-206">Questo modello confronta un percorso URL come `/Products/5` ed estrae i valori `{ controller = Products, action = Details, id = 5 }` e i token di dati `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="e1875-206">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Token della finestra Variabili locali](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="e1875-208">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="e1875-208">URL generation</span></span>

<span data-ttu-id="e1875-209">La classe `Route` è inoltre in grado di eseguire la generazione di URL combinando un set di valori di route con il relativo modello di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-209">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="e1875-210">Questo è logicamente il processo inverso di corrispondenza del percorso URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-210">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="e1875-211">Suggerimento: per comprendere meglio la generazione di URL, si pensi a quale URL si vuole generare e al modo in cui un modello di route deve corrispondere a tale URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-211">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="e1875-212">Quali valori devono essere prodotti?</span><span class="sxs-lookup"><span data-stu-id="e1875-212">What values would be produced?</span></span> <span data-ttu-id="e1875-213">Questo equivale approssimativamente al funzionamento della generazione di URL nella classe `Route`.</span><span class="sxs-lookup"><span data-stu-id="e1875-213">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="e1875-214">In questo esempio viene usata una route di base in stile ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="e1875-214">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="e1875-215">Con i valori di route `{ controller = Products, action = List }` questa route genera l'URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="e1875-215">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="e1875-216">I valori di route vengono sostituiti dai parametri di route corrispondenti per formare il percorso URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-216">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="e1875-217">Poiché `id` è un parametro di route facoltativo, non è un problema se non ha un valore.</span><span class="sxs-lookup"><span data-stu-id="e1875-217">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="e1875-218">Con i valori di route `{ controller = Home, action = Index }` questa route genera l'URL `/`.</span><span class="sxs-lookup"><span data-stu-id="e1875-218">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="e1875-219">I valori di specificati corrispondono ai valori predefiniti, quindi i segmenti corrispondenti a tali valori possono essere omessi.</span><span class="sxs-lookup"><span data-stu-id="e1875-219">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="e1875-220">Si noti che per entrambi gli URL generati viene eseguito il round trip con questa definizione di route e vengono prodotti gli stessi valori di route usati per generare l'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-220">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="e1875-221">Suggerimento: un'app che usa ASP.NET MVC deve usare `UrlHelper` per generare gli URL anziché eseguire la chiamata direttamente nel routing.</span><span class="sxs-lookup"><span data-stu-id="e1875-221">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="e1875-222">Per altre informazioni sul processo di generazione degli URL, vedere [Riferimento per la generazione di URL](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="e1875-222">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="e1875-223">Uso del middleware di routing</span><span class="sxs-lookup"><span data-stu-id="e1875-223">Using Routing Middleware</span></span>

<span data-ttu-id="e1875-224">Aggiungere il pacchetto NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="e1875-224">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="e1875-225">Aggiungere il routing al contenitore del servizio in *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="e1875-225">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="e1875-226">Le route devono essere configurate nel metodo `Configure` della classe `Startup`.</span><span class="sxs-lookup"><span data-stu-id="e1875-226">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="e1875-227">Nell'esempio seguente vengono usate queste API:</span><span class="sxs-lookup"><span data-stu-id="e1875-227">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="e1875-228">`MapGet` Confronta solo le richieste HTTP GET</span><span class="sxs-lookup"><span data-stu-id="e1875-228">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="e1875-229">Nella tabella seguente sono riportate le risposte con gli URI specificati.</span><span class="sxs-lookup"><span data-stu-id="e1875-229">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="e1875-230">URI</span><span class="sxs-lookup"><span data-stu-id="e1875-230">URI</span></span> | <span data-ttu-id="e1875-231">Risposta</span><span class="sxs-lookup"><span data-stu-id="e1875-231">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="e1875-232">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="e1875-232">/package/create/3</span></span>  | <span data-ttu-id="e1875-233">Hello!</span><span class="sxs-lookup"><span data-stu-id="e1875-233">Hello!</span></span> <span data-ttu-id="e1875-234">Route values: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="e1875-234">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="e1875-235">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="e1875-235">/package/track/-3</span></span>  | <span data-ttu-id="e1875-236">Hello!</span><span class="sxs-lookup"><span data-stu-id="e1875-236">Hello!</span></span> <span data-ttu-id="e1875-237">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="e1875-237">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="e1875-238">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="e1875-238">/package/track/-3/</span></span> | <span data-ttu-id="e1875-239">Hello!</span><span class="sxs-lookup"><span data-stu-id="e1875-239">Hello!</span></span> <span data-ttu-id="e1875-240">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="e1875-240">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="e1875-241">/package/track/</span><span class="sxs-lookup"><span data-stu-id="e1875-241">/package/track/</span></span> | <span data-ttu-id="e1875-242">\<Passaggio, nessuna corrispondenza></span><span class="sxs-lookup"><span data-stu-id="e1875-242">\<Fall through, no match></span></span> |
| <span data-ttu-id="e1875-243">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="e1875-243">GET /hello/Joe</span></span> | <span data-ttu-id="e1875-244">Hi, Joe!</span><span class="sxs-lookup"><span data-stu-id="e1875-244">Hi, Joe!</span></span> |
| <span data-ttu-id="e1875-245">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="e1875-245">POST /hello/Joe</span></span> | <span data-ttu-id="e1875-246">\<Passaggio, corrispondenza solo con HTTP GET></span><span class="sxs-lookup"><span data-stu-id="e1875-246">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="e1875-247">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="e1875-247">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="e1875-248">\<Passaggio, nessuna corrispondenza></span><span class="sxs-lookup"><span data-stu-id="e1875-248">\<Fall through, no match></span></span> |

<span data-ttu-id="e1875-249">Se si sta configurando una singola route, chiamare `app.UseRouter` passando un'istanza di `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="e1875-249">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="e1875-250">Non è necessario chiamare `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="e1875-250">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="e1875-251">Il framework offre un set di metodi di estensione per la creazione di route, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e1875-251">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="e1875-252">Alcuni di questi metodi, ad esempio `MapGet`, richiedono che sia specificato un oggetto `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="e1875-252">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="e1875-253">`RequestDelegate` verrà usato come *gestore di route* quando la route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="e1875-253">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="e1875-254">Altri metodi di questa famiglia consentono di configurare una pipeline middleware che verrà usata come gestore di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-254">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="e1875-255">Se il metodo *Map* metodo non accetta un gestore, ad esempio `MapRoute`, userà `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="e1875-255">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="e1875-256">I metodi `Map[Verb]` usano i vincoli per limitare la route al verbo HTTP nel nome del metodo.</span><span class="sxs-lookup"><span data-stu-id="e1875-256">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="e1875-257">Ad esempio, vedere [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) e [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="e1875-257">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="e1875-258">Riferimento per il modello di route</span><span class="sxs-lookup"><span data-stu-id="e1875-258">Route Template Reference</span></span>

<span data-ttu-id="e1875-259">I token all'interno di parentesi graffe (`{ }`) definiscono i *parametri di route* che verranno associati se esiste una corrispondenza per la route.</span><span class="sxs-lookup"><span data-stu-id="e1875-259">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="e1875-260">È possibile definire più parametri di route in un segmento di route, ma devono essere separati da un valore letterale.</span><span class="sxs-lookup"><span data-stu-id="e1875-260">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="e1875-261">Ad esempio, `{controller=Home}{action=Index}` non è una route valida, poiché non è presente un valore letterale tra `{controller}` e `{action}`.</span><span class="sxs-lookup"><span data-stu-id="e1875-261">For example `{controller=Home}{action=Index}` wouldn't be a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="e1875-262">Questi parametri di route devono avere un nome e possono avere attributi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="e1875-262">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="e1875-263">Il testo letterale diverso dai parametri di route, ad esempio `{id}`, e il separatore di percorso `/` devono corrispondere al testo nell'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-263">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="e1875-264">La corrispondenza del testo non fa distinzione tra maiuscole e minuscole e si basa sulla rappresentazione decodificata del percorso degli URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-264">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="e1875-265">Per verificare la corrispondenza del delimitatore letterale dei parametri di route `{` o `}`, eseguirne l'escape ripetendo il carattere (`{{` o `}}`).</span><span class="sxs-lookup"><span data-stu-id="e1875-265">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="e1875-266">I modelli di URL che tentano di acquisire un nome file con un'estensione facoltativa usano considerazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="e1875-266">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="e1875-267">Ad esempio, se si usa il modello `files/{filename}.{ext?}` quando esistono sia `filename` che `ext`, verranno popolati entrambi i valori.</span><span class="sxs-lookup"><span data-stu-id="e1875-267">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="e1875-268">Se esiste solo `filename` nell'URL, la route corrisponde perché il punto finale `.` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="e1875-268">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="e1875-269">I seguenti URL corrispondono a questa route:</span><span class="sxs-lookup"><span data-stu-id="e1875-269">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="e1875-270">È possibile usare il carattere `*` come prefisso per un parametro di route da associare al resto dell'URI, ovvero un parametro *catch-all*.</span><span class="sxs-lookup"><span data-stu-id="e1875-270">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="e1875-271">Ad esempio, `blog/{*slug}` corrisponde a qualsiasi URI che inizia con `/blog` seguito da qualsiasi valore (che verrebbe assegnato al valore di route `slug`).</span><span class="sxs-lookup"><span data-stu-id="e1875-271">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="e1875-272">I parametri catch-all possono anche corrispondere alla stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="e1875-272">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="e1875-273">I parametri di route possono avere *valori predefiniti*, definiti specificando il valore predefinito dopo il nome del parametro, separato da un segno `=`.</span><span class="sxs-lookup"><span data-stu-id="e1875-273">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="e1875-274">Ad esempio, `{controller=Home}` definisce `Home` come valore predefinito per `controller`.</span><span class="sxs-lookup"><span data-stu-id="e1875-274">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="e1875-275">Il valore predefinito viene usato se nell'URL non è presente alcun valore per il parametro.</span><span class="sxs-lookup"><span data-stu-id="e1875-275">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="e1875-276">Oltre ai valori predefiniti, i parametri di route possono essere facoltativi, specificati aggiungendo `?` alla fine del nome del parametro, come in `id?`.</span><span class="sxs-lookup"><span data-stu-id="e1875-276">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="e1875-277">La differenza tra parametri facoltativi e parametri "con valori predefiniti" è che un parametro di route con un valore predefinito produce sempre un valore, mentre un parametro facoltativo ha un valore solo se ne viene specificato uno.</span><span class="sxs-lookup"><span data-stu-id="e1875-277">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="e1875-278">I parametri di route possono anche presentare dei vincoli, che devono corrispondere al valore di route associato dall'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-278">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="e1875-279">Aggiungendo due punti `:` e il nome del vincolo dopo il nome del parametro di route, si specifica un *vincolo inline* per un parametro di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-279">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="e1875-280">Se il vincolo richiede argomenti, vengono specificati tra parentesi `( )` dopo il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="e1875-280">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="e1875-281">È possibile specificare più vincoli inline aggiungendo di nuovo i due punti `:` e il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="e1875-281">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="e1875-282">Il nome del vincolo viene passato al servizio `IInlineConstraintResolver` per creare un'istanza di `IRouteConstraint` da usare nell'elaborazione dell'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-282">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="e1875-283">Ad esempio, il modello di route `blog/{article:minlength(10)}` specifica il vincolo `minlength` con l'argomento `10`.</span><span class="sxs-lookup"><span data-stu-id="e1875-283">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="e1875-284">Per altre descrizioni dei vincoli di route e un elenco dei vincoli specificati dal framework, vedere [Riferimento per i vincoli di route](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="e1875-284">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="e1875-285">La tabella seguente illustra alcuni modelli di route con il relativo comportamento.</span><span class="sxs-lookup"><span data-stu-id="e1875-285">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="e1875-286">Modello di route</span><span class="sxs-lookup"><span data-stu-id="e1875-286">Route Template</span></span> | <span data-ttu-id="e1875-287">Esempio di URL corrispondente</span><span class="sxs-lookup"><span data-stu-id="e1875-287">Example Matching URL</span></span> | <span data-ttu-id="e1875-288">Note</span><span class="sxs-lookup"><span data-stu-id="e1875-288">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="e1875-289">hello</span><span class="sxs-lookup"><span data-stu-id="e1875-289">hello</span></span>  | <span data-ttu-id="e1875-290">/hello</span><span class="sxs-lookup"><span data-stu-id="e1875-290">/hello</span></span>  | <span data-ttu-id="e1875-291">Verifica la corrispondenza solo del singolo percorso `/hello`</span><span class="sxs-lookup"><span data-stu-id="e1875-291">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="e1875-292">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="e1875-292">{Page=Home}</span></span> | / | <span data-ttu-id="e1875-293">Verifica la corrispondenza e imposta `Page` su `Home`</span><span class="sxs-lookup"><span data-stu-id="e1875-293">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="e1875-294">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="e1875-294">{Page=Home}</span></span>  | <span data-ttu-id="e1875-295">/Contact</span><span class="sxs-lookup"><span data-stu-id="e1875-295">/Contact</span></span>  | <span data-ttu-id="e1875-296">Verifica la corrispondenza e imposta `Page` su `Contact`</span><span class="sxs-lookup"><span data-stu-id="e1875-296">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="e1875-297">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="e1875-297">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="e1875-298">/Products/List</span><span class="sxs-lookup"><span data-stu-id="e1875-298">/Products/List</span></span> | <span data-ttu-id="e1875-299">Esegue il mapping al controller `Products` e all'azione `List`</span><span class="sxs-lookup"><span data-stu-id="e1875-299">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="e1875-300">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="e1875-300">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="e1875-301">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="e1875-301">/Products/Details/123</span></span>  |  <span data-ttu-id="e1875-302">Esegue il mapping al controller `Products` e all'azione `Details`.</span><span class="sxs-lookup"><span data-stu-id="e1875-302">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="e1875-303">`id` impostato su 123</span><span class="sxs-lookup"><span data-stu-id="e1875-303">`id` set to 123</span></span> |
| <span data-ttu-id="e1875-304">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="e1875-304">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="e1875-305">Esegue il mapping al controller `Home` e al metodo `Index`; `id` viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="e1875-305">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="e1875-306">L'uso di un modello è in genere l'approccio più semplice al routing.</span><span class="sxs-lookup"><span data-stu-id="e1875-306">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="e1875-307">I vincoli e le impostazioni predefinite possono essere specificati anche all'esterno del modello di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-307">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="e1875-308">Suggerimento: abilitare la [registrazione](xref:fundamentals/logging/index) per vedere in che modo le implementazioni del routing, ad esempio `Route`, corrispondono alle richieste.</span><span class="sxs-lookup"><span data-stu-id="e1875-308">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="e1875-309">Riferimento per i vincoli di route</span><span class="sxs-lookup"><span data-stu-id="e1875-309">Route Constraint Reference</span></span>

<span data-ttu-id="e1875-310">I vincoli di route vengono eseguiti quando una `Route` corrisponde alla sintassi dell'URL in ingresso e suddivide il percorso URL in valori di route in formato token.</span><span class="sxs-lookup"><span data-stu-id="e1875-310">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="e1875-311">I vincoli di route in genere controllano il valore di route associato usando il modello di route e stabiliscono con una semplice decisione sì/no se il valore è o non è accettabile.</span><span class="sxs-lookup"><span data-stu-id="e1875-311">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="e1875-312">Alcuni vincoli di route usano i dati all'esterno del valore di route per stabilire se la richiesta può essere instradata.</span><span class="sxs-lookup"><span data-stu-id="e1875-312">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="e1875-313">Ad esempio, `HttpMethodRouteConstraint` può accettare o rifiutare una richiesta in base al relativo verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1875-313">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="e1875-314">Evitare l'uso di vincoli per la **convalida dell'input**, poiché un input non valido genera un errore 404 (Non trovato) anziché 400 con messaggio di errore appropriato.</span><span class="sxs-lookup"><span data-stu-id="e1875-314">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="e1875-315">I vincoli di route devono essere usati per evitare **ambiguità** tra route simili, non per convalidare gli input per una route specifica.</span><span class="sxs-lookup"><span data-stu-id="e1875-315">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="e1875-316">La tabella seguente illustra alcuni vincoli di route con il relativo comportamento.</span><span class="sxs-lookup"><span data-stu-id="e1875-316">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="e1875-317">vincolo</span><span class="sxs-lookup"><span data-stu-id="e1875-317">constraint</span></span> | <span data-ttu-id="e1875-318">Esempio</span><span class="sxs-lookup"><span data-stu-id="e1875-318">Example</span></span> | <span data-ttu-id="e1875-319">Esempi di corrispondenza</span><span class="sxs-lookup"><span data-stu-id="e1875-319">Example Matches</span></span> | <span data-ttu-id="e1875-320">Note</span><span class="sxs-lookup"><span data-stu-id="e1875-320">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="e1875-321">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="e1875-321">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="e1875-322">Corrisponde a qualsiasi numero intero</span><span class="sxs-lookup"><span data-stu-id="e1875-322">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="e1875-323">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="e1875-323">`true`, `FALSE`</span></span> | <span data-ttu-id="e1875-324">Corrisponde a `true` o `false` (senza distinzione tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="e1875-324">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="e1875-325">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="e1875-325">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="e1875-326">Corrisponde a un valore `DateTime` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="e1875-326">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="e1875-327">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="e1875-327">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="e1875-328">Corrisponde a un valore `decimal` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="e1875-328">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="e1875-329">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="e1875-329">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="e1875-330">Corrisponde a un valore `double` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="e1875-330">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="e1875-331">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="e1875-331">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="e1875-332">Corrisponde a un valore `float` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="e1875-332">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="e1875-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="e1875-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="e1875-334">Corrisponde a un valore `Guid` valido</span><span class="sxs-lookup"><span data-stu-id="e1875-334">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="e1875-335">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="e1875-335">`123456789`, `-123456789`</span></span> | <span data-ttu-id="e1875-336">Corrisponde a un valore `long` valido</span><span class="sxs-lookup"><span data-stu-id="e1875-336">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="e1875-337">La stringa deve contenere almeno 4 caratteri</span><span class="sxs-lookup"><span data-stu-id="e1875-337">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="e1875-338">La stringa non deve contenere più di 8 caratteri</span><span class="sxs-lookup"><span data-stu-id="e1875-338">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="e1875-339">La stringa deve contenere esattamente 12 caratteri</span><span class="sxs-lookup"><span data-stu-id="e1875-339">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="e1875-340">La stringa deve contenere almeno 8 e non più di 16 caratteri</span><span class="sxs-lookup"><span data-stu-id="e1875-340">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="e1875-341">Il valore intero deve essere almeno 18</span><span class="sxs-lookup"><span data-stu-id="e1875-341">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="e1875-342">Il valore intero non deve essere superiore a 120</span><span class="sxs-lookup"><span data-stu-id="e1875-342">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="e1875-343">Il valore intero deve essere almeno 18 ma non più di 120</span><span class="sxs-lookup"><span data-stu-id="e1875-343">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="e1875-344">La stringa deve essere costituita da uno o più caratteri alfabetici (`a`-`z`, senza distinzione tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="e1875-344">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="e1875-345">La stringa deve corrispondere all'espressione regolare (vedere i suggerimenti per la definizione di un'espressione regolare)</span><span class="sxs-lookup"><span data-stu-id="e1875-345">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="e1875-346">Usato per imporre che un valore diverso da un parametro sia presente durante la generazione dell'URL</span><span class="sxs-lookup"><span data-stu-id="e1875-346">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="e1875-347">I vincoli di route che verificano l'URL possono essere convertiti in un tipo CLR, ad esempio `int` o `DateTime`, usano sempre le impostazioni cultura inglese non dipendenti da paese/area geografica, presupponendo che l'URL sia non localizzabile.</span><span class="sxs-lookup"><span data-stu-id="e1875-347">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="e1875-348">I vincoli di route specificati dal framework non modificano i valori archiviati nei valori di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-348">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="e1875-349">Tutti i valori di route analizzati dall'URL vengono archiviati come stringhe.</span><span class="sxs-lookup"><span data-stu-id="e1875-349">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="e1875-350">Ad esempio, il [vincolo di route Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) tenterà di convertire il valore di route in un valore float, ma il valore convertito viene usato solo per verificare che può essere convertito in un valore float.</span><span class="sxs-lookup"><span data-stu-id="e1875-350">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="e1875-351">Espressioni regolari</span><span class="sxs-lookup"><span data-stu-id="e1875-351">Regular expressions</span></span> 

<span data-ttu-id="e1875-352">Il framework di ASP.NET Core aggiunge `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al costruttore di espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="e1875-352">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="e1875-353">Vedere l'articolo sull'[enumerazione RegexOptions](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) per una descrizione di questi membri.</span><span class="sxs-lookup"><span data-stu-id="e1875-353">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="e1875-354">Le espressioni regolari usano delimitatori e token simili a quelli usati dal routing e dal linguaggio C#.</span><span class="sxs-lookup"><span data-stu-id="e1875-354">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="e1875-355">Per i token di espressione è necessario aggiungere caratteri di escape.</span><span class="sxs-lookup"><span data-stu-id="e1875-355">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="e1875-356">Ad esempio, per usare l'espressione regolare `^\d{3}-\d{2}-\d{4}$` nel routing, è necessario digitare i caratteri `\` come `\\` nel file di origine C# per eseguire l'escape del carattere di escape `\` della stringa, a meno che non si usino [valori letterali stringa verbatim](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="e1875-356">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="e1875-357">Raddoppiare i caratteri `{`, `}`, '[' e ']' per eseguire l'escape dei caratteri di delimitazione dei parametri di routing.</span><span class="sxs-lookup"><span data-stu-id="e1875-357">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="e1875-358">Nella tabella che segue sono riportate due espressioni regolari con la relativa versione dopo l'escape.</span><span class="sxs-lookup"><span data-stu-id="e1875-358">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="e1875-359">Espressione</span><span class="sxs-lookup"><span data-stu-id="e1875-359">Expression</span></span>               | <span data-ttu-id="e1875-360">Nota</span><span class="sxs-lookup"><span data-stu-id="e1875-360">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="e1875-361">Espressione regolare</span><span class="sxs-lookup"><span data-stu-id="e1875-361">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="e1875-362">Con caratteri di escape</span><span class="sxs-lookup"><span data-stu-id="e1875-362">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="e1875-363">Espressione regolare</span><span class="sxs-lookup"><span data-stu-id="e1875-363">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="e1875-364">Con caratteri di escape</span><span class="sxs-lookup"><span data-stu-id="e1875-364">Escaped</span></span>  |

<span data-ttu-id="e1875-365">Le espressioni regolari usate nel routing spesso iniziano con il carattere `^` (corrispondenza con la posizione iniziale della stringa) e terminano con il carattere `$` (corrispondenza con la posizione finale della stringa).</span><span class="sxs-lookup"><span data-stu-id="e1875-365">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="e1875-366">I caratteri `^` e `$` consentono di verificare che l'espressione regolare corrisponda all'intero valore del parametro di route.</span><span class="sxs-lookup"><span data-stu-id="e1875-366">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="e1875-367">Senza i caratteri `^` e `$` l'espressione regolare corrisponderà a qualsiasi sottostringa all'interno della stringa e spesso questo non è il risultato previsto.</span><span class="sxs-lookup"><span data-stu-id="e1875-367">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="e1875-368">La tabella seguente illustra alcuni esempi e spiega perché si verifica o non si verifica la corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="e1875-368">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="e1875-369">Espressione</span><span class="sxs-lookup"><span data-stu-id="e1875-369">Expression</span></span>               | <span data-ttu-id="e1875-370">Stringa</span><span class="sxs-lookup"><span data-stu-id="e1875-370">String</span></span> | <span data-ttu-id="e1875-371">Corrispondenza con</span><span class="sxs-lookup"><span data-stu-id="e1875-371">Match</span></span> | <span data-ttu-id="e1875-372">Commento</span><span class="sxs-lookup"><span data-stu-id="e1875-372">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="e1875-373">hello</span><span class="sxs-lookup"><span data-stu-id="e1875-373">hello</span></span> | <span data-ttu-id="e1875-374">sì</span><span class="sxs-lookup"><span data-stu-id="e1875-374">yes</span></span> | <span data-ttu-id="e1875-375">corrispondenze di sottostringhe</span><span class="sxs-lookup"><span data-stu-id="e1875-375">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="e1875-376">123abc456</span><span class="sxs-lookup"><span data-stu-id="e1875-376">123abc456</span></span> | <span data-ttu-id="e1875-377">sì</span><span class="sxs-lookup"><span data-stu-id="e1875-377">yes</span></span> | <span data-ttu-id="e1875-378">corrispondenze di sottostringhe</span><span class="sxs-lookup"><span data-stu-id="e1875-378">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="e1875-379">mz</span><span class="sxs-lookup"><span data-stu-id="e1875-379">mz</span></span> | <span data-ttu-id="e1875-380">sì</span><span class="sxs-lookup"><span data-stu-id="e1875-380">yes</span></span> | <span data-ttu-id="e1875-381">corrisponde all'espressione</span><span class="sxs-lookup"><span data-stu-id="e1875-381">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="e1875-382">MZ</span><span class="sxs-lookup"><span data-stu-id="e1875-382">MZ</span></span> | <span data-ttu-id="e1875-383">sì</span><span class="sxs-lookup"><span data-stu-id="e1875-383">yes</span></span> | <span data-ttu-id="e1875-384">senza distinzione maiuscole/minuscole</span><span class="sxs-lookup"><span data-stu-id="e1875-384">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="e1875-385">hello</span><span class="sxs-lookup"><span data-stu-id="e1875-385">hello</span></span> | <span data-ttu-id="e1875-386">No</span><span class="sxs-lookup"><span data-stu-id="e1875-386">no</span></span> | <span data-ttu-id="e1875-387">vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="e1875-387">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="e1875-388">123abc456</span><span class="sxs-lookup"><span data-stu-id="e1875-388">123abc456</span></span> | <span data-ttu-id="e1875-389">No</span><span class="sxs-lookup"><span data-stu-id="e1875-389">no</span></span> | <span data-ttu-id="e1875-390">vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="e1875-390">see `^` and `$` above</span></span> |

<span data-ttu-id="e1875-391">Per altre informazioni sulla sintassi delle espressioni regolari, vedere [Espressioni regolari di .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="e1875-391">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="e1875-392">Per limitare un parametro a un set noto di valori possibili, usare un'espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="e1875-392">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="e1875-393">Ad esempio, `{action:regex(^(list|get|create)$)}` verifica la corrispondenza del valore di route `action` solo con `list`, `get` o `create`.</span><span class="sxs-lookup"><span data-stu-id="e1875-393">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="e1875-394">Se passata nel dizionario di vincoli, la stringa "^(list|get|create)$" sarebbe equivalente.</span><span class="sxs-lookup"><span data-stu-id="e1875-394">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="e1875-395">Anche i vincoli passati nel dizionario di vincoli (non inline all'interno di un modello) che non corrispondono a uno dei vincoli noti vengono considerati espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="e1875-395">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="e1875-396">Riferimento per la generazione di URL</span><span class="sxs-lookup"><span data-stu-id="e1875-396">URL Generation Reference</span></span>

<span data-ttu-id="e1875-397">L'esempio seguente illustra come generare un collegamento a una route usando un dizionario di valori di route e un oggetto `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="e1875-397">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="e1875-398">L'oggetto `VirtualPath` generato alla fine dell'esempio precedente è `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="e1875-398">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="e1875-399">Il secondo parametro per il costruttore `VirtualPathContext` è una raccolta di *valori di ambiente*.</span><span class="sxs-lookup"><span data-stu-id="e1875-399">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="e1875-400">I valori di ambiente sono utili poiché limitano il numero di valori che uno sviluppatore deve specificare all'interno di un determinato contesto di richiesta.</span><span class="sxs-lookup"><span data-stu-id="e1875-400">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="e1875-401">I valori di route correnti della richiesta corrente sono considerati valori di ambiente per la generazione del collegamento.</span><span class="sxs-lookup"><span data-stu-id="e1875-401">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="e1875-402">Ad esempio, in un'app ASP.NET MVC se si è nell'azione `About` di `HomeController`, non è necessario specificare il valore di route del controller per collegarsi all'azione `Index` poiché verrà usato il valore di ambiente di `Home`.</span><span class="sxs-lookup"><span data-stu-id="e1875-402">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="e1875-403">I valori di ambiente vengono ignorati se non corrispondono a un parametro e quando vengono sostituiti da valori specificati in modo esplicito, procedendo da sinistra verso destra nell'URL.</span><span class="sxs-lookup"><span data-stu-id="e1875-403">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="e1875-404">I valori specificati in modo esplicito ma che non corrispondono ad alcun elemento vengono aggiunti alla stringa di query.</span><span class="sxs-lookup"><span data-stu-id="e1875-404">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="e1875-405">La tabella seguente illustra il risultato ottenuto quando si usa il modello di route `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="e1875-405">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="e1875-406">Valori di ambiente</span><span class="sxs-lookup"><span data-stu-id="e1875-406">Ambient Values</span></span> | <span data-ttu-id="e1875-407">Valori espliciti</span><span class="sxs-lookup"><span data-stu-id="e1875-407">Explicit Values</span></span> | <span data-ttu-id="e1875-408">Risultato</span><span class="sxs-lookup"><span data-stu-id="e1875-408">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="e1875-409">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="e1875-409">controller="Home"</span></span> | <span data-ttu-id="e1875-410">action="About"</span><span class="sxs-lookup"><span data-stu-id="e1875-410">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="e1875-411">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="e1875-411">controller="Home"</span></span> | <span data-ttu-id="e1875-412">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="e1875-412">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="e1875-413">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="e1875-413">controller="Home",color="Red"</span></span> | <span data-ttu-id="e1875-414">action="About"</span><span class="sxs-lookup"><span data-stu-id="e1875-414">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="e1875-415">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="e1875-415">controller="Home"</span></span> | <span data-ttu-id="e1875-416">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="e1875-416">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="e1875-417">Se una route ha un valore predefinito che non corrisponde a un parametro e tale valore viene specificato in modo esplicito, il valore deve corrispondere al valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="e1875-417">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="e1875-418">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e1875-418">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="e1875-419">La funzionalità di generazione del collegamento genera un collegamento per questa route solo se vengono specificati i valori corrispondenti per il controller e l'azione.</span><span class="sxs-lookup"><span data-stu-id="e1875-419">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
