---
uid: identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
title: Procedure consigliate per la distribuzione delle password e altri dati sensibili per ASP.NET e servizio App di Azure | Documenti Microsoft
author: Rick-Anderson
description: "Questa esercitazione viene illustrato come il codice è possibile archiviare e accedere alle informazioni protette in modo sicuro. L'aspetto più importante è che evitare di archiviare le password o altre sen..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/21/2015
ms.topic: article
ms.assetid: 97902c66-cb61-4d11-be52-73f962f2db0a
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
msc.type: authoredcontent
ms.openlocfilehash: 995d9a088e3095f36a01d2adb19ec08e6a6d1b3e
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/24/2018
---
<a name="best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure-app-service"></a><span data-ttu-id="6e5ed-104">Procedure consigliate per la distribuzione delle password e altri dati sensibili per ASP.NET e servizio App di Azure</span><span class="sxs-lookup"><span data-stu-id="6e5ed-104">Best practices for deploying passwords and other sensitive data to ASP.NET and Azure App Service</span></span>
====================
<span data-ttu-id="6e5ed-105">Da [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="6e5ed-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="6e5ed-106">Questa esercitazione viene illustrato come il codice è possibile archiviare e accedere alle informazioni protette in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-106">This tutorial shows how your code can securely store and access secure information.</span></span> <span data-ttu-id="6e5ed-107">L'aspetto più importante è evitare di archiviare le password o altri dati sensibili nel codice sorgente e non è consigliabile utilizzare i segreti di produzione in modalità di sviluppo e test.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-107">The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</span></span>
> 
> <span data-ttu-id="6e5ed-108">Il codice di esempio è una semplice applicazione console processo Web e un'applicazione ASP.NET MVC che deve accedere a un database connection string password, Twilio, Google e SendGrid le chiavi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-108">The sample code is a simple WebJob console app and a ASP.NET MVC app that needs access to a database connection string password, Twilio, Google and SendGrid secure keys.</span></span>
> 
> <span data-ttu-id="6e5ed-109">In locale le impostazioni e PHP viene inoltre riportato.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-109">On premise settings and PHP is also mentioned.</span></span>


- [<span data-ttu-id="6e5ed-110">Utilizzo delle password nell'ambiente di sviluppo</span><span class="sxs-lookup"><span data-stu-id="6e5ed-110">Working with passwords in the development environment</span></span>](#pwd)
- [<span data-ttu-id="6e5ed-111">Utilizzo delle stringhe di connessione nell'ambiente di sviluppo</span><span class="sxs-lookup"><span data-stu-id="6e5ed-111">Working with connection strings in the development environment</span></span>](#con)
- [<span data-ttu-id="6e5ed-112">Applicazioni console processi Web</span><span class="sxs-lookup"><span data-stu-id="6e5ed-112">WebJobs console apps</span></span>](#wj)
- [<span data-ttu-id="6e5ed-113">Distribuzione di segreti in Azure</span><span class="sxs-lookup"><span data-stu-id="6e5ed-113">Deploying secrets to Azure</span></span>](#da)
- [<span data-ttu-id="6e5ed-114">Note per On-Premise e PHP</span><span class="sxs-lookup"><span data-stu-id="6e5ed-114">Notes for On-Premise and PHP</span></span>](#not)
- [<span data-ttu-id="6e5ed-115">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="6e5ed-115">Additional Resources</span></span>](#addRes)

<a id="pwd"></a>
## <a name="working-with-passwords-in-the-development-environment"></a><span data-ttu-id="6e5ed-116">Utilizzo delle password nell'ambiente di sviluppo</span><span class="sxs-lookup"><span data-stu-id="6e5ed-116">Working with passwords in the development environment</span></span>

<span data-ttu-id="6e5ed-117">Le esercitazioni illustrano spesso i dati sensibili nel codice sorgente, probabilmente con un problema che non è consigliabile archiviare i dati sensibili nel codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-117">Tutorials frequently show sensitive data in source code, hopefully with a caveat that you should never store sensitive data in source code.</span></span> <span data-ttu-id="6e5ed-118">Ad esempio, my [app ASP.NET MVC 5 con posta elettronica e SMS 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) esercitazione vengono illustrate le operazioni seguenti nel *Web. config* file:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-118">For example, my [ASP.NET MVC 5 app with SMS and email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial shows the following in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample1.xml)]

<span data-ttu-id="6e5ed-119">Il *Web. config* file è il codice sorgente, pertanto questi segreti non devono mai essere archiviati in tale file.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-119">The *web.config* file is source code, so these secrets should never be stored in that file.</span></span> <span data-ttu-id="6e5ed-120">Fortunatamente, la `<appSettings>` elemento ha un `file` attributo che consente di specificare un file esterno che contiene le impostazioni di configurazione app sensibili.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-120">Fortunately, the `<appSettings>` element has a `file` attribute that allows you to specify an external file that contains sensitive app config settings.</span></span> <span data-ttu-id="6e5ed-121">È possibile spostare tutti i segreti in un file esterno come file esterno non viene archiviato nella struttura ad albero di origine.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-121">You can move all your secrets to an external file as long as the external file is not checked into your source tree.</span></span> <span data-ttu-id="6e5ed-122">Ad esempio, nel markup seguente, il file *AppSettingsSecrets.config* contiene tutti i segreti dell'app:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-122">For example, in the following markup, the file *AppSettingsSecrets.config* contains all the app secrets:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample2.xml)]

<span data-ttu-id="6e5ed-123">Il codice nel file esterno (*AppSettingsSecrets.config* in questo esempio), è lo stesso markup, vedere il *Web. config* file:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-123">The markup in the external file (*AppSettingsSecrets.config* in this sample), is the same markup found in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample3.xml)]

<span data-ttu-id="6e5ed-124">Il runtime di ASP.NET unisce il contenuto del file esterno con il markup in &lt;appSettings&gt; elemento.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-124">The ASP.NET runtime merges the contents of the external file with the markup in &lt;appSettings&gt; element.</span></span> <span data-ttu-id="6e5ed-125">L'attributo di file viene ignorato se non viene trovato il file specificato.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-125">The runtime ignores the file attribute if the specified file cannot be found.</span></span>

> [!WARNING]
> <span data-ttu-id="6e5ed-126">Sicurezza: non si aggiunge il *config segreti* file al progetto o archiviarla nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-126">Security - Do not add your *secrets .config* file to your project or check it into source control.</span></span> <span data-ttu-id="6e5ed-127">Per impostazione predefinita, Visual Studio imposta la `Build Action` a `Content`, ovvero il file viene distribuito.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-127">By default, Visual Studio sets the `Build Action` to `Content`, which means the file is deployed.</span></span> <span data-ttu-id="6e5ed-128">Per ulteriori informazioni vedere [perché non tutti i file nella cartella di progetto vengono distribuiti?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span><span class="sxs-lookup"><span data-stu-id="6e5ed-128">For more information see [Why don't all of the files in my project folder get deployed?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span></span> <span data-ttu-id="6e5ed-129">Sebbene sia possibile usare qualsiasi estensione per il *config segreti* file, è consigliabile mantenere *config*, come i file di configurazione non vengono gestiti da IIS.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-129">Although you can use any extension for the *secrets .config* file, it's best to keep it *.config*, as config files are not served by IIS.</span></span> <span data-ttu-id="6e5ed-130">Si noti inoltre che il *AppSettingsSecrets.config* file è di due livelli di directory superiore dal *Web. config* file, pertanto è completamente fuori della directory della soluzione.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-130">Notice also that the *AppSettingsSecrets.config* file is two directory levels up from the *web.config* file, so it's completely out of the solution directory.</span></span> <span data-ttu-id="6e5ed-131">Spostando il file dalla directory della soluzione, &quot;git aggiungere \* &quot; non verranno aggiunte al repository.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-131">By moving the file out of the solution directory, &quot;git add \*&quot; won't add it to your repository.</span></span>


<a id="con"></a>
## <a name="working-with-connection-strings-in-the-development-environment"></a><span data-ttu-id="6e5ed-132">Utilizzo delle stringhe di connessione nell'ambiente di sviluppo</span><span class="sxs-lookup"><span data-stu-id="6e5ed-132">Working with connection strings in the development environment</span></span>

<span data-ttu-id="6e5ed-133">Visual Studio crea nuovi progetti ASP.NET che utilizzano [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span><span class="sxs-lookup"><span data-stu-id="6e5ed-133">Visual Studio creates new ASP.NET projects that use [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span></span> <span data-ttu-id="6e5ed-134">LocalDB è stato creato in modo specifico per l'ambiente di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-134">LocalDB was created specifically for the development environment.</span></span> <span data-ttu-id="6e5ed-135">Non richiede una password, pertanto non è necessario eseguire alcuna operazione per impedire che i segreti viene verificata nel codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-135">It doesn't require a password, therefore you don't need to do anything to prevent secrets from being checked into your source code.</span></span> <span data-ttu-id="6e5ed-136">Alcuni team di sviluppo utilizzare le versioni complete di SQL Server (o altri DBMS) che richiedono una password.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-136">Some development teams use the full versions of SQL Server (or other DBMS) that require a password.</span></span>

<span data-ttu-id="6e5ed-137">È possibile utilizzare il `configSource` attributo per sostituire l'intero `<connectionStrings>` markup.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-137">You can use the `configSource` attribute to replace the entire `<connectionStrings>` markup.</span></span> <span data-ttu-id="6e5ed-138">A differenza di `<appSettings>` `file` attributo che unisce il markup, il `configSource` attributo sostituisce il markup.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-138">Unlike the `<appSettings>` `file` attribute that merges the markup, the `configSource` attribute replaces the markup.</span></span> <span data-ttu-id="6e5ed-139">Nell'esempio di codice seguente viene illustrata la `configSource` attributo la *Web. config* file:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-139">The following markup shows the `configSource` attribute in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample4.xml?highlight=1)]

> [!NOTE]
> <span data-ttu-id="6e5ed-140">Se si utilizza il `configSource` attributo come illustrato in precedenza per spostare le stringhe di connessione a un file esterno e dispone di Visual Studio creare un nuovo sito web, non sarà in grado di rilevare si utilizza un database e non si otterrà l'opzione di configurazione del database quando si pu pubblica in Azure da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-140">If you use the `configSource` attribute as shown above to move your connection strings to an external file, and have Visual Studio create a new web site, it won't be able to detect you are using a database, and you won't get the option of configuring the database when you publish to Azure from Visual Studio.</span></span> <span data-ttu-id="6e5ed-141">Se si utilizza il `configSource` attributo, è possibile utilizzare PowerShell per creare e distribuire il sito web e il database oppure è possibile creare il sito web e il database nel portale, prima della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-141">If you are using the `configSource` attribute, you can use PowerShell to create and deploy your web site and database, or you can create the web site and the database in the portal before you publish.</span></span> <span data-ttu-id="6e5ed-142">Il [New AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script creerà un nuovo sito web e un database.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-142">The [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script will create a new web site and database.</span></span>


> [!WARNING]
> <span data-ttu-id="6e5ed-143">Sicurezza: a differenza di *AppSettingsSecrets.config* file, il file di stringhe di connessione esterna deve essere nella stessa directory radice *Web. config* file, pertanto è necessario adottare le precauzioni per accertarsi di non archiviarlo nel repository del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-143">Security - Unlike the *AppSettingsSecrets.config* file, the external connection strings file must be in the same directory as the root *web.config* file, so you'll have to take precautions to ensure you don't check it into your source repository.</span></span>


> [!NOTE]
> <span data-ttu-id="6e5ed-144">**Avviso di sicurezza nel file di segreti:** si consiglia di non utilizzare i segreti di produzione nel test e sviluppo.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-144">**Security Warning on secrets file:** A best practice is to not use production secrets in test and development.</span></span> <span data-ttu-id="6e5ed-145">Utilizzo di password di produzione in prova o di sviluppo di perdite di segreti.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-145">Using production passwords in test or development leaks those secrets.</span></span>


<a id="wj"></a>
## <a name="webjobs-console-apps"></a><span data-ttu-id="6e5ed-146">Applicazioni console processi Web</span><span class="sxs-lookup"><span data-stu-id="6e5ed-146">WebJobs console apps</span></span>

<span data-ttu-id="6e5ed-147">Il *app* file utilizzato da un'applicazione console non supporta i percorsi relativi, ma supporta percorsi assoluti.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-147">The *app.config* file used by a console app doesn't support relative paths, but it does support absolute paths.</span></span> <span data-ttu-id="6e5ed-148">Per spostare i segreti dalla directory del progetto, è possibile utilizzare un percorso assoluto.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-148">You can use an absolute path to move your secrets out of your project directory.</span></span> <span data-ttu-id="6e5ed-149">Il markup seguente mostra i segreti nel *C:\secrets\AppSettingsSecrets.config* file e dati non sensibili nel *app* file.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-149">The following markup shows the secrets in the *C:\secrets\AppSettingsSecrets.config* file, and non sensitive data in the *app.config* file.</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample5.xml?highlight=2)]

<a id="da"></a>
## <a name="deploying-secrets-to-azure"></a><span data-ttu-id="6e5ed-150">Distribuzione di segreti in Azure</span><span class="sxs-lookup"><span data-stu-id="6e5ed-150">Deploying secrets to Azure</span></span>

<span data-ttu-id="6e5ed-151">Quando si distribuisce l'app web in Azure, il *AppSettingsSecrets.config* file non verrà distribuito (che è quello desiderato).</span><span class="sxs-lookup"><span data-stu-id="6e5ed-151">When you deploy your web app to Azure, the *AppSettingsSecrets.config* file won't be deployed (that's what you want).</span></span> <span data-ttu-id="6e5ed-152">È possibile utilizzare il [il portale di gestione di Azure](https://azure.microsoft.com/services/management-portal/) e impostarli manualmente, a tale scopo:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-152">You could go to the [Azure Management Portal](https://azure.microsoft.com/services/management-portal/) and set them manually, to do that:</span></span>

1. <span data-ttu-id="6e5ed-153">Passare a [https://portal.azure.com](https://portal.azure.com)e accedere con le credenziali di Azure.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-153">Go to [https://portal.azure.com](https://portal.azure.com), and sign in with your Azure credentials.</span></span>
2. <span data-ttu-id="6e5ed-154">Fare clic su **Sfoglia &gt; App Web**, quindi fare clic sul nome dell'app web.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-154">Click **Browse &gt; Web Apps**, then click the name of your web app.</span></span>
3. <span data-ttu-id="6e5ed-155">Fare clic su **tutte le impostazioni &gt; le impostazioni dell'applicazione**.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-155">Click **All settings &gt; Application settings**.</span></span>

<span data-ttu-id="6e5ed-156">Il **impostazioni app** e **stringa di connessione** valori override le impostazioni del *Web. config* file.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-156">The **app settings** and **connection string** values override the same settings in the *web.config* file.</span></span> <span data-ttu-id="6e5ed-157">In questo esempio, si distribuzione non è riuscita queste impostazioni in Azure, ma se queste chiavi sono stati nel *Web. config* file, le impostazioni sul portale avrebbe la precedenza.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-157">In our example, we did not deploy these settings to Azure, but if these keys were in the *web.config* file, the settings shown on the portal would take precedence.</span></span>

<span data-ttu-id="6e5ed-158">Una procedura consigliata consiste nel seguire un [flusso di lavoro DevOps](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) e utilizzare [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (o un altro framework, ad esempio [Chef](http://www.opscode.com/chef/) o [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) per automatizzare l'impostazione di questi valori in Azure.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-158">A best practice is to follow a [DevOps workflow](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) and use [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (or another framework such as [Chef](http://www.opscode.com/chef/) or [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) to automate setting these values in Azure.</span></span> <span data-ttu-id="6e5ed-159">Il seguente script di PowerShell Usa [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) per esportare i segreti crittografati su disco:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-159">The following PowerShell script uses [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) to export the encrypted secrets to disk:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample6.ps1)]

<span data-ttu-id="6e5ed-160">Nello script, 'Name' è il nome della chiave privata, ad esempio '&quot;FB\_AppSecret&quot; o "TwitterSecret".</span><span class="sxs-lookup"><span data-stu-id="6e5ed-160">In the script above, ‘Name' is the name of the secret key, such as ‘&quot;FB\_AppSecret&quot; or "TwitterSecret".</span></span> <span data-ttu-id="6e5ed-161">È possibile visualizzare il file ".credential" creato dallo script nel browser.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-161">You can view the ".credential" file created by the script in your browser.</span></span> <span data-ttu-id="6e5ed-162">Nel frammento seguente verifica ognuno dei file di credenziali e imposta i segreti per l'app web denominata:</span><span class="sxs-lookup"><span data-stu-id="6e5ed-162">The snippet below tests each of the credential files and sets the secrets for the named web app:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample7.ps1)]

> [!WARNING]
> <span data-ttu-id="6e5ed-163">Sicurezza: non includere password o altri segreti nello script di PowerShell, eseguire vanifica in questo caso lo scopo di utilizzo di uno script di PowerShell per distribuire i dati sensibili.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-163">Security - Don't include passwords or other secrets in the PowerShell script, doing so defeats the purpose of using a PowerShell script to deploy sensitive data.</span></span> <span data-ttu-id="6e5ed-164">Il [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet fornisce un meccanismo protetto per ottenere una password.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-164">The [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet provides a secure mechanism to obtain a password.</span></span> <span data-ttu-id="6e5ed-165">Uso di una richiesta dell'interfaccia utente può impedire la perdita di una password.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-165">Using a UI prompt can prevent leaking a password.</span></span>


### <a name="deploying-db-connection-strings"></a><span data-ttu-id="6e5ed-166">Le stringhe di connessione di database di distribuzione</span><span class="sxs-lookup"><span data-stu-id="6e5ed-166">Deploying DB connection strings</span></span>

<span data-ttu-id="6e5ed-167">Le stringhe di connessione di database vengono gestite in modo analogo alle impostazioni app.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-167">DB connection strings are handled similarly to app settings.</span></span> <span data-ttu-id="6e5ed-168">Se si distribuisce l'app web da Visual Studio, la stringa di connessione verrà configurata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-168">If you deploy your web app from Visual Studio, the connection string will be configured for you.</span></span> <span data-ttu-id="6e5ed-169">È possibile verificare questa nel portale.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-169">You can verify this in the portal.</span></span> <span data-ttu-id="6e5ed-170">È consigliabile impostare la stringa di connessione con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-170">The recommended way to set the connection string is with PowerShell.</span></span> <span data-ttu-id="6e5ed-171">Per un esempio di uno script di PowerShell di crea un sito Web e un database e imposta la stringa di connessione nel sito Web, scaricare [New AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) dal [libreria Script Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="6e5ed-171">For an example of a PowerShell script the creates a website and database and sets the connection string in the website, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span>

<a id="not"></a>
## <a name="notes-for-php"></a><span data-ttu-id="6e5ed-172">Note per PHP</span><span class="sxs-lookup"><span data-stu-id="6e5ed-172">Notes for PHP</span></span>

<span data-ttu-id="6e5ed-173">Poiché le coppie chiave-valore per entrambi **impostazioni app** e **le stringhe di connessione** vengono archiviati nelle variabili di ambiente nel servizio App di Azure, gli sviluppatori che utilizzano facilmente qualsiasi può Framework (ad esempio PHP) di app web recuperare questi valori.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-173">Since the key-value pairs for both **app settings** and **connection strings** are stored in environment variables on Azure App Service, developers that use any web app frameworks (such as PHP) can easily retrieve these values.</span></span> <span data-ttu-id="6e5ed-174">Vedere di Stefan Schackow [siti Web di Azure: come le stringhe dell'applicazione e lavoro di stringhe di connessione](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) post di blog che mostra un frammento PHP per la lettura di stringhe di connessione e le impostazioni dell'app.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-174">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) blog post which shows a PHP snippet to read app settings and connection strings.</span></span>

## <a name="notes-for-on-premises-servers"></a><span data-ttu-id="6e5ed-175">Note per i server locali</span><span class="sxs-lookup"><span data-stu-id="6e5ed-175">Notes for on-premises servers</span></span>

<span data-ttu-id="6e5ed-176">Se si distribuiscono server web locale, ti consente di segreti protetti da [crittografare sezioni di configurazione di file di configurazione](https://msdn.microsoft.com/library/ff647398.aspx).</span><span class="sxs-lookup"><span data-stu-id="6e5ed-176">If you are deploying to on-premises web servers, you can help secure secrets by [encrypting the configuration sections of configuration files](https://msdn.microsoft.com/library/ff647398.aspx).</span></span> <span data-ttu-id="6e5ed-177">In alternativa, è possibile utilizzare lo stesso approccio consigliato per siti Web di Azure: mantenere le impostazioni di sviluppo nei file di configurazione e utilizzare i valori di variabile di ambiente per le impostazioni di produzione.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-177">As an alternative, you can use the same approach recommended for Azure Websites: keep development settings in configuration files, and use environment variable values for production settings.</span></span> <span data-ttu-id="6e5ed-178">In questo caso, tuttavia, è necessario scrivere codice dell'applicazione per la funzionalità è automatica in siti Web di Azure: recuperare le impostazioni dalle variabili di ambiente e utilizzare tali valori al posto delle impostazioni del file di configurazione oppure le impostazioni di file di configurazione quando variabili di ambiente non vengono trovate.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-178">In this case, however, you have to write application code for functionality that is automatic in Azure Websites: retrieve settings from environment variables and use those values in place of configuration file settings, or use configuration file settings when environment variables are not found.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="6e5ed-179">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="6e5ed-179">Additional Resources</span></span>

<span data-ttu-id="6e5ed-180">Per un esempio di un PowerShell script che crea un'app web e database, imposta la stringa di connessione + le impostazioni dell'app, download [New AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) dal [libreria Script Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="6e5ed-180">For an example of a PowerShell script that creates a web app + database, sets the connection string + app settings, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span> 

<span data-ttu-id="6e5ed-181">Vedere di Stefan Schackow [siti Web di Azure di Windows: come le stringhe dell'applicazione e connessione funzionamento delle stringhe](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span><span class="sxs-lookup"><span data-stu-id="6e5ed-181">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span></span>


<span data-ttu-id="6e5ed-182">Ringraziamenti Barry Dorrans speciali ( [ @blowdart ](https://twitter.com/blowdart) ) e Carlos Farre per la revisione.</span><span class="sxs-lookup"><span data-stu-id="6e5ed-182">Special thanks to Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) and Carlos Farre for reviewing.</span></span>
