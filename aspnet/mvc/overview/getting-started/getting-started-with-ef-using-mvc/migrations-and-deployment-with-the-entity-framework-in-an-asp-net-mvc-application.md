---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
title: Il codice prima di tutto le migrazioni e distribuzione con Entity Framework in un'applicazione MVC ASP.NET | Documenti Microsoft
author: tdykstra
description: L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni ASP.NET MVC 5 con Code First di Entity Framework 6 e Visual Studio...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: d4dfc435-bda6-4621-9762-9ba270f8de4e
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 2294f2aba3f765d7849d1f407e85f424dc8b2518
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/10/2017
---
<a name="code-first-migrations-and-deployment-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="4dce6-103">Il codice prima di tutto le migrazioni e distribuzione con Entity Framework in un'applicazione MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4dce6-103">Code First Migrations and Deployment with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="4dce6-104">Da [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="4dce6-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="4dce6-105">[Scaricare il progetto completato](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) o [Scarica il PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="4dce6-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="4dce6-106">L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni ASP.NET MVC 5 con Visual Studio 2013 e Code First di Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="4dce6-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="4dce6-107">Per informazioni sulle serie di esercitazioni, vedere [la prima esercitazione di serie](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="4dce6-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="4dce6-108">Fino a questo punto l'applicazione è stato in esecuzione in locale in IIS Express nel computer di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-108">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="4dce6-109">Per rendere disponibile ad altri utenti di utilizzare in Internet un'applicazione reale, è necessario distribuirla in un provider di hosting web.</span><span class="sxs-lookup"><span data-stu-id="4dce6-109">To make a real application available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="4dce6-110">In questa esercitazione verrà distribuita l'applicazione Contoso University al cloud in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-110">In this tutorial, you'll deploy the Contoso University application to the cloud in Azure.</span></span>

<span data-ttu-id="4dce6-111">L'esercitazione include le sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="4dce6-111">The tutorial contains the following sections:</span></span>

- <span data-ttu-id="4dce6-112">Abilitare le migrazioni Code First.</span><span class="sxs-lookup"><span data-stu-id="4dce6-112">Enable Code First Migrations.</span></span> <span data-ttu-id="4dce6-113">La funzionalità di migrazione consente di modificare il modello di dati e distribuire le modifiche nell'ambiente di produzione, aggiornare lo schema del database senza dover eliminare e ricreare il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-113">The Migrations feature enables you to change the data model and deploy your changes to production by updating the database schema without having to drop and re-create the database.</span></span>
- <span data-ttu-id="4dce6-114">Distribuire in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-114">Deploy to Azure.</span></span> <span data-ttu-id="4dce6-115">Questo passaggio è facoltativo. è possibile continuare con le esercitazioni rimanenti senza avere distribuito il progetto.</span><span class="sxs-lookup"><span data-stu-id="4dce6-115">This step is optional; you can continue with the remaining tutorials without having deployed the project.</span></span>

<span data-ttu-id="4dce6-116">È consigliabile utilizzare un processo di integrazione continua con controllo del codice sorgente per la distribuzione, ma in questa esercitazione non copre gli argomenti.</span><span class="sxs-lookup"><span data-stu-id="4dce6-116">We recommend that you use a continuous integration process with source control for deployment, but this tutorial does not cover those topics.</span></span> <span data-ttu-id="4dce6-117">Per ulteriori informazioni, vedere il [controllo del codice sorgente](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) e [integrazione continua](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) capitoli del [creazione di App per Cloud del mondo reale con Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) e-book.</span><span class="sxs-lookup"><span data-stu-id="4dce6-117">For more information, see the [source control](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) and [continuous integration](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) chapters of the [Building Real-World Cloud Apps with Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction) e-book.</span></span>

## <a name="enable-code-first-migrations"></a><span data-ttu-id="4dce6-118">Abilitare le migrazioni Code First</span><span class="sxs-lookup"><span data-stu-id="4dce6-118">Enable Code First Migrations</span></span>

<span data-ttu-id="4dce6-119">Quando si sviluppa una nuova applicazione, il modello di dati cambia di frequente e ogni volta che le modifiche del modello, viene sincronizzato con il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-119">When you develop a new application, your data model changes frequently, and each time the model changes, it gets out of sync with the database.</span></span> <span data-ttu-id="4dce6-120">È stato configurato per automaticamente, eliminare e ricreare il database ogni volta che si modifica il modello di dati Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4dce6-120">You have configured the Entity Framework to automatically drop and re-create the database each time you change the data model.</span></span> <span data-ttu-id="4dce6-121">Quando aggiungere, rimuovere, o modificare le classi di entità o modificare la `DbContext` classe, alla successiva esecuzione dell'applicazione viene automaticamente Elimina il database esistente, si crea una nuova istanza che corrisponde al modello e si esegue il seeding con dati di test.</span><span class="sxs-lookup"><span data-stu-id="4dce6-121">When you add, remove, or change entity classes or change your `DbContext` class, the next time you run the application it automatically deletes your existing database, creates a new one that matches the model, and seeds it with test data.</span></span>

<span data-ttu-id="4dce6-122">Questo metodo di sincronizzazione del database con il modello di dati funziona bene fino a quando non si distribuisce l'applicazione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-122">This method of keeping the database in sync with the data model works well until you deploy the application to production.</span></span> <span data-ttu-id="4dce6-123">Quando l'applicazione è in esecuzione nell'ambiente di produzione, in genere l'archiviazione dei dati che si desidera mantenere, e non si desidera perdere tutti gli elementi ogni volta che si apporta una modifica ad esempio l'aggiunta di una nuova colonna.</span><span class="sxs-lookup"><span data-stu-id="4dce6-123">When the application is running in production, it is usually storing data that you want to keep, and you don't want to lose everything each time you make a change such as adding a new column.</span></span> <span data-ttu-id="4dce6-124">Il [migrazioni Code First](https://msdn.microsoft.com/data/jj591621) funzionalità risolve questo problema, l'abilitazione di Code First aggiornare lo schema del database anziché eliminare e ricreare il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-124">The [Code First Migrations](https://msdn.microsoft.com/data/jj591621) feature solves this problem by enabling Code First to update the database schema instead of dropping and re-creating the database.</span></span> <span data-ttu-id="4dce6-125">In questa esercitazione, l'applicazione verrà distribuita e preparazione per che verranno abilitate le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="4dce6-125">In this tutorial, you'll deploy the application, and to prepare for that you'll enable Migrations.</span></span>

1. <span data-ttu-id="4dce6-126">Disabilitare l'inizializzatore che è impostato in precedenza come commento o eliminando il `contexts` elemento che è stato aggiunto al file Web. config dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-126">Disable the initializer that you set up earlier by commenting out or deleting the `contexts` element that you added to the application Web.config file.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.xml?highlight=2,6)]
2. <span data-ttu-id="4dce6-127">Anche nell'applicazione *Web. config* file, modificare il nome del database nella stringa di connessione in ContosoUniversity2.</span><span class="sxs-lookup"><span data-stu-id="4dce6-127">Also in the application *Web.config* file, change the name of the database in the connection string to ContosoUniversity2.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.xml?highlight=2)]

    <span data-ttu-id="4dce6-128">Questa modifica si configura il progetto in modo che la migrazione prima creerà un nuovo database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-128">This change sets up the project so that the first migration will create a new database.</span></span> <span data-ttu-id="4dce6-129">Questo non è necessario ma verrà visualizzato in un secondo momento perché è una buona idea.</span><span class="sxs-lookup"><span data-stu-id="4dce6-129">This isn't required but you'll see later why it's a good idea.</span></span>
3. <span data-ttu-id="4dce6-130">Dal **strumenti** menu, fare clic su **Gestione pacchetti libreria** e quindi **Package Manager Console**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-130">From the **Tools** menu, click **Library Package Manager** and then **Package Manager Console**.</span></span>

    ![Selecting_Package_Manager_Console](https://asp.net/media/4336350/1pm.png)
4. <span data-ttu-id="4dce6-132">Nel `PM>` prompt dei comandi digitare i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="4dce6-132">At the `PM>` prompt enter the following commands:</span></span>

    `enable-migrations`  
    `add-migration InitialCreate`

    ![comando Enable-migrations](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

    <span data-ttu-id="4dce6-134">Il `enable-migrations` comando crea un *migrazioni* cartella nel progetto ContosoUniversity e inserisce in questa cartella un *Configuration.cs* file che è possibile modificare per configurare le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="4dce6-134">The `enable-migrations` command creates a *Migrations* folder in the ContosoUniversity project, and it puts in that folder a *Configuration.cs* file that you can edit to configure Migrations.</span></span>

    <span data-ttu-id="4dce6-135">(Se si perde il passaggio precedente che indirizza l'utente di modificare il nome del database, le migrazioni verranno trovare il database esistente e di eseguire automaticamente il `add-migration` comando.</span><span class="sxs-lookup"><span data-stu-id="4dce6-135">(If you missed the step above that directs you to change the database name, Migrations will find the existing database and automatically do the `add-migration` command.</span></span> <span data-ttu-id="4dce6-136">OK, significa semplicemente che si non esegue un test del codice migrazioni prima di distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-136">That's OK, it just means you won't run a test of the migrations code before you deploy the database.</span></span> <span data-ttu-id="4dce6-137">In seguito quando si esegue il `update-database` comando non accade nulla perché il database esiste già.)</span><span class="sxs-lookup"><span data-stu-id="4dce6-137">Later when you run the `update-database` command nothing will happen because the database will already exist.)</span></span>

    ![Cartella Migrations](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

    <span data-ttu-id="4dce6-139">Analogamente alla classe inizializzatore che illustrato in precedenza, il `Configuration` classe include un `Seed` metodo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-139">Like the initializer class that you saw earlier, the `Configuration` class includes a `Seed` method.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

    <span data-ttu-id="4dce6-140">Lo scopo del [valore di inizializzazione](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metodo consiste nella possibilità di inserire o aggiornare i dati di test dopo il primo codice crea o aggiorna il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-140">The purpose of the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is to enable you to insert or update test data after Code First creates or updates the database.</span></span> <span data-ttu-id="4dce6-141">Il metodo viene chiamato quando viene creato il database e ogni volta che viene aggiornato lo schema del database dopo la modifica di un modello di dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-141">The method is called when the database is created and every time the database schema is updated after a data model change.</span></span>

### <a name="set-up-the-seed-method"></a><span data-ttu-id="4dce6-142">Impostare il metodo di inizializzazione</span><span class="sxs-lookup"><span data-stu-id="4dce6-142">Set up the Seed Method</span></span>

<span data-ttu-id="4dce6-143">Se si elimina e ricreare il database per ogni modifica del modello di dati, si utilizza la classe di inizializzatore `Seed` per inserire i dati di test, poiché dopo ogni modifica del modello viene eliminato il database e tutti i dati di test viene perso.</span><span class="sxs-lookup"><span data-stu-id="4dce6-143">When you are dropping and re-creating the database for every data model change, you use the initializer class's `Seed` method to insert test data, because after every model change the database is dropped and all the test data is lost.</span></span> <span data-ttu-id="4dce6-144">Con le migrazioni Code First, test, i dati vengono mantenuti dopo le modifiche del database, pertanto l'inclusione di dati di test nel [valore di inizializzazione](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metodo non è in genere necessario.</span><span class="sxs-lookup"><span data-stu-id="4dce6-144">With Code First Migrations, test data is retained after database changes, so including test data in the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is typically not necessary.</span></span> <span data-ttu-id="4dce6-145">Infatti, non si desidera il `Seed` per inserire i dati di test se sarà possibile usare le migrazioni per distribuire il database nell'ambiente di produzione, perché il `Seed` metodo viene eseguito nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-145">In fact, you don't want the `Seed` method to insert test data if you'll be using Migrations to deploy the database to production, because the `Seed` method will run in production.</span></span> <span data-ttu-id="4dce6-146">In tal caso è necessario il `Seed` per inserire nel database solo i dati che è necessario nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-146">In that case you want the `Seed` method to insert into the database only the data that you need in production.</span></span> <span data-ttu-id="4dce6-147">Ad esempio, è il database per includere i nomi di reparto effettivo nel `Department` tabella quando l'applicazione diventa disponibile nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-147">For example, you might want the database to include actual department names in the `Department` table when the application becomes available in production.</span></span>

<span data-ttu-id="4dce6-148">Per questa esercitazione, sarà possibile usare le migrazioni per la distribuzione, ma il `Seed` metodo inserirà comunque i dati di test per renderlo più semplice vedere come utilizzare la funzionalità dell'applicazione senza dover inserire manualmente una grande quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-148">For this tutorial, you'll be using Migrations for deployment, but your `Seed` method will insert test data anyway in order to make it easier to see how application functionality works without having to manually insert a lot of data.</span></span>

1. <span data-ttu-id="4dce6-149">Sostituire il contenuto del *Configuration.cs* file con il codice seguente, che verrà caricati i dati di test nel nuovo database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-149">Replace the contents of the *Configuration.cs* file with the following code, which will load test data into the new database.</span></span> 

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

    <span data-ttu-id="4dce6-150">Il [valore di inizializzazione](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) metodo accetta l'oggetto di contesto di database come parametro di input e il codice nel metodo utilizza tale oggetto per aggiungere nuove entità nel database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-150">The [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method takes the database context object as an input parameter, and the code in the method uses that object to add new entities to the database.</span></span> <span data-ttu-id="4dce6-151">Per ogni tipo di entità, il codice crea una raccolta di nuove entità, li aggiunge alla appropriata [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) proprietà e quindi Salva le modifiche al database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-151">For each entity type, the code creates a collection of new entities, adds them to the appropriate [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) property, and then saves the changes to the database.</span></span> <span data-ttu-id="4dce6-152">Non è necessario chiamare il [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) metodo dopo ogni gruppo di entità, come avviene, ma questa operazione consente di individuare l'origine di un problema se si verifica un'eccezione mentre il codice è la scrittura nel database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-152">It isn't necessary to call the [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) method after each group of entities, as is done here, but doing that helps you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

    <span data-ttu-id="4dce6-153">Alcune istruzioni che inseriscono dati utilizzare il [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) metodo per eseguire un'operazione "upsert".</span><span class="sxs-lookup"><span data-stu-id="4dce6-153">Some of the statements that insert data use the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method to perform an "upsert" operation.</span></span> <span data-ttu-id="4dce6-154">Poiché il `Seed` metodo viene eseguito ogni volta che si esegue il `update-database` comando, in genere dopo la migrazione di ogni tipo, è possibile inserire solo dati, in quanto le righe che si sta tentando di aggiungere già sarà disponibile dopo la migrazione prima che crea il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-154">Because the `Seed` method runs every time you execute the `update-database` command, typically after each migration, you can't just insert data, because the rows you are trying to add will already be there after the first migration that creates the database.</span></span> <span data-ttu-id="4dce6-155">L'operazione "upsert" impedisce gli errori che accadrebbe se si tenta di inserire una riga già esistente, ma ***esegue l'override*** qualsiasi modifica ai dati apportate durante il test dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-155">The "upsert" operation prevents errors that would happen if you try to insert a row that already exists, but it ***overrides*** any changes to data that you may have made while testing the application.</span></span> <span data-ttu-id="4dce6-156">I dati di test in alcune tabelle è possibile evitare di raggiungere tale obiettivo: in alcuni casi quando si modificano i dati durante il test le proprie modifiche rimangano dopo gli aggiornamenti del database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-156">With test data in some tables you might not want that to happen: in some cases when you change data while testing you want your changes to remain after database updates.</span></span> <span data-ttu-id="4dce6-157">In questo caso si desidera eseguire un'operazione di inserimento condizionale: inserire una riga solo se non esiste già.</span><span class="sxs-lookup"><span data-stu-id="4dce6-157">In that case you want to do a conditional insert operation: insert a row only if it doesn't already exist.</span></span> <span data-ttu-id="4dce6-158">Il metodo di inizializzazione utilizza entrambi gli approcci.</span><span class="sxs-lookup"><span data-stu-id="4dce6-158">The Seed method uses both approaches.</span></span>

    <span data-ttu-id="4dce6-159">Il primo parametro passato per il [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) metodo consente di specificare la proprietà da utilizzare per verificare se esiste già una riga.</span><span class="sxs-lookup"><span data-stu-id="4dce6-159">The first parameter passed to the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method specifies the property to use to check if a row already exists.</span></span> <span data-ttu-id="4dce6-160">Per i dati di test dello studente che si desidera fornire, il `LastName` proprietà può essere utilizzata per questo scopo poiché ogni cognome nell'elenco è univoco:</span><span class="sxs-lookup"><span data-stu-id="4dce6-160">For the test student data that you are providing, the `LastName` property can be used for this purpose since each last name in the list is unique:</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

    <span data-ttu-id="4dce6-161">Questo codice presuppone che i cognomi siano univoci.</span><span class="sxs-lookup"><span data-stu-id="4dce6-161">This code assumes that last names are unique.</span></span> <span data-ttu-id="4dce6-162">Se si aggiunge manualmente uno studente con un nome duplicato ultimo, si otterrà la seguente eccezione alla successiva che si eseguire la migrazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-162">If you manually add a student with a duplicate last name, you'll get the following exception the next time you perform a migration.</span></span>

    <span data-ttu-id="4dce6-163">La sequenza contiene più di un elemento</span><span class="sxs-lookup"><span data-stu-id="4dce6-163">Sequence contains more than one element</span></span>

    <span data-ttu-id="4dce6-164">Per informazioni sulle modalità di gestione di dati ridondanti, ad esempio due studenti denominati "Alexander Carson", vedere [Seeding e database di debug di Entity Framework (EF)](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) sul blog di Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="4dce6-164">For information about how to handle redundant data such as two students named "Alexander Carson", see [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="4dce6-165">Per ulteriori informazioni sul `AddOrUpdate` metodo, vedere [prestare attenzione con metodo AddOrUpdate di EF 4.3](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) sul blog di Julie Lerman.</span><span class="sxs-lookup"><span data-stu-id="4dce6-165">For more information about the `AddOrUpdate` method, see [Take care with EF 4.3 AddOrUpdate Method](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) on Julie Lerman's blog.</span></span>

    <span data-ttu-id="4dce6-166">Il codice che crea `Enrollment` entità si suppone che il `ID` valore nelle entità nel `students` raccolta, anche se non è stata impostata nel codice che crea la raccolta.</span><span class="sxs-lookup"><span data-stu-id="4dce6-166">The code that creates `Enrollment` entities assumes you have the `ID` value in the entities in the `students` collection, although you didn't set that property in the code that creates the collection.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs?highlight=2)]

    <span data-ttu-id="4dce6-167">È possibile utilizzare il `ID` proprietà perché il `ID` valore viene impostato quando si chiama `SaveChanges` per il `students` insieme.</span><span class="sxs-lookup"><span data-stu-id="4dce6-167">You can use the `ID` property here because the `ID` value is set when you call `SaveChanges` for the `students` collection.</span></span> <span data-ttu-id="4dce6-168">EF ottiene automaticamente il valore di chiave primario quando inserisce un'entità nel database e aggiorna il `ID` proprietà dell'entità in memoria.</span><span class="sxs-lookup"><span data-stu-id="4dce6-168">EF automatically gets the primary key value when it inserts an entity into the database, and it updates the `ID` property of the entity in memory.</span></span>

    <span data-ttu-id="4dce6-169">Il codice che aggiunge ogni `Enrollment` entità per il `Enrollments` set di entità non usa il `AddOrUpdate` (metodo).</span><span class="sxs-lookup"><span data-stu-id="4dce6-169">The code that adds each `Enrollment` entity to the `Enrollments` entity set doesn't use the `AddOrUpdate` method.</span></span> <span data-ttu-id="4dce6-170">Controlla se esiste già un'entità e inserisce l'entità se non esiste.</span><span class="sxs-lookup"><span data-stu-id="4dce6-170">It checks if an entity already exists and inserts the entity if it doesn't exist.</span></span> <span data-ttu-id="4dce6-171">Questo approccio consente di mantenere le modifiche apportate a un livello di registrazione tramite l'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-171">This approach will preserve changes you make to an enrollment grade by using the application UI.</span></span> <span data-ttu-id="4dce6-172">Il codice scorre ogni membro del `Enrollment` [elenco](https://msdn.microsoft.com/library/6sh2ey19.aspx) e se la registrazione non viene trovata nel database, viene aggiunta la registrazione al database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-172">The code loops through each member of the `Enrollment`[List](https://msdn.microsoft.com/library/6sh2ey19.aspx) and if the enrollment is not found in the database, it adds the enrollment to the database.</span></span> <span data-ttu-id="4dce6-173">La prima volta che si aggiorna il database, il database sarà vuoto, in modo che aggiungerà ogni registrazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-173">The first time you update the database, the database will be empty, so it will add each enrollment.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]
2. <span data-ttu-id="4dce6-174">Compilare il progetto.</span><span class="sxs-lookup"><span data-stu-id="4dce6-174">Build the project.</span></span>

### <a name="execute-the-first-migration"></a><span data-ttu-id="4dce6-175">Eseguire la migrazione prima</span><span class="sxs-lookup"><span data-stu-id="4dce6-175">Execute the First Migration</span></span>

<span data-ttu-id="4dce6-176">Quando è stata eseguita la `add-migration` comando migrazioni ha generato il codice che comporterebbero la creazione del database da zero.</span><span class="sxs-lookup"><span data-stu-id="4dce6-176">When you executed the `add-migration` command, Migrations generated the code that would create the database from scratch.</span></span> <span data-ttu-id="4dce6-177">Questo codice è disponibile anche nella *migrazioni* cartella, nel file denominato  *&lt;timestamp&gt;\_InitialCreate.cs*.</span><span class="sxs-lookup"><span data-stu-id="4dce6-177">This code is also in the *Migrations* folder, in the file named *&lt;timestamp&gt;\_InitialCreate.cs*.</span></span> <span data-ttu-id="4dce6-178">Il `Up` metodo il `InitialCreate` classe crea le tabelle di database che corrispondono ai set di entità del modello di dati, e `Down` metodo li elimina.</span><span class="sxs-lookup"><span data-stu-id="4dce6-178">The `Up` method of the `InitialCreate` class creates the database tables that correspond to the data model entity sets, and the `Down` method deletes them.</span></span>

[!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="4dce6-179">Chiamate di migrazioni di `Up` metodo per implementare le modifiche del modello di dati per la migrazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-179">Migrations calls the `Up` method to implement the data model changes for a migration.</span></span> <span data-ttu-id="4dce6-180">Quando si immette un comando per annullare l'aggiornamento, le chiamate di migrazioni di `Down` metodo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-180">When you enter a command to roll back the update, Migrations calls the `Down` method.</span></span>

<span data-ttu-id="4dce6-181">Questa è la migrazione iniziale creato al momento dell'immissione di `add-migration InitialCreate` comando.</span><span class="sxs-lookup"><span data-stu-id="4dce6-181">This is the initial migration that was created when you entered the `add-migration InitialCreate` command.</span></span> <span data-ttu-id="4dce6-182">Il parametro (`InitialCreate` nell'esempio) viene utilizzato per il file di nome e può essere qualsiasi, si sceglie in genere una parola o frase che riepiloga le quali viene eseguita la migrazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-182">The parameter (`InitialCreate` in the example) is used for the file name and can be whatever you want; you typically choose a word or phrase that summarizes what is being done in the migration.</span></span> <span data-ttu-id="4dce6-183">Ad esempio, è possibile denominare una migrazione successiva &quot;AddDepartmentTable&quot;.</span><span class="sxs-lookup"><span data-stu-id="4dce6-183">For example, you might name a later migration &quot;AddDepartmentTable&quot;.</span></span>

<span data-ttu-id="4dce6-184">Se la migrazione iniziale è stato creato quando il database esiste già, viene generato il codice di creazione del database, ma non è necessario eseguire perché il database è già corrisponde il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-184">If you created the initial migration when the database already exists, the database creation code is generated but it doesn't have to run because the database already matches the data model.</span></span> <span data-ttu-id="4dce6-185">Quando si distribuisce l'app in un altro ambiente in cui il database non esiste ancora, questo codice verrà eseguito per creare il database, è consigliabile prima di tutto testare.</span><span class="sxs-lookup"><span data-stu-id="4dce6-185">When you deploy the app to another environment where the database doesn't exist yet, this code will run to create your database, so it's a good idea to test it first.</span></span> <span data-ttu-id="4dce6-186">Ecco perché è stato modificato il nome del database nella stringa di connessione in precedenza, in modo che le migrazioni possano crearne uno nuovo da zero.</span><span class="sxs-lookup"><span data-stu-id="4dce6-186">That's why you changed the name of the database in the connection string earlier -- so that migrations can create a new one from scratch.</span></span>

1. <span data-ttu-id="4dce6-187">Nel **Package Manager Console** finestra, immettere il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="4dce6-187">In the **Package Manager Console** window, enter the following command:</span></span>

    `update-database`

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

    <span data-ttu-id="4dce6-188">Il `update-database` comando viene eseguito il `Up` metodo per creare il database e quindi si esegue il `Seed` metodo per popolare il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-188">The `update-database` command runs the `Up` method to create the database and then it runs the `Seed` method to populate the database.</span></span> <span data-ttu-id="4dce6-189">Lo stesso processo verrà eseguito automaticamente nell'ambiente di produzione dopo aver distribuito l'applicazione, come illustrato nella sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="4dce6-189">The same process will run automatically in production after you deploy the application, as you'll see in the following section.</span></span>
- <span data-ttu-id="4dce6-190">Utilizzare **Esplora Server** per controllare il database, come indicato nella prima esercitazione ed eseguire l'applicazione per verificare che tutto funzioni ancora lo stesso come in precedenza.</span><span class="sxs-lookup"><span data-stu-id="4dce6-190">Use **Server Explorer** to inspect the database as you did in the first tutorial, and run the application to verify that everything still works the same as before.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="4dce6-191">Distribuire in Azure</span><span class="sxs-lookup"><span data-stu-id="4dce6-191">Deploy to Azure</span></span>

<span data-ttu-id="4dce6-192">Fino a questo punto l'applicazione è stato in esecuzione in locale in IIS Express nel computer di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-192">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="4dce6-193">Per renderlo disponibile ad altri utenti per l'utilizzo su Internet, è necessario distribuirla in un provider di hosting web.</span><span class="sxs-lookup"><span data-stu-id="4dce6-193">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="4dce6-194">In questa sezione dell'esercitazione verrà distribuirla in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-194">In this section of the tutorial you'll deploy it to Azure.</span></span> <span data-ttu-id="4dce6-195">In questa sezione è facoltativa. è possibile ignorare questo passaggio e continuare con l'esercitazione seguente oppure è possibile adattare le istruzioni in questa sezione per un provider di hosting diverso di propria scelta.</span><span class="sxs-lookup"><span data-stu-id="4dce6-195">This section is optional; you can skip this and continue with the following tutorial, or you can adapt the instructions in this section for a different hosting provider of your choice.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="4dce6-196">Utilizzare migrazioni Code First per distribuire il Database</span><span class="sxs-lookup"><span data-stu-id="4dce6-196">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="4dce6-197">Per distribuire il database utilizzare migrazioni Code First.</span><span class="sxs-lookup"><span data-stu-id="4dce6-197">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="4dce6-198">Quando si crea il profilo di pubblicazione che consente di configurare le impostazioni per la distribuzione da Visual Studio, si selezionano una casella di controllo **aggiornamento Database**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-198">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box labeled **Update Database**.</span></span> <span data-ttu-id="4dce6-199">Questa impostazione, il processo di distribuzione configurare automaticamente l'applicazione *Web. config* file nel server di destinazione in modo che usa Code First di `MigrateDatabaseToLatestVersion` classe inizializzatore.</span><span class="sxs-lookup"><span data-stu-id="4dce6-199">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="4dce6-200">Visual Studio non esegue alcuna operazione con il database durante il processo di distribuzione mentre viene copiato il progetto nel server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-200">Visual Studio doesn't do anything with the database during the deployment process while it is copying your project to the destination server.</span></span> <span data-ttu-id="4dce6-201">Quando si esegue l'applicazione distribuita e accede al database per la prima volta dopo la distribuzione, il primo codice controlla se il database corrisponde al modello di dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-201">When you run the deployed application and it accesses the database for the first time after deployment, Code First checks if the database matches the data model.</span></span> <span data-ttu-id="4dce6-202">Se è presente una mancata corrispondenza, Code First crea automaticamente il database (se non esiste ancora) o aggiorna lo schema del database alla versione più recente (se esiste un database, ma non corrisponde al modello).</span><span class="sxs-lookup"><span data-stu-id="4dce6-202">If there's a mismatch, Code First automatically creates the database (if it doesn't exist yet) or updates the database schema to the latest version (if a database exists but doesn't match the model).</span></span> <span data-ttu-id="4dce6-203">Se l'applicazione implementa un migrazioni `Seed` metodo, l'esecuzione del metodo dopo la creazione del database o lo schema viene aggiornato.</span><span class="sxs-lookup"><span data-stu-id="4dce6-203">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="4dce6-204">Le migrazioni `Seed` metodo inserisce i dati di test.</span><span class="sxs-lookup"><span data-stu-id="4dce6-204">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="4dce6-205">Se sono stati distribuito in un ambiente di produzione, è necessario modificare il `Seed` metodo in modo che venga inserito solo dati che si desidera essere inseriti nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-205">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="4dce6-206">Ad esempio, nel modello di dati corrente è potrebbe desidera disporre corsi reali ma studenti fittizi nel database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-206">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="4dce6-207">È possibile scrivere un `Seed` metodo per caricare entrambe in fase di sviluppo e quindi impostare come commento studenti fittizi prima di distribuire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-207">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="4dce6-208">In alternativa è possibile scrivere un `Seed` metodo per caricare solo i corsi e immettere gli studenti fittizi manualmente nel database di prova tramite interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-208">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-an-azure-account"></a><span data-ttu-id="4dce6-209">Ottenere un account di Azure</span><span class="sxs-lookup"><span data-stu-id="4dce6-209">Get an Azure account</span></span>

<span data-ttu-id="4dce6-210">È necessario un account di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-210">You'll need an Azure account.</span></span> <span data-ttu-id="4dce6-211">Se si dispone già di uno, ma si dispone di una sottoscrizione di Visual Studio, è possibile [attivare i vantaggi dell'abbonamento](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span><span class="sxs-lookup"><span data-stu-id="4dce6-211">If you don't already have one, but you do have a Visual Studio subscription, you can [activate your subscription benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).</span></span> <span data-ttu-id="4dce6-212">In caso contrario, è possibile creare un account di valutazione gratuito in pochi minuti.</span><span class="sxs-lookup"><span data-stu-id="4dce6-212">Otherwise, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="4dce6-213">Per informazioni dettagliate, vedere [versione di valutazione gratuita di Azure](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="4dce6-213">For details, see [Azure Free Trial](https://azure.microsoft.com/free/).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-azure"></a><span data-ttu-id="4dce6-214">Creare un sito web e un database SQL in Azure</span><span class="sxs-lookup"><span data-stu-id="4dce6-214">Create a web site and a SQL database in Azure</span></span>

<span data-ttu-id="4dce6-215">L'app web in Azure viene eseguita in un ambiente di hosting condiviso, ovvero che viene eseguito su macchine virtuali (VM) che vengono condivisi con altri client di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-215">Your web app in Azure will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Azure clients.</span></span> <span data-ttu-id="4dce6-216">Un ambiente di hosting condiviso è una soluzione a basso costo per iniziare nel cloud.</span><span class="sxs-lookup"><span data-stu-id="4dce6-216">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="4dce6-217">In un secondo momento, se il traffico web aumenta, l'applicazione scalabile per soddisfare le esigenze di mediante l'esecuzione su macchine virtuali dedicate.</span><span class="sxs-lookup"><span data-stu-id="4dce6-217">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="4dce6-218">Per ulteriori informazioni sulle opzioni di prezzi per il servizio App di Azure, leggere la documentazione su [documenti di Azure](https://azure.microsoft.com/pricing/details/app-service/)</span><span class="sxs-lookup"><span data-stu-id="4dce6-218">To learn more about Pricing Options for Azure App Service, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/app-service/)</span></span>

<span data-ttu-id="4dce6-219">Distribuire il database per Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-219">You'll deploy the database to Azure SQL Database.</span></span> <span data-ttu-id="4dce6-220">Database SQL è un servizio di database relazionale basato su cloud sviluppato su tecnologie di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4dce6-220">SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="4dce6-221">Strumenti e applicazioni che funzionano con SQL Server funzionano anche con il Database SQL.</span><span class="sxs-lookup"><span data-stu-id="4dce6-221">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="4dce6-222">Nel [portale di gestione di Azure](https://portal.azure.com), fare clic su **nuovo** nella scheda di sinistra, fare clic su **tutti** nuovo pannello e quindi fare clic su **App Web di & SQL** nel **Web** sezione e infine **crea**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-222">In the [Azure Management Portal](https://portal.azure.com), click **New** in the left tab, click **See all** in new blade, and then click **Web App & SQL** in the **Web** Section and finally **Create**.</span></span>

    ![Pulsante nuovo nel portale di gestione](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/CreateWeb-Sql.png)

 <span data-ttu-id="4dce6-224">Il **nuova App Web e SQL - creare** apre la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="4dce6-224">The **New Web App & SQL - Create** wizard opens.</span></span>

2. <span data-ttu-id="4dce6-225">Nel pannello, immettere una stringa di **nome App** casella da usare come URL univoco per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-225">In the blade, enter a string in the **App name** box to use as the unique URL for your application.</span></span> <span data-ttu-id="4dce6-226">L'URL completo sarà costituito da quelle immesse qui oltre il dominio predefinito di servizi di App di Azure (. azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="4dce6-226">The complete URL will consist of what you enter here plus the default domain of Azure App Services (.azurewebsites.net).</span></span> <span data-ttu-id="4dce6-227">Se il **nome App** è già in uso, la procedura guidata notificherà all'utente di questo con rossa *il nome dell'applicazione non è disponibile* messaggio.</span><span class="sxs-lookup"><span data-stu-id="4dce6-227">If the **App name** is already taken, the Wizard will notify you of this with a red *The app name is not available* message.</span></span> <span data-ttu-id="4dce6-228">Se il **nome App** è disponibile, verrà visualizzato un segno di spunta verde.</span><span class="sxs-lookup"><span data-stu-id="4dce6-228">If the **App name** is available, you will get a green checkmark.</span></span>

    ![Creare con il collegamento di Database nel portale di gestione](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-WebApp.png)

3. <span data-ttu-id="4dce6-230">Nel **sottoscrizione** elenco a discesa, scegliere la sottoscrizione di Azure in cui si desidera il **servizio App** risiedano.</span><span class="sxs-lookup"><span data-stu-id="4dce6-230">In the **Subscription** Dropdown, please choose the Azure Subscription in which you want the **App Service** to reside.</span></span>

4. <span data-ttu-id="4dce6-231">Nel **gruppo di risorse** casella di testo, scegliere un gruppo di risorse o crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-231">In the **Resource Group** text box, choose a Resource Group or create a new one.</span></span> <span data-ttu-id="4dce6-232">Questa impostazione specifica quale data center in cui verrà eseguito il sito web.</span><span class="sxs-lookup"><span data-stu-id="4dce6-232">This setting specifies which data center your web site will run in.</span></span> <span data-ttu-id="4dce6-233">Per ulteriori informazioni sui gruppi di risorse, leggere la documentazione su [documenti Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="4dce6-233">For more information about Resource Groups, read the documentation on [Azure Docs](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups).</span></span>
5. <span data-ttu-id="4dce6-234">Creare un nuovo **piano di servizio App** facendo il *sezione servizio App*, **Crea nuovo**e compilare **piano di servizio App** (può essere stesso nome Servizio App), **percorso**, e **tariffario** (è disponibile un'opzione disponibile).</span><span class="sxs-lookup"><span data-stu-id="4dce6-234">Create a new **App Service Plan** by clicking the *App Service section*, **Create New**, and fill in **App Service plan** (can be same name as App Service), **Location**, and **Pricing tier** (there is a free option).</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-AppService.png)
6. <span data-ttu-id="4dce6-235">Fare clic su di **Database SQL**e scegliere *Crea nuovo* o seleziona un database esistente</span><span class="sxs-lookup"><span data-stu-id="4dce6-235">Click the **SQL Database**, and choose *Create New* or select an existing database</span></span>

    ![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Create-Database.png)

7. <span data-ttu-id="4dce6-236">Nel **nome** , immettere un nome per il database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-236">In the **Name** box, enter a name for your database.</span></span>
8. <span data-ttu-id="4dce6-237">Fare clic su di **Server di destinazione** , quindi selezionare **creare un nuovo server**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-237">Click the **Target Server** box, select **Create a new server**.</span></span> <span data-ttu-id="4dce6-238">In alternativa, se un server è stato creato in precedenza, è possibile selezionare il server dall'elenco dei server disponibili.</span><span class="sxs-lookup"><span data-stu-id="4dce6-238">Alternatively, if you previously created a server, you can select that server from list of available servers.</span></span>
9. <span data-ttu-id="4dce6-239">Scegliere **tariffario** , scegliere *libero*.</span><span class="sxs-lookup"><span data-stu-id="4dce6-239">Choose **Pricing tier** section, choose *Free*.</span></span> <span data-ttu-id="4dce6-240">Se sono necessarie risorse aggiuntive, il database supporta la scalabilità verticale in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="4dce6-240">If additional resources are needed, the database can be scaled up at any time.</span></span> <span data-ttu-id="4dce6-241">Per ulteriori informazioni sui prezzi di SQL Azure, leggere la documentazione su [documenti Azure](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="4dce6-241">To learn more on Azure SQL Pricing, read the documentation on [Azure Docs](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
10. <span data-ttu-id="4dce6-242">Modificare [delle regole di confronto](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="4dce6-242">Modify [collation](https://docs.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support) as needed.</span></span>
11. <span data-ttu-id="4dce6-243">Immettere un amministratore **nome utente amministratore SQL** e **Password amministratore SQL**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-243">Enter an administrator **SQL Admin Username** and **SQL Admin Password**.</span></span> <span data-ttu-id="4dce6-244">Se si seleziona **server nuovo Database SQL**, non immettere un nome esistente e la password in questo caso, si sta immettendo un nuovo nome e una password che si sta definendo ora da utilizzare in un secondo momento quando si accede al database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-244">If you selected **New SQL Database server**, you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="4dce6-245">Se si seleziona un server in cui è stato creato in precedenza, si immetteranno le credenziali per il server.</span><span class="sxs-lookup"><span data-stu-id="4dce6-245">If you selected a server that you created previously, you'll enter credentials for that server.</span></span>
12. <span data-ttu-id="4dce6-246">Raccolta di dati di telemetria può essere abilitata per il servizio App con Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4dce6-246">Telemetry collection can be enabled for App Service using Application Insights.</span></span> <span data-ttu-id="4dce6-247">Application Insights con una configurazione minima raccoglie eventi importanti, eccezioni, dipendenze, richiesta e informazioni di traccia.</span><span class="sxs-lookup"><span data-stu-id="4dce6-247">Application Insights with little configuration collects valuable event, exception, dependency, request, and trace information.</span></span> <span data-ttu-id="4dce6-248">Per ulteriori informazioni su Application Insights, iniziare a utilizzare [documenti Azure](https://azure.microsoft.com/services/application-insights/).</span><span class="sxs-lookup"><span data-stu-id="4dce6-248">To learn more about Application Insights, get started in [Azure Docs](https://azure.microsoft.com/services/application-insights/).</span></span>
12. <span data-ttu-id="4dce6-249">Fare clic su **crea** nella parte inferiore del pannello per indicare che si è finito.</span><span class="sxs-lookup"><span data-stu-id="4dce6-249">Click **Create** at the bottom of the blade to indicate that you're finished.</span></span>
  
 <span data-ttu-id="4dce6-250">Il portale di gestione torna alla pagina dashboard e **notifiche** pannello nella parte superiore della pagina mostra che il sito viene creato.</span><span class="sxs-lookup"><span data-stu-id="4dce6-250">The Management Portal returns to the Dashboards page, and the **Notifications** blade at the top of the page shows that the site is being created.</span></span> <span data-ttu-id="4dce6-251">Dopo un periodo di tempo (in genere inferiore a un minuto), sarà presente una notifica che la distribuzione ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-251">After a while (typically less than a minute), there will be a notification that the Deployment succeeded.</span></span> <span data-ttu-id="4dce6-252">Nella barra di spostamento a sinistra, il nuovo **servizio App** viene visualizzato nel *servizi App* sezione e il nuovo **Database SQL** viene visualizzato nel *database SQL*  sezione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-252">In the navigation bar at the left, the new **App Service** appears in the *App Services* section and the new **SQL Database** appears in the *SQL Databases* section.</span></span>

### <a name="deploy-the-application-to-azure"></a><span data-ttu-id="4dce6-253">Distribuire l'applicazione in Azure</span><span class="sxs-lookup"><span data-stu-id="4dce6-253">Deploy the application to Azure</span></span>

1. <span data-ttu-id="4dce6-254">In Visual Studio, fare clic sul progetto in **Esplora** e selezionare **pubblica** dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="4dce6-254">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>
  
    ![Pubblicare nel menu di scelta rapida progetto](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)
2. <span data-ttu-id="4dce6-256">Nel **profilo** scheda della finestra di **pubblica sul Web** procedura guidata, fare clic su **servizio App di Microsoft Azure**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-256">In the **Profile** tab of the **Publish Web** wizard, click **Microsoft Azure App Service**.</span></span>
  
    ![Importazione delle impostazioni di pubblicazione.](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-ChooseTarget.png)
3. <span data-ttu-id="4dce6-258">Se non è stato aggiunto in precedenza la sottoscrizione di Azure in Visual Studio, eseguire i passaggi sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="4dce6-258">If you have not previously added your Azure subscription in Visual Studio, perform the steps on the screen.</span></span> <span data-ttu-id="4dce6-259">Questi passaggi consentono di Visual Studio per connettersi alla sottoscrizione di Azure in modo che l'elenco di **servizi App** includerà il sito web.</span><span class="sxs-lookup"><span data-stu-id="4dce6-259">These steps enable Visual Studio to connect to your Azure subscription so that the list of **App Services** will include your web site.</span></span>
 
4. <span data-ttu-id="4dce6-260">Selezionare il **sottoscrizione** aggiunto il servizio App, quindi il **piano di servizio App** cartella del servizio App è una parte, e infine il **servizio App** stesso seguita da **Ok**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-260">Select the **Subscription** you added the App Service to, then the **App Service Plan** folder your App Service is a part of, and finally the **App Service** itself followed by **Ok**.</span></span>

    ![Selezionare servizio App](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-AppService.png)
5. <span data-ttu-id="4dce6-262">Dopo aver configurato il profilo, il **connessione** scheda verrà visualizzata.</span><span class="sxs-lookup"><span data-stu-id="4dce6-262">After the Profile has been configured, the **Connection** tab will be shown.</span></span> <span data-ttu-id="4dce6-263">Fare clic su **convalida connessione** per assicurarsi che le impostazioni siano corrette</span><span class="sxs-lookup"><span data-stu-id="4dce6-263">Click **Validate Connection** to make sure that the settings are correct</span></span>

    ![Convalidare la connessione](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Connection.png)
7. <span data-ttu-id="4dce6-265">Quando la connessione è stata convalidata, un segno di spunta verde viene visualizzato accanto al **convalida connessione** pulsante.</span><span class="sxs-lookup"><span data-stu-id="4dce6-265">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="4dce6-266">Scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-266">Click **Next**.</span></span>
  
    ![Connessione convalidata correttamente](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-SettingsValidated.png)
8. <span data-ttu-id="4dce6-268">Aprire il **stringa di connessione remota** elenco a discesa in **SchoolContext** e selezionare la stringa di connessione per il database è stato creato.</span><span class="sxs-lookup"><span data-stu-id="4dce6-268">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
9. <span data-ttu-id="4dce6-269">Selezionare **Aggiorna database**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-269">Select **Update database**.</span></span>

    ![Scheda Impostazioni](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Settings.png)

    <span data-ttu-id="4dce6-271">Questa impostazione, il processo di distribuzione configurare automaticamente l'applicazione *Web. config* file nel server di destinazione in modo che usa Code First di `MigrateDatabaseToLatestVersion` classe inizializzatore.</span><span class="sxs-lookup"><span data-stu-id="4dce6-271">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>
10. <span data-ttu-id="4dce6-272">Scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-272">Click **Next**.</span></span>
11. <span data-ttu-id="4dce6-273">Nel **anteprima** scheda, fare clic su **avviare Anteprima**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-273">In the **Preview** tab, click **Start Preview**.</span></span>
  
    ![Pulsante StartPreview nella scheda Anteprima](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Preview.png)
  
 <span data-ttu-id="4dce6-275">La scheda Visualizza un elenco di file che verranno copiati nel server.</span><span class="sxs-lookup"><span data-stu-id="4dce6-275">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="4dce6-276">La visualizzazione dell'anteprima non è necessario pubblicare l'applicazione, ma è una funzione utile conoscere.</span><span class="sxs-lookup"><span data-stu-id="4dce6-276">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="4dce6-277">In questo caso, non occorre eseguire alcuna operazione con l'elenco di file che viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="4dce6-277">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="4dce6-278">Alla successiva che si distribuisce questa applicazione, sarà solo i file che sono stati modificati in questo elenco.</span><span class="sxs-lookup"><span data-stu-id="4dce6-278">The next time you deploy this application, only the files that have changed will be in this list.</span></span>
    <span data-ttu-id="4dce6-279">![Output del file StartPreview](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span><span class="sxs-lookup"><span data-stu-id="4dce6-279">![StartPreview file output](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-PreviewLoaded.png)</span></span>

12. <span data-ttu-id="4dce6-280">Fare clic su **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-280">Click **Publish**.</span></span>
 <span data-ttu-id="4dce6-281">Visual Studio avvia il processo di copia dei file per il server Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce6-281">Visual Studio begins the process of copying the files to the Azure server.</span></span>
13. <span data-ttu-id="4dce6-282">Il **Output** finestra Mostra intraprese le azioni di distribuzione e segnala il completamento corretto della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-282">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>
  
    ![Finestra di output corretta distribuzione di reporting](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-BuildOutput.png)
14. <span data-ttu-id="4dce6-284">Durante la distribuzione ha esito positivo, il browser predefinito verrà aperta automaticamente per l'URL del sito web distribuito.</span><span class="sxs-lookup"><span data-stu-id="4dce6-284">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>
 <span data-ttu-id="4dce6-285">L'applicazione creata è in esecuzione nel cloud.</span><span class="sxs-lookup"><span data-stu-id="4dce6-285">The application you created is now running in the cloud.</span></span> 
  
    ![Students_index_page_with_paging](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Publish-Site.png)

<span data-ttu-id="4dce6-287">A questo punto il *SchoolContext* database è stato creato nel Database di SQL Azure perché è stato selezionato **eseguire migrazioni Code First (esecuzione all'avvio dell'app)**.</span><span class="sxs-lookup"><span data-stu-id="4dce6-287">At this point your *SchoolContext* database has been created in the Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="4dce6-288">Il *Web. config* file nel sito web distribuito è stato modificato in modo che il [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) inizializzatore viene eseguita la prima volta il codice legge o scrive dati nel database (che si sono verificati Se è selezionata la **studenti** scheda):</span><span class="sxs-lookup"><span data-stu-id="4dce6-288">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer runs the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](https://asp.net/media/4367421/mig.png)

<span data-ttu-id="4dce6-289">Il processo di distribuzione creata anche una nuova stringa di connessione *(SchoolContext\_DatabasePublish*) per le migrazioni Code First da utilizzare per l'aggiornamento dello schema del database e il seeding del database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-289">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Stringa di connessione Database_Publish](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)

<span data-ttu-id="4dce6-291">È possibile trovare la versione distribuita del file Web. config nel computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. È possibile accedere distribuito *Web. config* file tramite FTP.</span><span class="sxs-lookup"><span data-stu-id="4dce6-291">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="4dce6-292">Per istruzioni, vedere [distribuzione Web ASP.NET utilizzando Visual Studio: distribuzione di un aggiornamento del codice](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span><span class="sxs-lookup"><span data-stu-id="4dce6-292">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span></span> <span data-ttu-id="4dce6-293">Seguire le istruzioni che iniziano con "per utilizzare uno strumento FTP, sono necessari tre operazioni: l'URL di FTP, il nome utente e la password."</span><span class="sxs-lookup"><span data-stu-id="4dce6-293">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="4dce6-294">L'app web non implementa la sicurezza, in modo che tutti gli utenti che consente di trovare l'URL può modificare i dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-294">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="4dce6-295">Per istruzioni su come proteggere il sito web, vedere [distribuire un'app protetta ASP.NET MVC con appartenenza, OAuth e il Database SQL in Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="4dce6-295">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to Azure](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="4dce6-296">È possibile impedire che altri utenti tramite il sito tramite il portale di gestione di Azure o **Esplora Server** in Visual Studio per arrestare il sito.</span><span class="sxs-lookup"><span data-stu-id="4dce6-296">You can prevent other people from using the site by using the Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>


![](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/Stop-Service.png)

## <a name="advanced-migrations-scenarios"></a><span data-ttu-id="4dce6-297">Scenari di migrazione avanzate</span><span class="sxs-lookup"><span data-stu-id="4dce6-297">Advanced Migrations Scenarios</span></span>

<span data-ttu-id="4dce6-298">Se si distribuisce un database eseguendo migrazioni automaticamente, come illustrato in questa esercitazione e si distribuisce in un sito web in esecuzione su più server, è possibile ottenere più server tenta di eseguire le migrazioni nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="4dce6-298">If you deploy a database by running migrations automatically as shown in this tutorial, and you are deploying to a web site that runs on multiple servers, you could get multiple servers trying to run migrations at the same time.</span></span> <span data-ttu-id="4dce6-299">Le migrazioni sono atomiche, in modo che se due server tenta di eseguire la migrazione stesso, uno avrà esito positivo e l'altra avrà esito negativo (presupponendo che le operazioni non possono essere eseguite due volte).</span><span class="sxs-lookup"><span data-stu-id="4dce6-299">Migrations are atomic, so if two servers try to run the same migration, one will succeed and the other will fail (assuming the operations can't be done twice).</span></span> <span data-ttu-id="4dce6-300">In questo scenario se si desidera evitare tali problemi, è possibile chiamare manualmente le migrazioni e impostare il proprio codice in modo che il problema interessa solo una volta.</span><span class="sxs-lookup"><span data-stu-id="4dce6-300">In that scenario if you want to avoid those issues, you can call migrations manually and set up your own code so that it only happens once.</span></span> <span data-ttu-id="4dce6-301">Per ulteriori informazioni, vedere [in esecuzione e Scripting le migrazioni da codice](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) sul blog di Miller Rowan e [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (per l'esecuzione di migrazioni dalla riga di comando) in MSDN.</span><span class="sxs-lookup"><span data-stu-id="4dce6-301">For more information, see [Running and Scripting Migrations from Code](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) on Rowan Miller's blog and [Migrate.exe](https://msdn.microsoft.com/data/jj618307) (for executing migrations from the command line) on MSDN.</span></span>

<span data-ttu-id="4dce6-302">Per informazioni sugli altri scenari di migrazione, vedere [migrazioni Screencast serie](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span><span class="sxs-lookup"><span data-stu-id="4dce6-302">For information about other migrations scenarios, see [Migrations Screencast Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span></span>

## <a name="code-first-initializers"></a><span data-ttu-id="4dce6-303">Inizializzatori prima di codice</span><span class="sxs-lookup"><span data-stu-id="4dce6-303">Code First Initializers</span></span>

<span data-ttu-id="4dce6-304">Nella sezione distribuzione è stato illustrato il [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) inizializzatore in uso.</span><span class="sxs-lookup"><span data-stu-id="4dce6-304">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="4dce6-305">Codice innanzitutto fornisce anche altri inizializzatori, tra cui [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (impostazione predefinita), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (che è utilizzata in precedenza) e [ DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span><span class="sxs-lookup"><span data-stu-id="4dce6-305">Code First also provides other initializers, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (which you used earlier) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="4dce6-306">Il `DropCreateAlways` inizializzatore può essere utile per impostare le condizioni per gli unit test.</span><span class="sxs-lookup"><span data-stu-id="4dce6-306">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="4dce6-307">È anche possibile scrivere il propria inizializzatori ed è possibile chiamare un inizializzatore in modo esplicito se non si desidera attendere che l'applicazione legge o scrive nel database.</span><span class="sxs-lookup"><span data-stu-id="4dce6-307">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="4dce6-308">Al momento in questa esercitazione viene scritto nel novembre 2013, è possibile utilizzare solo gli inizializzatori di creare e DropCreate prima di abilitare le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="4dce6-308">At the time this tutorial is being written in November, 2013, you can only use the Create and DropCreate initializers before you enable migrations.</span></span> <span data-ttu-id="4dce6-309">Il team di Entity Framework sta lavorando su come rendere utilizzabile con le migrazioni anche questi inizializzatori.</span><span class="sxs-lookup"><span data-stu-id="4dce6-309">The Entity Framework team is working on making these initializers usable with migrations as well.</span></span>

<span data-ttu-id="4dce6-310">Per ulteriori informazioni sugli inizializzatori, vedere [informazioni sui Database gli inizializzatori di Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) capitolo 6 del libro e [Entity Framework di programmazione: Code First](http://shop.oreilly.com/product/0636920022220.do) da Julie Lerman e Miller Rowan.</span><span class="sxs-lookup"><span data-stu-id="4dce6-310">For more information about initializers, see [Understanding Database Initializers in Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) and chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="4dce6-311">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="4dce6-311">Summary</span></span>

<span data-ttu-id="4dce6-312">In questa esercitazione è stato spiegato come abilitare le migrazioni e distribuire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dce6-312">In this tutorial you've seen how to enable migrations and deploy the application.</span></span> <span data-ttu-id="4dce6-313">Nella prossima esercitazione verrà iniziare esaminando argomenti più avanzati espandendo il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="4dce6-313">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="4dce6-314">Lasciare commenti e suggerimenti su come è stato apprezzato questa esercitazione ed è stato possibile apportare miglioramenti.</span><span class="sxs-lookup"><span data-stu-id="4dce6-314">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="4dce6-315">È inoltre possibile richiedere nuovi argomenti in [Mostra Me come con codice](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span><span class="sxs-lookup"><span data-stu-id="4dce6-315">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="4dce6-316">Sono disponibili collegamenti ad altre risorse di Entity Framework in [accesso ai dati ASP.NET - risorse](xref:whitepapers/aspnet-data-access-content-map).</span><span class="sxs-lookup"><span data-stu-id="4dce6-316">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](xref:whitepapers/aspnet-data-access-content-map).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="4dce6-317">[Precedente](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
[Successivo](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="4dce6-317">[Previous](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application)
[Next](xref:mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)</span></span>
