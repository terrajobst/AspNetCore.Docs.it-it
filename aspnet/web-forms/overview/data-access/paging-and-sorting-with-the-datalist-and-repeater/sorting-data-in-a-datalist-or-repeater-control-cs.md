---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Ordinamento dei dati in un controllo DataList o Repeater (c#) | Documenti Microsoft
author: rick-anderson
description: "In questa esercitazione si esamineranno come includere il supporto in DataList e Repeater ordinamento, nonché come costruire un controllo DataList o Repeater possono i cui dati..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: f7ab0df2ebfa24b0928117e683325b158e3aad1c
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/10/2017
---
<a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="6703d-103">Ordinamento dei dati in un controllo DataList o Repeater (c#)</span><span class="sxs-lookup"><span data-stu-id="6703d-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>
====================
<span data-ttu-id="6703d-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6703d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6703d-105">[Scaricare App di esempio](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) o [Scarica il PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="6703d-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="6703d-106">In questa esercitazione si esamineranno come includere il supporto in DataList e Repeater ordinamento, nonché come costruire un DataList o Repeater i cui dati possono essere di paging e ordinati.</span><span class="sxs-lookup"><span data-stu-id="6703d-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>


## <a name="introduction"></a><span data-ttu-id="6703d-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="6703d-107">Introduction</span></span>

<span data-ttu-id="6703d-108">Nel [esercitazione precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md) abbiamo esaminato come aggiungere il supporto del paging a un controllo DataList.</span><span class="sxs-lookup"><span data-stu-id="6703d-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="6703d-109">È stato creato un nuovo metodo nella `ProductsBLL` classe (`GetProductsAsPagedDataSource`) che ha restituito un `PagedDataSource` oggetto.</span><span class="sxs-lookup"><span data-stu-id="6703d-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="6703d-110">Quando è associato a un controllo DataList o Repeater, DataList o Repeater Visualizza la pagina di dati richiesta.</span><span class="sxs-lookup"><span data-stu-id="6703d-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="6703d-111">Questa tecnica è simile a quella utilizzata internamente dai controlli GridView, DetailsView e FormView per fornire la funzionalità di paging predefinite.</span><span class="sxs-lookup"><span data-stu-id="6703d-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="6703d-112">Oltre a offrire il supporto del paging, GridView include anche il supporto per l'ordinamento viene fornita.</span><span class="sxs-lookup"><span data-stu-id="6703d-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="6703d-113">DataList né Ripetitore fornisce funzionalità di ordinamento predefinita; Tuttavia, funzionalità di ordinamento possono essere aggiunti con un bit di codice.</span><span class="sxs-lookup"><span data-stu-id="6703d-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="6703d-114">In questa esercitazione si esamineranno come includere il supporto in DataList e Repeater ordinamento, nonché come costruire un DataList o Repeater i cui dati possono essere di paging e ordinati.</span><span class="sxs-lookup"><span data-stu-id="6703d-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="6703d-115">Una revisione dell'ordinamento</span><span class="sxs-lookup"><span data-stu-id="6703d-115">A Review of Sorting</span></span>

<span data-ttu-id="6703d-116">Come illustrato nel [Paging e ordinamento dei dati del Report](../paging-and-sorting/paging-and-sorting-report-data-cs.md) esercitazione, il controllo GridView fornisce il supporto per l'ordinamento viene fornita.</span><span class="sxs-lookup"><span data-stu-id="6703d-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="6703d-117">Ogni campo di GridView può avere un oggetto associato `SortExpression`, che indica il campo dei dati da cui si desidera ordinare i dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="6703d-118">Quando i dispositivi di GridView `AllowSorting` è impostata su `true`, ogni campo di GridView con un `SortExpression` valore di proprietà contiene l'intestazione sottoposto a rendering come LinkButton.</span><span class="sxs-lookup"><span data-stu-id="6703d-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="6703d-119">Quando un utente fa clic su una determinata intestazione s campo di GridView, si verifica un postback e i dati vengono ordinati in base al campo selezionato s `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="6703d-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="6703d-120">Il controllo GridView ha un `SortExpression` anche la proprietà, che archivia il `SortExpression` del campo GridView vengono ordinati i dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="6703d-121">Inoltre, un `SortDirection` proprietà indica se i dati devono essere elencati in ordine crescente o decrescente (se un utente fa clic su un collegamento di intestazione di campo s GridView particolare due volte in successione, l'ordinamento è attivato o disattivato).</span><span class="sxs-lookup"><span data-stu-id="6703d-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="6703d-122">Quando il controllo GridView viene associato al relativo controllo origine dati, restituita la `SortExpression` e `SortDirection` proprietà ai dati di controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="6703d-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="6703d-123">Recupera i dati di controllo origine dati e quindi la Ordina in base alle fornito `SortExpression` e `SortDirection` proprietà.</span><span class="sxs-lookup"><span data-stu-id="6703d-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="6703d-124">Dopo l'ordinamento dei dati, il controllo origine dati restituisce a GridView.</span><span class="sxs-lookup"><span data-stu-id="6703d-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="6703d-125">Per replicare questa funzionalità con i controlli DataList o Repeater, è necessario:</span><span class="sxs-lookup"><span data-stu-id="6703d-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="6703d-126">Creare un'interfaccia di ordinamento</span><span class="sxs-lookup"><span data-stu-id="6703d-126">Create a sorting interface</span></span>
- <span data-ttu-id="6703d-127">Tenere presente il campo dei dati per ordinare in base e se eseguire l'ordinamento in ordine crescente o decrescente</span><span class="sxs-lookup"><span data-stu-id="6703d-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="6703d-128">Indicare ObjectDataSource per ordinare i dati da un determinato campo di dati</span><span class="sxs-lookup"><span data-stu-id="6703d-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="6703d-129">Che verranno affrontati queste tre attività nei passaggi 3 e 4.</span><span class="sxs-lookup"><span data-stu-id="6703d-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="6703d-130">Successivamente, esamineremo come includere sia ordinamento e paging supporto in un controllo DataList o Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="6703d-131">Passaggio 2: Visualizzare i prodotti in un ripetitore</span><span class="sxs-lookup"><span data-stu-id="6703d-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="6703d-132">Prima di preoccupazione che implementa la funzionalità correlate a ordinamento, consentire s avviare elencando i prodotti in un controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="6703d-133">Aprire il `Sorting.aspx` nella pagina di `PagingSortingDataListRepeater` cartella.</span><span class="sxs-lookup"><span data-stu-id="6703d-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="6703d-134">Aggiungere un controllo Repeater alla pagina web, l'impostazione relativa `ID` proprietà `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="6703d-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="6703d-135">Lo smart tag Ripetitore s, creare un nuovo oggetto ObjectDataSource denominato `ProductsDataSource` e configurarlo per recuperare i dati di `ProductsBLL` classe s `GetProducts()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6703d-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="6703d-136">Selezionare il che opzione (nessuno) dagli elenchi a discesa nelle schede delle INSERT, UPDATE e DELETE.</span><span class="sxs-lookup"><span data-stu-id="6703d-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="6703d-137">[![Creare un ObjectDataSource e configurarlo per utilizzare il metodo GetProductsAsPagedDataSource()](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="6703d-138">**Figura 1**: creare un ObjectDataSource e configurarlo per utilizzare il `GetProductsAsPagedDataSource()` metodo ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>


<span data-ttu-id="6703d-139">[![Impostare l'elenco a discesa sono elencati nell'aggiornamento, inserimento ed eliminare le schede su (nessuno)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="6703d-140">**Figura 2**: impostare l'elenco a discesa sono elencati nell'aggiornamento, inserimento ed eliminare le schede su (nessuno) ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>


<span data-ttu-id="6703d-141">A differenza con DataList, Visual Studio non crea automaticamente un `ItemTemplate` per il controllo Repeater dopo l'associazione a un'origine dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="6703d-142">Inoltre, è necessario aggiungere questo `ItemTemplate` in modo dichiarativo, come lo smart tag di controllo s Ripetitore manca l'opzione di modifica modelli trovato in DataList s.</span><span class="sxs-lookup"><span data-stu-id="6703d-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="6703d-143">S consentono di utilizzare lo stesso `ItemTemplate` dall'esercitazione precedente, che visualizzare il nome del prodotto s, fornitore e categoria.</span><span class="sxs-lookup"><span data-stu-id="6703d-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="6703d-144">Dopo aver aggiunto il `ItemTemplate`, Repeater e ObjectDataSource s dichiarativo dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="6703d-145">Figura 3 Mostra questa pagina quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="6703d-145">Figure 3 shows this page when viewed through a browser.</span></span>


<span data-ttu-id="6703d-146">[![Viene visualizzato ogni s nome, fornitore e la categoria di prodotto](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="6703d-147">**Figura 3**: ogni prodotto s, nome, fornitore e la categoria viene visualizzata ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>


## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="6703d-148">Passaggio 3: Istruzioni ObjectDataSource per ordinare i dati</span><span class="sxs-lookup"><span data-stu-id="6703d-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="6703d-149">Per ordinare i dati visualizzati nel Repeater, è necessario informare ObjectDataSource dell'espressione di ordinamento con cui i dati devono essere ordinati.</span><span class="sxs-lookup"><span data-stu-id="6703d-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="6703d-150">Prima di ObjectDataSource recupera i dati, viene generato prima di tutto il [ `Selecting` evento](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), che consente di specificare un'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="6703d-151">Il `Selecting` gestore eventi viene passato un oggetto di tipo [ `ObjectDataSourceSelectingEventArgs` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), che include una proprietà denominata [ `Arguments` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) di tipo [ `DataSourceSelectArguments` ](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="6703d-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="6703d-152">Il `DataSourceSelectArguments` è progettato per passare le richieste correlate ai dati da un consumer di dati per il controllo origine dati, classe e include un [ `SortExpression` proprietà](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="6703d-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/en-us/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="6703d-153">Per passare informazioni sull'ordinamento dalla pagina ASP.NET per ObjectDataSource, creare un gestore eventi per il `Selecting` eventi e utilizzare il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="6703d-154">Il *sortExpression* valore deve essere assegnato il nome del campo di dati per ordinare i dati (ad esempio ProductName).</span><span class="sxs-lookup"><span data-stu-id="6703d-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="6703d-155">Nessuna proprietà relative alla direzione di ordinamento, pertanto se si desidera ordinare i dati in ordine decrescente, aggiungere la stringa DESC per il *sortExpression* valore (ad esempio ProductName DESC).</span><span class="sxs-lookup"><span data-stu-id="6703d-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="6703d-156">Vado avanti e provare alcuni valori diversi a livello di codice per *sortExpression* e testare i risultati in un browser.</span><span class="sxs-lookup"><span data-stu-id="6703d-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="6703d-157">Come mostrato nella figura 4, quando si usa DESC ProductName come il *sortExpression*, i prodotti vengono ordinati in base al nome in ordine alfabetico inverso.</span><span class="sxs-lookup"><span data-stu-id="6703d-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>


<span data-ttu-id="6703d-158">[![I prodotti vengono ordinati in base al nome in ordine alfabetico inverso](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="6703d-159">**Figura 4**: il prodotti vengono ordinati in base al nome in ordine alfabetico inverso ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>


## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="6703d-160">Passaggio 4: Creazione dell'interfaccia di ordinamento e ricordare l'espressione di ordinamento e la direzione</span><span class="sxs-lookup"><span data-stu-id="6703d-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="6703d-161">Accensione di ordinamento di supporto in GridView converte ogni testo dell'intestazione campo ordinabile s in LinkButton che, quando si fa clic, Ordina i dati di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="6703d-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="6703d-162">Questo tipo è un'interfaccia di ordinamento è significativa per GridView, in cui i dati ben disposti in colonne.</span><span class="sxs-lookup"><span data-stu-id="6703d-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="6703d-163">Per i controlli DataList e Repeater, tuttavia, è necessaria un'interfaccia di ordinamento diversa.</span><span class="sxs-lookup"><span data-stu-id="6703d-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="6703d-164">Un'interfaccia comune di ordinamento per un elenco di dati (a differenza di una griglia di dati), è un elenco di riepilogo a discesa che fornisce i campi da cui i dati possono essere ordinati.</span><span class="sxs-lookup"><span data-stu-id="6703d-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="6703d-165">Consente di implementare tale interfaccia per questa esercitazione s.</span><span class="sxs-lookup"><span data-stu-id="6703d-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="6703d-166">Aggiungere un controllo DropDownList Web sopra il `SortableProducts` Repeater e set relativo `ID` proprietà `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="6703d-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="6703d-167">Dalla finestra delle proprietà, fare clic sui puntini di sospensione nel `Items` proprietà per visualizzare Editor raccolta di ListItem.</span><span class="sxs-lookup"><span data-stu-id="6703d-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="6703d-168">Aggiungere `ListItem` s per ordinare i dati per il `ProductName`, `CategoryName`, e `SupplierName` campi.</span><span class="sxs-lookup"><span data-stu-id="6703d-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="6703d-169">Aggiungere anche un `ListItem` per ordinare i prodotti in base al nome in ordine alfabetico inverso.</span><span class="sxs-lookup"><span data-stu-id="6703d-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="6703d-170">Il `ListItem` `Text` proprietà possono essere impostate su qualsiasi valore (ad esempio nome), ma la `Value` devono essere impostate per il nome del campo dati (ad esempio ProductName).</span><span class="sxs-lookup"><span data-stu-id="6703d-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="6703d-171">Per ordinare i risultati in ordine decrescente, aggiungere la stringa DESC al nome del campo dati, ad esempio ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="6703d-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>


![Aggiungere un elemento ListItem per ognuno dei campi dati ordinabile](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="6703d-173">**Figura 5**: aggiungere un `ListItem` per ognuno dei campi dati ordinabile</span><span class="sxs-lookup"><span data-stu-id="6703d-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>


<span data-ttu-id="6703d-174">Infine, aggiungere un controllo Web pulsante a destra di DropDownList.</span><span class="sxs-lookup"><span data-stu-id="6703d-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="6703d-175">Impostare il relativo `ID` a `RefreshRepeater` e il relativo `Text` proprietà per l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="6703d-176">Dopo aver creato il `ListItem` s e aggiungere il pulsante di aggiornamento, la sintassi dichiarativa s DropDownList e pulsante dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="6703d-177">Con ordinamento DropDownList completato, è quindi necessario aggiornare s ObjectDataSource `Selecting` in modo che utilizzi il gestore dell'evento `SortBy``ListItem` s `Value` proprietà anziché un'espressione di ordinamento a livello di codice.</span><span class="sxs-lookup"><span data-stu-id="6703d-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="6703d-178">A questo punto, durante la prima visita la pagina prodotti saranno inizialmente ordinati in base il `ProductName` campo dei dati, come s il `SortBy` `ListItem` selezionata per impostazione predefinita (vedere Figura 6).</span><span class="sxs-lookup"><span data-stu-id="6703d-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="6703d-179">Selezionare una diversa opzione come categoria di ordinamento e fare clic su Aggiorna causerà un postback e riordinare i dati dal nome di categoria, come illustrato nella figura 7.</span><span class="sxs-lookup"><span data-stu-id="6703d-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>


<span data-ttu-id="6703d-180">[![I prodotti sono inizialmente ordinati in base al nome](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="6703d-181">**Figura 6**: il prodotti sono inizialmente ordinati in base al nome ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>


<span data-ttu-id="6703d-182">[![I prodotti sono ora ordinati per categoria](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="6703d-183">**Figura 7**: il prodotti sono ora ordinati per categoria ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>


> [!NOTE]
> <span data-ttu-id="6703d-184">Fare clic sul pulsante di aggiornamento, i dati di automaticamente nuovamente ordinato perché lo stato di visualizzazione Ripetitore s è stato disabilitato, causando Ripetitore riassociazione all'origine dati a ogni postback.</span><span class="sxs-lookup"><span data-stu-id="6703d-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="6703d-185">Se è già lasciato Ripetitore s dello stato di visualizzazione abilitato, modificare l'ordinamento di elenco a discesa elenco vinto t ha alcun effetto sull'ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won t have any affect on the sort order.</span></span> <span data-ttu-id="6703d-186">Per risolvere questo problema, creare un gestore eventi per s pulsante Aggiorna `Click` riassociazione Ripetitore all'origine dati e evento (chiamando Ripetitore s `DataBind()` (metodo)).</span><span class="sxs-lookup"><span data-stu-id="6703d-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>


## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="6703d-187">Ricordare l'espressione di ordinamento e la direzione</span><span class="sxs-lookup"><span data-stu-id="6703d-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="6703d-188">Quando si crea un ordinabile DataList o Repeater in una pagina in cui non ordinamento correlati i postback si verifichi, è imperativo s memorizzato l'espressione di ordinamento e la direzione durante i postback.</span><span class="sxs-lookup"><span data-stu-id="6703d-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="6703d-189">Si supponga, ad esempio, che è stato aggiornato Repeater in questa esercitazione per includere un pulsante Elimina con ogni prodotto.</span><span class="sxs-lookup"><span data-stu-id="6703d-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="6703d-190">Quando l'utente fa clic sul pulsante Elimina è d eseguire il codice per eliminare il prodotto selezionato e quindi riassociare i dati al controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="6703d-191">Se i dettagli di ordinamento non vengono mantenuti durante il postback, i dati visualizzati sullo schermo verranno ripristinato l'ordine originale.</span><span class="sxs-lookup"><span data-stu-id="6703d-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="6703d-192">Per questa esercitazione, DropDownList in modo implicito Salva l'ordinamento espressione e la direzione in stato di visualizzazione per noi.</span><span class="sxs-lookup"><span data-stu-id="6703d-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="6703d-193">Se utilizzato con, LinkButton ad esempio, per le varie opzioni di ordinamento fornita un'interfaccia di ordinamento diversa uno d è necessario prestare attenzione per ricordare all'interno dell'ordinamento durante i postback.</span><span class="sxs-lookup"><span data-stu-id="6703d-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="6703d-194">Ad esempio archiviando i parametri di ordinamento nello stato di visualizzazione pagina s, includendo il parametro di ordinamento nella stringa di query o tramite un'altra tecnica di persistenza dello stato.</span><span class="sxs-lookup"><span data-stu-id="6703d-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="6703d-195">Esempi future di questa esercitazione imparare a rendere persistenti i dettagli dell'ordinamento nello stato di visualizzazione pagina s.</span><span class="sxs-lookup"><span data-stu-id="6703d-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="6703d-196">Passaggio 5: Aggiunta di supporto per l'ordinamento a un controllo DataList che utilizza il Paging predefinito</span><span class="sxs-lookup"><span data-stu-id="6703d-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="6703d-197">Nel [esercitazione precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md) abbiamo esaminato come implementare il paging predefinito con un controllo DataList.</span><span class="sxs-lookup"><span data-stu-id="6703d-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="6703d-198">Consente di estendere l'esempio precedente per includere la possibilità di ordinare i dati di paging s.</span><span class="sxs-lookup"><span data-stu-id="6703d-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="6703d-199">Aprire il `SortingWithDefaultPaging.aspx` e `Paging.aspx` di pagine nel `PagingSortingDataListRepeater` cartella.</span><span class="sxs-lookup"><span data-stu-id="6703d-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="6703d-200">Dal `Paging.aspx` pagina, fare clic sul pulsante di origine per visualizzare il markup dichiarativo pagina s.</span><span class="sxs-lookup"><span data-stu-id="6703d-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="6703d-201">Copiare il testo selezionato (vedere la figura 8) e incollarlo nel markup dichiarativo di `SortingWithDefaultPaging.aspx` tra il `<asp:Content>` tag.</span><span class="sxs-lookup"><span data-stu-id="6703d-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>


<span data-ttu-id="6703d-202">[![Replicare il Markup dichiarativo di &lt;asp: Content&gt; tag da paging. aspx a SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="6703d-203">**Figura 8**: replicare il Markup dichiarativo di `<asp:Content>` tag da `Paging.aspx` a `SortingWithDefaultPaging.aspx` ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>


<span data-ttu-id="6703d-204">Dopo aver copiato il markup dichiarativo, copiare i metodi e le proprietà di `Paging.aspx` pagina classe code-behind s per la classe code-behind per `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="6703d-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="6703d-205">Successivamente, è opportuno visualizzare il `SortingWithDefaultPaging.aspx` pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="6703d-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="6703d-206">Deve presentare la stessa funzionalità e aspetto `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="6703d-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="6703d-207">Miglioramento della ProductsBLL per includere un valore predefinito di metodo di ordinamento e Paging</span><span class="sxs-lookup"><span data-stu-id="6703d-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="6703d-208">Nell'esercitazione precedente è stato creato un `GetProductsAsPagedDataSource(pageIndex, pageSize)` metodo il `ProductsBLL` classe che ha restituito un `PagedDataSource` oggetto.</span><span class="sxs-lookup"><span data-stu-id="6703d-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="6703d-209">Questo `PagedDataSource` oggetto è stato popolato con *tutti* dei prodotti (tramite s BLL `GetProducts()` metodo), ma quando è associato a DataList solo i record corrispondente al valore *pageIndex* e *pageSize* sono stati visualizzati i parametri di input.</span><span class="sxs-lookup"><span data-stu-id="6703d-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="6703d-210">In precedenza in questa esercitazione è stato aggiunto il supporto dell'ordinamento specificando l'espressione di ordinamento da ObjectDataSource s `Selecting` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="6703d-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="6703d-211">Questo processo funziona bene quando ObjectDataSource viene restituito un oggetto che è possibile ordinare, ad esempio il `ProductsDataTable` restituito dal `GetProducts()` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="6703d-212">Tuttavia, il `PagedDataSource` oggetto restituito dal `GetProductsAsPagedDataSource` (metodo) non supporta l'ordinamento dell'origine dati interna.</span><span class="sxs-lookup"><span data-stu-id="6703d-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="6703d-213">In alternativa, è necessario ordinare i risultati restituiti dal `GetProducts()` (metodo) *prima* è stato inserito il `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="6703d-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="6703d-214">A tale scopo, creare un nuovo metodo nella `ProductsBLL` (classe), `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="6703d-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="6703d-215">Per ordinare il `ProductsDataTable` restituito dal `GetProducts()` (metodo), specificare il `Sort` proprietà del valore predefinito `DataTableView`:</span><span class="sxs-lookup"><span data-stu-id="6703d-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="6703d-216">Il `GetProductsSortedAsPagedDataSource` metodo differisce solo leggermente dal `GetProductsAsPagedDataSource` metodo creato nell'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="6703d-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="6703d-217">In particolare, `GetProductsSortedAsPagedDataSource` accetta un parametro di input aggiuntivo `sortExpression` e assegna questo valore per il `Sort` proprietà del `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="6703d-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="6703d-218">Alcune righe di codice in un secondo momento, il `PagedDataSource` oggetto DataSource s viene assegnato il `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="6703d-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="6703d-219">La chiamata al metodo GetProductsSortedAsPagedDataSource e specificando il valore per il parametro di Input SortExpression</span><span class="sxs-lookup"><span data-stu-id="6703d-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="6703d-220">Con il `GetProductsSortedAsPagedDataSource` metodo completo, il passaggio successivo consiste nel fornire il valore per questo parametro.</span><span class="sxs-lookup"><span data-stu-id="6703d-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="6703d-221">ObjectDataSource in `SortingWithDefaultPaging.aspx` è attualmente configurato per chiamare il `GetProductsAsPagedDataSource` metodo e passa due parametri di input tramite i relativi due `QueryStringParameters`, che vengono specificate nel `SelectParameters` insieme.</span><span class="sxs-lookup"><span data-stu-id="6703d-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="6703d-222">I due `QueryStringParameters` indicano che l'origine per il `GetProductsAsPagedDataSource` metodo s *pageIndex* e *pageSize* parametri provengono dai campi querystring `pageIndex` e `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="6703d-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="6703d-223">Aggiornare i dispositivi ObjectDataSource `SelectMethod` proprietà in modo che richiama il nuovo `GetProductsSortedAsPagedDataSource` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="6703d-224">Quindi, aggiungere un nuovo `QueryStringParameter` in modo che il *sortExpression* parametro di input è accessibile dal campo querystring `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="6703d-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="6703d-225">Impostare il `QueryStringParameter` s `DefaultValue` a ProductName.</span><span class="sxs-lookup"><span data-stu-id="6703d-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="6703d-226">Dopo aver apportato queste modifiche, il markup dichiarativo s ObjectDataSource dovrebbe essere simile:</span><span class="sxs-lookup"><span data-stu-id="6703d-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="6703d-227">A questo punto, il `SortingWithDefaultPaging.aspx` pagina permette di ordinare i risultati in ordine alfabetico in base il nome del prodotto (vedere Figura 9).</span><span class="sxs-lookup"><span data-stu-id="6703d-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="6703d-228">Questo avviene perché, per impostazione predefinita, viene passato un valore di ProductName come il `GetProductsSortedAsPagedDataSource` metodo s *sortExpression* parametro.</span><span class="sxs-lookup"><span data-stu-id="6703d-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>


<span data-ttu-id="6703d-229">[![Per impostazione predefinita, i risultati vengono ordinati in base ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="6703d-230">**Figura 9**: per impostazione predefinita, i risultati vengono ordinati in base `ProductName` ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>


<span data-ttu-id="6703d-231">Se si aggiunge manualmente un `sortExpression` campo querystring, ad esempio `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` verranno ordinati i risultati dall'oggetto `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="6703d-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="6703d-232">Tuttavia, questo `sortExpression` parametro non è incluso nella stringa di query quando si spostano in un'altra pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="6703d-233">In effetti, facendo clic nella pagina successiva o ultima pulsanti visualizzata ci `Paging.aspx`!</span><span class="sxs-lookup"><span data-stu-id="6703d-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="6703d-234">Inoltre, s non esiste attualmente alcun ordinamento non interfaccia.</span><span class="sxs-lookup"><span data-stu-id="6703d-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="6703d-235">L'unico modo di che un utente può modificare l'ordinamento dei dati di paging è modificando la stringa di query direttamente.</span><span class="sxs-lookup"><span data-stu-id="6703d-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="6703d-236">La creazione dell'interfaccia di ordinamento</span><span class="sxs-lookup"><span data-stu-id="6703d-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="6703d-237">È necessario innanzitutto aggiornare il `RedirectUser` metodo per inviare all'utente di `SortingWithDefaultPaging.aspx` (anziché `Paging.aspx`) e includere il `sortExpression` valore nella stringa di query.</span><span class="sxs-lookup"><span data-stu-id="6703d-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="6703d-238">Va inoltre aggiunto una sola lettura, a livello di pagina denominata `SortExpression` proprietà.</span><span class="sxs-lookup"><span data-stu-id="6703d-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="6703d-239">Questa proprietà, come il `PageIndex` e `PageSize` proprietà creata nell'esercitazione precedente, restituisce il valore della `sortExpression` campo querystring se esiste e il valore predefinito (ProductName) in caso contrario.</span><span class="sxs-lookup"><span data-stu-id="6703d-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="6703d-240">Attualmente il `RedirectUser` metodo accetta solo un singolo parametro di input l'indice della pagina da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="6703d-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="6703d-241">Tuttavia, potrebbero esserci orari in cui si desidera reindirizzare l'utente a una particolare pagina di dati utilizzando un'espressione di ordinamento diverso da novità specificato nella stringa di query.</span><span class="sxs-lookup"><span data-stu-id="6703d-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="6703d-242">In un momento in cui si creerà l'interfaccia di ordinamento per questa pagina, che include una serie di controlli Web di pulsante per l'ordinamento dei dati da una colonna specificata.</span><span class="sxs-lookup"><span data-stu-id="6703d-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="6703d-243">Quando viene scelto uno di questi pulsanti, di voler reindirizzerà l'utente passa il valore di espressione di ordinamento appropriato.</span><span class="sxs-lookup"><span data-stu-id="6703d-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="6703d-244">Per fornire questa funzionalità, creare due versioni di `RedirectUser` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="6703d-245">Il primo deve accettare solo l'indice della pagina per visualizzare, mentre il secondo accetta l'espressione di ordinamento e di indice di pagina.</span><span class="sxs-lookup"><span data-stu-id="6703d-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="6703d-246">Nel primo esempio in questa esercitazione, è creata un'interfaccia ordinamento utilizzando un DropDownList.</span><span class="sxs-lookup"><span data-stu-id="6703d-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="6703d-247">Per questo esempio, s consentono di utilizzare tre controlli pulsante Web posizionati di sopra di DataList uno per l'ordinamento da `ProductName`, uno per `CategoryName`e uno per `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="6703d-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="6703d-248">Aggiungere i tre controlli Web Button, l'impostazione loro `ID` e `Text` proprietà in modo appropriato:</span><span class="sxs-lookup"><span data-stu-id="6703d-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="6703d-249">Creare quindi un `Click` per ogni gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="6703d-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="6703d-250">I gestori eventi devono chiamare il `RedirectUser` metodo, restituendo l'utente alla prima pagina utilizzando l'espressione di ordinamento appropriato.</span><span class="sxs-lookup"><span data-stu-id="6703d-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="6703d-251">Durante la prima visita la pagina, i dati sono ordinati in ordine alfabetico dal nome del prodotto (vedere la figura 9).</span><span class="sxs-lookup"><span data-stu-id="6703d-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="6703d-252">Fare clic sul pulsante Avanti per passare alla seconda pagina di dati e quindi fare clic sull'ordinamento dal pulsante di categoria.</span><span class="sxs-lookup"><span data-stu-id="6703d-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="6703d-253">In questo ci riporta alla prima pagina di dati, ordinati in base al nome di categoria (vedere la figura 10).</span><span class="sxs-lookup"><span data-stu-id="6703d-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="6703d-254">Analogamente, fare clic sul tipo di ordinamento dal pulsante fornitore Ordina i dati da fornitore a partire dalla prima pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="6703d-255">La scelta di ordinamento viene memorizzata come viene eseguito il paging dei dati tramite.</span><span class="sxs-lookup"><span data-stu-id="6703d-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="6703d-256">Figura 11 mostra la pagina dopo l'ordinamento per categoria e quindi procedendo al tredicesima pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="6703d-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>


<span data-ttu-id="6703d-257">[![I prodotti vengono ordinati per categoria](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="6703d-258">**Figura 10**: il prodotti vengono ordinati per categoria ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>


<span data-ttu-id="6703d-259">[![L'espressione di ordinamento è memorizzate quando il Paging tramite dei dati](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="6703d-260">**Figura 11**: l'espressione di ordinamento è memorizzate quando il Paging tramite dei dati ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>


## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="6703d-261">Passaggio 6: Il Paging personalizzato tra i record in un ripetitore</span><span class="sxs-lookup"><span data-stu-id="6703d-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="6703d-262">Nell'esempio di DataList esaminato nel passaggio 5 pagine nei relativi dati utilizzando la tecnica di paging predefinito inefficiente.</span><span class="sxs-lookup"><span data-stu-id="6703d-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="6703d-263">Quando il paging sufficientemente grandi quantità di dati, è fondamentale utilizzato il paging personalizzato.</span><span class="sxs-lookup"><span data-stu-id="6703d-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="6703d-264">Nel [in modo efficiente il Paging tramite quantità di dati di grandi dimensioni](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) e [ordinamento dei dati di paging personalizzata](../paging-and-sorting/sorting-custom-paged-data-cs.md) esercitazioni, sono state esaminate le differenze tra l'impostazione predefinita e il paging personalizzato e creato i metodi in BLL per utilizzando il paging personalizzato e ordinamento dei dati di paging personalizzati.</span><span class="sxs-lookup"><span data-stu-id="6703d-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="6703d-265">In particolare, in queste due esercitazioni precedenti abbiamo aggiunto i tre metodi seguenti per la `ProductsBLL` classe:</span><span class="sxs-lookup"><span data-stu-id="6703d-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="6703d-266">`GetProductsPaged(startRowIndex, maximumRows)`Restituisce un sottoinsieme specifico di record a partire da *startRowIndex* e non superiore a *maximumRows*.</span><span class="sxs-lookup"><span data-stu-id="6703d-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="6703d-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)`Restituisce un sottoinsieme specifico di record ordinati specificato *sortExpression* parametro di input.</span><span class="sxs-lookup"><span data-stu-id="6703d-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="6703d-268">`TotalNumberOfProducts()`fornisce il numero totale di record di `Products` tabella di database.</span><span class="sxs-lookup"><span data-stu-id="6703d-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="6703d-269">Questi metodi possono essere utilizzati per pagina in modo efficiente e ordinare i dati di utilizzo di un controllo DataList o Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="6703d-270">Per illustrare questo concetto, consentire s inizia creando un controllo Repeater con supporto di paging personalizzato; funzionalità di ordinamento verrà quindi aggiunto.</span><span class="sxs-lookup"><span data-stu-id="6703d-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="6703d-271">Aprire il `SortingWithCustomPaging.aspx` nella pagina di `PagingSortingDataListRepeater` cartella e aggiungere un controllo Repeater alla pagina, l'impostazione relativa `ID` proprietà `Products`.</span><span class="sxs-lookup"><span data-stu-id="6703d-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="6703d-272">Lo smart tag Ripetitore s, creare un nuovo oggetto ObjectDataSource denominato `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="6703d-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="6703d-273">Configurarlo per selezionare i dati di `ProductsBLL` classe s `GetProductsPaged` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>


<span data-ttu-id="6703d-274">[![Configurare ObjectDataSource per utilizzare il metodo di classe ProductsBLL s GetProductsPaged](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="6703d-275">**Figura 12**: configurare ObjectDataSource per utilizzare il `ProductsBLL` classe s `GetProductsPaged` metodo ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>


<span data-ttu-id="6703d-276">Impostare gli elenchi a discesa nell'aggiornamento, inserimento, eliminare le tabulazioni su (nessuno) e quindi fare clic sul pulsante Avanti.</span><span class="sxs-lookup"><span data-stu-id="6703d-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="6703d-277">La configurazione guidata origine dati è ora richiesto per le origini del `GetProductsPaged` metodo s *startRowIndex* e *maximumRows* i parametri di input.</span><span class="sxs-lookup"><span data-stu-id="6703d-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="6703d-278">In realtà, questi parametri di input vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="6703d-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="6703d-279">Al contrario, il *startRowIndex* e *maximumRows* valori verranno trasmesse nel `Arguments` proprietà in s ObjectDataSource `Selecting` gestore dell'evento, analogamente a come è specificato il *sortExpression* in questa demo prima esercitazione s.</span><span class="sxs-lookup"><span data-stu-id="6703d-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="6703d-280">Pertanto, lasciare l'origine del parametro elenchi a discesa nella procedura guidata impostato su Nessuno.</span><span class="sxs-lookup"><span data-stu-id="6703d-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>


<span data-ttu-id="6703d-281">[![Lasciare il Set di origini di parametri su Nessuno](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="6703d-282">**Figura 13**: lasciare le origini di parametro impostato su None ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>


> [!NOTE]
> <span data-ttu-id="6703d-283">Eseguire *non* impostare s ObjectDataSource `EnablePaging` proprietà `true`.</span><span class="sxs-lookup"><span data-stu-id="6703d-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="6703d-284">In questo modo ObjectDataSource includere automaticamente il proprio *startRowIndex* e *maximumRows* parametri per il `SelectMethod` elenco parametri esistenti s.</span><span class="sxs-lookup"><span data-stu-id="6703d-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="6703d-285">Il `EnablePaging` proprietà è utile quando l'associazione personalizzata di paging dei dati a un controllo GridView, DetailsView o FormView perché questi controlli prevedono determinati comportamenti da ObjectDataSource che s è disponibile solo quando `EnablePaging` proprietà `true`.</span><span class="sxs-lookup"><span data-stu-id="6703d-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="6703d-286">Poiché è necessario aggiungere manualmente il supporto di paging per il DataList e Repeater, lasciare questa proprietà è impostata su `false` (impostazione predefinita), come si sarà dolci nelle funzionalità necessarie direttamente all'interno di nostra pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6703d-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>


<span data-ttu-id="6703d-287">Definire infine Ripetitore s `ItemTemplate` in modo che vengono visualizzati il nome del prodotto s, categoria e fornitore.</span><span class="sxs-lookup"><span data-stu-id="6703d-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="6703d-288">Dopo aver apportato queste modifiche, la sintassi dichiarativa s Repeater e ObjectDataSource dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="6703d-289">Richiedere qualche istante per visitare la pagina tramite un browser e notare che viene restituito alcun record.</span><span class="sxs-lookup"><span data-stu-id="6703d-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="6703d-290">Infatti è ve ancora per specificare il *startRowIndex* e *maximumRows* i valori dei parametri; pertanto, vengono passati valori pari a 0 in per entrambi.</span><span class="sxs-lookup"><span data-stu-id="6703d-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="6703d-291">Per specificare questi valori, creare un gestore eventi per ObjectDataSource s `Selecting` evento e impostare questi parametri valori a livello di codice per i valori hardcoded pari a 0 e 5, rispettivamente:</span><span class="sxs-lookup"><span data-stu-id="6703d-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="6703d-292">Con questa modifica, la pagina, quando viene visualizzato tramite un browser, Mostra i primi cinque prodotti.</span><span class="sxs-lookup"><span data-stu-id="6703d-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>


<span data-ttu-id="6703d-293">[![Vengono visualizzati i primi cinque record](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="6703d-294">**Nella figura 14**: vengono visualizzati il primo di cinque record ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>


> [!NOTE]
> <span data-ttu-id="6703d-295">I prodotti elencati nella figura 14 risultano essere ordinati in base al nome del prodotto perché il `GetProductsPaged` stored procedure che esegue la query di paging personalizzata efficiente Ordina i risultati in base `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="6703d-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>


<span data-ttu-id="6703d-296">Per consentire all'utente di scorrere le pagine, è necessario tenere traccia dell'indice di riga iniziale e il numero massimo di righe e ricordare questi valori durante i postback.</span><span class="sxs-lookup"><span data-stu-id="6703d-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="6703d-297">Nell'esempio di paging predefinito è utilizzato i campi querystring per mantenere questi valori; per questa dimostrazione, consentire s mantenere queste informazioni nello stato di visualizzazione pagina s.</span><span class="sxs-lookup"><span data-stu-id="6703d-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="6703d-298">Creare le due proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="6703d-298">Create the following two properties:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="6703d-299">Aggiornare quindi il codice nel gestore eventi se si seleziona in modo che utilizzi il `StartRowIndex` e `MaximumRows` proprietà anziché i valori hardcoded pari a 0 e 5:</span><span class="sxs-lookup"><span data-stu-id="6703d-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="6703d-300">A questo punto, la pagina viene ancora solo i primi cinque record.</span><span class="sxs-lookup"><span data-stu-id="6703d-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="6703d-301">Tuttavia, con queste proprietà sul posto, è nuovamente pronto per creare l'interfaccia di paging.</span><span class="sxs-lookup"><span data-stu-id="6703d-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="6703d-302">Aggiunta dell'interfaccia di Paging</span><span class="sxs-lookup"><span data-stu-id="6703d-302">Adding the Paging Interface</span></span>

<span data-ttu-id="6703d-303">S consentono il primo stesso, precedente, successivo, ultimo paging interfaccia utilizzato nell'esempio paging predefinito, inclusi Web etichetta controllo che visualizza la pagina di dati viene visualizzato e il numero totale di pagine esistano.</span><span class="sxs-lookup"><span data-stu-id="6703d-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="6703d-304">Aggiungere le quattro controlli pulsante Web e l'etichetta sotto il controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-304">Add the four Button Web controls and Label below the Repeater.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="6703d-305">Successivamente, creare `Click` gestori eventi per i quattro pulsanti.</span><span class="sxs-lookup"><span data-stu-id="6703d-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="6703d-306">Quando viene scelto uno di questi pulsanti, è necessario aggiornare il `StartRowIndex` riassociare i dati al controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="6703d-307">Il codice per i pulsanti First, indietro e Avanti è abbastanza semplice, ma per l'ultimo pulsante come si determina l'indice di riga iniziale per l'ultima pagina di dati?</span><span class="sxs-lookup"><span data-stu-id="6703d-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="6703d-308">Per calcolare l'indice, nonché la possibilità di determinare che se i pulsanti Avanti e ultima devono essere abilitati è necessario conoscere il numero di record in totale è il paging tramite.</span><span class="sxs-lookup"><span data-stu-id="6703d-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="6703d-309">È possibile determinare questo chiamando il `ProductsBLL` classe s `TotalNumberOfProducts()` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="6703d-310">S consentono di creare una proprietà di sola lettura, a livello di pagina denominata `TotalRowCount` che restituisce i risultati del `TotalNumberOfProducts()` metodo:</span><span class="sxs-lookup"><span data-stu-id="6703d-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="6703d-311">Con questa proprietà è ora possibile determinare l'indice di riga iniziale pagina s ultimo.</span><span class="sxs-lookup"><span data-stu-id="6703d-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="6703d-312">In particolare, è s il risultato di tipo integer del `TotalRowCount` meno 1 diviso `MaximumRows`moltiplicato per `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="6703d-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="6703d-313">È ora possibile scrivere il `Click` gestori eventi per i quattro pulsanti di interfaccia di paging:</span><span class="sxs-lookup"><span data-stu-id="6703d-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="6703d-314">Infine, è necessario disabilitare i pulsanti del primo e precedente nell'interfaccia di paging quando si visualizzano la prima pagina di dati e i pulsanti Avanti e ultimi quando si visualizza l'ultima pagina.</span><span class="sxs-lookup"><span data-stu-id="6703d-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="6703d-315">A tale scopo, aggiungere il codice seguente al s ObjectDataSource `Selecting` gestore eventi:</span><span class="sxs-lookup"><span data-stu-id="6703d-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="6703d-316">Dopo aver aggiunto queste `Click` i gestori eventi e il codice per abilitare o disabilitare gli elementi dell'interfaccia di paging in base all'indice di riga iniziale corrente, la pagina di prova in un browser.</span><span class="sxs-lookup"><span data-stu-id="6703d-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="6703d-317">Come illustrato nella figura 15, durante la prima visita la pagina prima e pulsanti precedente verranno disabilitati.</span><span class="sxs-lookup"><span data-stu-id="6703d-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="6703d-318">Fare clic su Avanti viene illustrata la seconda pagina di dati, mentre facendo clic su ultima visualizzata la pagina finale (vedere 16 cifre e 17).</span><span class="sxs-lookup"><span data-stu-id="6703d-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="6703d-319">Quando si visualizza l'ultima pagina di dati vengono disabilitati i pulsanti Avanti sia l'ultimo.</span><span class="sxs-lookup"><span data-stu-id="6703d-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>


<span data-ttu-id="6703d-320">[![I pulsanti Indietro e ultimo sono disabilitati quando si visualizzano i prodotti di pagina prima](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="6703d-321">**Figura 15**: le precedenti e i pulsanti ultimo sono disabilitati quando si visualizza la pagina prima di prodotti ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>


<span data-ttu-id="6703d-322">[![La seconda pagina prodotti sono applicato all'intero](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-322">[![The Second Page of Products are Dispalyed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="6703d-323">**Figura 16**: la seconda pagina di prodotti sono applicato all'intero ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-323">**Figure 16**: The Second Page of Products are Dispalyed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>


<span data-ttu-id="6703d-324">[![Fare clic su Visualizza ultima pagina finale dei dati](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="6703d-325">**Figura 17**: facendo clic su ultima consente di visualizzare la pagina finale dei dati ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>


## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="6703d-326">Passaggio 7: Incluso l'ordinamento di supporto con personalizzata del pool di paging Ripetitore</span><span class="sxs-lookup"><span data-stu-id="6703d-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="6703d-327">Ora che è stato implementato il paging personalizzato, il supporto è nuovamente pronto per includere l'ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="6703d-328">Il `ProductsBLL` classe s `GetProductsPagedAndSorted` metodo ha lo stesso *startRowIndex* e *maximumRows* parametri di input `GetProductsPaged`, ma consente un ulteriore  *sortExpression* parametro di input.</span><span class="sxs-lookup"><span data-stu-id="6703d-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="6703d-329">Utilizzare il `GetProductsPagedAndSorted` metodo `SortingWithCustomPaging.aspx`, è necessario eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="6703d-330">Modificare gli oggetti ObjectDataSource `SelectMethod` proprietà `GetProductsPaged` a `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="6703d-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="6703d-331">Aggiungere un *sortExpression* `Parameter` oggetto s ObjectDataSource `SelectParameters` insieme.</span><span class="sxs-lookup"><span data-stu-id="6703d-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="6703d-332">Creare una privata, a livello di pagina `SortExpression` proprietà che rende persistente il valore di postback tramite lo stato di visualizzazione pagina s.</span><span class="sxs-lookup"><span data-stu-id="6703d-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="6703d-333">Aggiornare i dispositivi ObjectDataSource `Selecting` il gestore eventi per assegnare i dispositivi ObjectDataSource *sortExpression* parametro il valore del livello di pagina `SortExpression` proprietà.</span><span class="sxs-lookup"><span data-stu-id="6703d-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="6703d-334">Creare l'interfaccia di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-334">Create the sorting interface.</span></span>

<span data-ttu-id="6703d-335">Avviare aggiornando il s ObjectDataSource `SelectMethod` proprietà e l'aggiunta di un *sortExpression* `Parameter`.</span><span class="sxs-lookup"><span data-stu-id="6703d-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="6703d-336">Assicurarsi che il *sortExpression* `Parameter` s `Type` è impostata su `String`.</span><span class="sxs-lookup"><span data-stu-id="6703d-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="6703d-337">Dopo aver completato le prime due attività, il markup dichiarativo s ObjectDataSource dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="6703d-338">Successivamente, è necessario un livello di pagina `SortExpression` proprietà il cui valore viene serializzato allo stato di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="6703d-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="6703d-339">Se non è stato impostato alcun valore di espressione di ordinamento, utilizzare ProductName come il valore predefinito:</span><span class="sxs-lookup"><span data-stu-id="6703d-339">If no sort expression value has been set, use ProductName as the default:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="6703d-340">Prima di ObjectDataSource richiama il `GetProductsPagedAndSorted` metodo è necessario impostare il *sortExpression* `Parameter` al valore del `SortExpression` proprietà.</span><span class="sxs-lookup"><span data-stu-id="6703d-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="6703d-341">Nel `Selecting` gestore, aggiungere la riga di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="6703d-341">In the `Selecting` event handler, add the following line of code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="6703d-342">È comunque necessario implementare l'interfaccia di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="6703d-343">Come è stato fatto nell'ultimo esempio, consentire s l'ordinamento interfaccia implementata utilizzando tre controlli pulsante Web che consentono all'utente di ordinare i risultati dal fornitore, categoria o il nome del prodotto.</span><span class="sxs-lookup"><span data-stu-id="6703d-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="6703d-344">Creare `Click` gestori eventi per i tre controlli pulsante.</span><span class="sxs-lookup"><span data-stu-id="6703d-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="6703d-345">Nell'evento gestore, reimpostare il `StartRowIndex` su 0, viene impostata la `SortExpression` per il valore appropriato e i dati al controllo Repeater riassociazione:</span><span class="sxs-lookup"><span data-stu-id="6703d-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="6703d-346">Sono disponibili tutte le che s è!</span><span class="sxs-lookup"><span data-stu-id="6703d-346">That s all there is to it!</span></span> <span data-ttu-id="6703d-347">Mentre ci fosse un numero di passaggi per ottenere il paging personalizzato e l'ordinamento implementato, i passaggi sono molto simili a quelli necessari per il paging predefinito.</span><span class="sxs-lookup"><span data-stu-id="6703d-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="6703d-348">Figura 18 vengono indicati i prodotti quando si visualizza l'ultima pagina di dati quando viene ordinato in base alla categoria.</span><span class="sxs-lookup"><span data-stu-id="6703d-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>


<span data-ttu-id="6703d-349">[![Viene visualizzata l'ultima pagina di dati, ordinato in base alla categoria,](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="6703d-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="6703d-350">**Figura 18**: l'ultima pagina di dati, ordinato in base alla categoria, viene visualizzato ([fare clic per visualizzare l'immagine ingrandita](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="6703d-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>


> [!NOTE]
> <span data-ttu-id="6703d-351">Negli esempi precedenti, durante l'ordinamento dal fornitore che NomeFornitore è stata utilizzata come espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="6703d-352">Tuttavia, per l'implementazione di paging personalizzata, è necessario usare CompanyName.</span><span class="sxs-lookup"><span data-stu-id="6703d-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="6703d-353">Infatti, la stored procedure responsabile dell'implementazione il paging personalizzato `GetProductsPagedAndSorted` passa l'espressione di ordinamento nel `ROW_NUMBER()` (parola chiave), il `ROW_NUMBER()` (parola chiave) richiede il nome di colonna effettivi anziché un alias.</span><span class="sxs-lookup"><span data-stu-id="6703d-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="6703d-354">Pertanto, è necessario utilizzare `CompanyName` (il nome della colonna nella `Suppliers` tabella) anziché l'alias usato nella `SELECT` query (`SupplierName`) per l'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>


## <a name="summary"></a><span data-ttu-id="6703d-355">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="6703d-355">Summary</span></span>

<span data-ttu-id="6703d-356">Né il DataList né Ripetitore offrono il supporto dell'ordinamento predefinito, ma con un minimo di codice e un'interfaccia di ordinamento personalizzata, è possibile aggiungere tale funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6703d-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="6703d-357">Quando si implementa l'ordinamento, ma non di paging, l'espressione di ordinamento può essere specificata tramite il `DataSourceSelectArguments` oggetto passato a s ObjectDataSource `Select` metodo.</span><span class="sxs-lookup"><span data-stu-id="6703d-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="6703d-358">Questo `DataSourceSelectArguments` oggetto s `SortExpression` proprietà può essere assegnata in s ObjectDataSource `Selecting` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="6703d-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="6703d-359">Per aggiungere funzionalità di ordinamento a un controllo DataList o Repeater che già fornisce il supporto di paging, l'approccio più semplice consiste nel personalizzare il livello di logica di Business per includere un metodo che accetta un'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="6703d-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="6703d-360">Queste informazioni possono quindi essere passate attraverso un parametro in s ObjectDataSource `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="6703d-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="6703d-361">In questa esercitazione viene completato l'esame del paging e l'ordinamento con i controlli DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="6703d-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="6703d-362">Questa esercitazione successiva e finale verrà esaminati come aggiungere i controlli pulsante Web per i modelli di s DataList e Repeater per fornire funzionalità personalizzate, avviata dall'utente su una base per ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="6703d-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="6703d-363">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="6703d-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="6703d-364">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="6703d-364">About the Author</span></span>

<span data-ttu-id="6703d-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), l'autore di sette libri e fondatore di [4GuysFromRolla](http://www.4guysfromrolla.com), ha lavorato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="6703d-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6703d-366">Scott funziona come un consulente trainer e writer.</span><span class="sxs-lookup"><span data-stu-id="6703d-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6703d-367">Il suo ultimo libro è [ *SAM insegna manualmente ASP.NET 2.0 nelle 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="6703d-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6703d-368">Egli può essere raggiunto al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o sul suo blog, cui è reperibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="6703d-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="6703d-369">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="6703d-369">Special Thanks To</span></span>

<span data-ttu-id="6703d-370">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="6703d-370">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6703d-371">Il revisore per questa esercitazione è stata David Suru.</span><span class="sxs-lookup"><span data-stu-id="6703d-371">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="6703d-372">Se si è interessati my prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="6703d-372">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="6703d-373">In caso affermativo, Inviami una riga alla [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6703d-373">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="6703d-374">[Precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Successivo](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="6703d-374">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
