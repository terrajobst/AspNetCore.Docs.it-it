---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Pulsanti personalizzati in DataList e Repeater (c#) | Documenti Microsoft
author: rick-anderson
description: In questa esercitazione creeremo un'interfaccia che utilizza un ripetitore per elencare le categorie nel sistema, con ogni categoria di un pulsante per visualizzare il relativo associ...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: fa4b3ea69999f0d97d20047663d302277ebdf433
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/10/2017
---
<a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="fac78-103">Pulsanti personalizzati in DataList e Repeater (c#)</span><span class="sxs-lookup"><span data-stu-id="fac78-103">Custom Buttons in the DataList and Repeater (C#)</span></span>
====================
<span data-ttu-id="fac78-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="fac78-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="fac78-105">[Scaricare App di esempio](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) o [Scarica il PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="fac78-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="fac78-106">In questa esercitazione creeremo un'interfaccia che utilizza un ripetitore per elencare le categorie nel sistema, con ogni categoria di un pulsante per visualizzare i prodotti associati utilizzando un controllo BulletedList.</span><span class="sxs-lookup"><span data-stu-id="fac78-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>


## <a name="introduction"></a><span data-ttu-id="fac78-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="fac78-107">Introduction</span></span>

<span data-ttu-id="fac78-108">Durante le esercitazioni precedenti diciassette DataList e Repeater, abbiamo creato sia esempi di sola lettura e la modifica e l'eliminazione di esempi.</span><span class="sxs-lookup"><span data-stu-id="fac78-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="fac78-109">Per facilitare la modifica ed eliminazione di funzionalità all'interno di DataList, pulsanti è stato aggiunto a DataList s `ItemTemplate` che, quando si fa clic, ha provocato un postback e ha generato un evento di DataList corrispondente al pulsante s `CommandName` proprietà.</span><span class="sxs-lookup"><span data-stu-id="fac78-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="fac78-110">Ad esempio, aggiungendo un pulsante per la `ItemTemplate` con un `CommandName` DataList s causa del valore di proprietà di modifica `EditCommand` attiva durante il postback; uno con il `CommandName` eliminare genera il `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="fac78-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="fac78-111">Per modificare ed eliminare i pulsanti, inoltre i controlli DataList e Repeater possono includere anche i pulsanti, LinkButton o ImageButtons che, quando si fa clic, eseguire una logica sul lato server personalizzata.</span><span class="sxs-lookup"><span data-stu-id="fac78-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="fac78-112">In questa esercitazione creeremo un'interfaccia che utilizza un ripetitore per elencare le categorie nel sistema.</span><span class="sxs-lookup"><span data-stu-id="fac78-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="fac78-113">Per ogni categoria, Ripetitore includerà un pulsante per visualizzare la categoria di prodotti associati alla usando un controllo BulletedList (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="fac78-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>


<span data-ttu-id="fac78-114">[![Fare clic su Mostra prodotti collegamento Visualizza i prodotti s categoria in un elenco puntato](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fac78-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="fac78-115">**Figura 1**: facendo clic su Visualizza collegamento Mostra prodotti la categoria s prodotti in un elenco puntato ([fare clic per visualizzare l'immagine ingrandita](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="fac78-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="fac78-116">Passaggio 1: Aggiunta di pagine Web esercitazione pulsante personalizzato</span><span class="sxs-lookup"><span data-stu-id="fac78-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="fac78-117">Prima di esaminare come aggiungere un pulsante personalizzato, consentire s attentamente prima di creare le pagine ASP.NET nel progetto sito Web che è necessario per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="fac78-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="fac78-118">Per iniziare, aggiungere una nuova cartella denominata `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="fac78-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="fac78-119">Successivamente, aggiungere le seguenti due pagine ASP.NET a quella cartella, assicurandosi di associare ogni pagina con il `Site.master` pagina master:</span><span class="sxs-lookup"><span data-stu-id="fac78-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Aggiungere le pagine ASP.NET per le esercitazioni relative pulsanti personalizzate](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="fac78-121">**Figura 2**: aggiungere le pagine ASP.NET per le esercitazioni relative pulsanti personalizzate</span><span class="sxs-lookup"><span data-stu-id="fac78-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="fac78-122">Come in altre cartelle, `Default.aspx` nel `CustomButtonsDataListRepeater` cartella elencherà le esercitazioni nella relativa sezione.</span><span class="sxs-lookup"><span data-stu-id="fac78-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="fac78-123">Tenere presente che il `SectionLevelTutorialListing.ascx` controllo utente fornisce questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="fac78-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="fac78-124">Aggiungere il controllo utente `Default.aspx` trascinandolo da Esplora soluzioni nella pagina di visualizzazione della struttura s.</span><span class="sxs-lookup"><span data-stu-id="fac78-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="fac78-125">[![Aggiungere il controllo utente SectionLevelTutorialListing.ascx Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="fac78-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="fac78-126">**Figura 3**: aggiungere il `SectionLevelTutorialListing.ascx` controllo utente in `Default.aspx` ([fare clic per visualizzare l'immagine ingrandita](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="fac78-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>


<span data-ttu-id="fac78-127">Infine, aggiungere le pagine come voci per il `Web.sitemap` file.</span><span class="sxs-lookup"><span data-stu-id="fac78-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="fac78-128">In particolare, aggiungere il markup seguente dopo il Paging e l'ordinamento e DataList Ripetitore `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="fac78-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="fac78-129">Dopo aver aggiornato `Web.sitemap`, dedicare alcuni minuti per visualizzare il sito Web esercitazioni tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="fac78-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="fac78-130">Il menu a sinistra include elementi per la modifica, inserimento ed eliminazione di esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="fac78-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Mappa del sito include ora la voce per l'esercitazione di pulsanti personalizzati](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="fac78-132">**Figura 4**: mappa del sito include ora la voce per l'esercitazione di pulsanti personalizzati</span><span class="sxs-lookup"><span data-stu-id="fac78-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="fac78-133">Passaggio 2: Aggiunta dell'elenco di categorie</span><span class="sxs-lookup"><span data-stu-id="fac78-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="fac78-134">Per questa esercitazione è necessario creare un ripetitore che elenca tutte le categorie insieme ai prodotti LinkButton mostra che, quando si fa clic, Visualizza i prodotti della categoria associata s in un elenco puntato.</span><span class="sxs-lookup"><span data-stu-id="fac78-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="fac78-135">Consente di creare innanzitutto un ripetitore semplice che elenca le categorie nel sistema s.</span><span class="sxs-lookup"><span data-stu-id="fac78-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="fac78-136">Aprire il `CustomButtons.aspx` nella pagina di `CustomButtonsDataListRepeater` cartella.</span><span class="sxs-lookup"><span data-stu-id="fac78-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="fac78-137">Trascinare un controllo Repeater dalla casella degli strumenti di progettazione e il set relativo `ID` proprietà `Categories`.</span><span class="sxs-lookup"><span data-stu-id="fac78-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="fac78-138">Successivamente, creare un nuovo controllo origine dati da smart tag s Repeater.</span><span class="sxs-lookup"><span data-stu-id="fac78-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="fac78-139">In particolare, creare un nuovo controllo ObjectDataSource denominato `CategoriesDataSource` che consente di selezionare i dati di `CategoriesBLL` classe s `GetCategories()` metodo.</span><span class="sxs-lookup"><span data-stu-id="fac78-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="fac78-140">[![Configurare ObjectDataSource per utilizzare il metodo di classe CategoriesBLL s GetCategories()](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="fac78-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="fac78-141">**Figura 5**: configurare ObjectDataSource per utilizzare il `CategoriesBLL` classe s `GetCategories()` metodo ([fare clic per visualizzare l'immagine ingrandita](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="fac78-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>


<span data-ttu-id="fac78-142">A differenza del controllo DataList, per cui Visual Studio crea un valore predefinito `ItemTemplate` in base all'origine dati, i modelli Repeater s devono essere definiti manualmente.</span><span class="sxs-lookup"><span data-stu-id="fac78-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="fac78-143">Inoltre, i modelli Repeater s devono essere creati e modificati in modo dichiarativo (ovvero, s non esiste alcuna modifica modelli non opzione nello smart tag Ripetitore s).</span><span class="sxs-lookup"><span data-stu-id="fac78-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="fac78-144">Fare clic sulla scheda origine nell'angolo inferiore sinistro e aggiungere un `ItemTemplate` che visualizza il nome di categoria s in un `<h3>` elemento e la relativa descrizione in un paragrafo tag; includono un `SeparatorTemplate` che consente di visualizzare un righello orizzontale (`<hr />`) tra ogni categoria.</span><span class="sxs-lookup"><span data-stu-id="fac78-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="fac78-145">Aggiungere anche un elemento LinkButton con il relativo `Text` proprietà è impostata su Mostra i prodotti.</span><span class="sxs-lookup"><span data-stu-id="fac78-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="fac78-146">Dopo aver completato questi passaggi, markup dichiarativo s pagina dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="fac78-146">After completing these steps, your page s declarative markup should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="fac78-147">Figura 6 mostra la pagina quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="fac78-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="fac78-148">Viene elencato ogni nome di categoria e una descrizione.</span><span class="sxs-lookup"><span data-stu-id="fac78-148">Each category name and description is listed.</span></span> <span data-ttu-id="fac78-149">Il pulsante Mostra prodotti, quando si fa clic, provoca un postback, ma non ancora eseguire qualsiasi azione.</span><span class="sxs-lookup"><span data-stu-id="fac78-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>


<span data-ttu-id="fac78-150">[![Ogni nome di categoria e la descrizione viene visualizzata, insieme ai prodotti LinkButton Mostra](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="fac78-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="fac78-151">**Figura 6**: s categoria ogni nome e la descrizione viene visualizzata, insieme ai prodotti Mostra LinkButton ([fare clic per visualizzare l'immagine ingrandita](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="fac78-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>


## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="fac78-152">Passaggio 3: Esecuzione sul lato Server logica quando il Mostra prodotti LinkButton viene fatto clic su</span><span class="sxs-lookup"><span data-stu-id="fac78-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="fac78-153">Ogni volta che viene fatto clic su un pulsante, LinkButton o ImageButton all'interno di un modello in un controllo DataList o Repeater, si verifica un postback e s DataList o Repeater `ItemCommand` viene generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="fac78-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="fac78-154">Oltre al `ItemCommand` evento, il controllo DataList controllo può anche generare eventi di un altro più specifici se il pulsante s `CommandName` è impostata su una delle stringhe riservate (Elimina, modifica, Annulla, Update o Select), ma la `ItemCommand` evento è *sempre* generato.</span><span class="sxs-lookup"><span data-stu-id="fac78-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="fac78-155">Quando si sceglie un pulsante all'interno di un controllo DataList o Repeater, spesso è necessario passare il pulsante scelto (nel caso che possono esistere più pulsanti all'interno del controllo, ad esempio una modifica di entrambi e pulsante Elimina) e altre informazioni aggiuntive (ad esempio il valore di chiave primaria dell'elemento è stato fatto clic con pulsante).</span><span class="sxs-lookup"><span data-stu-id="fac78-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="fac78-156">Il pulsante, LinkButton e ImageButton forniscono due proprietà i cui valori vengono passati al `ItemCommand` gestore eventi:</span><span class="sxs-lookup"><span data-stu-id="fac78-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="fac78-157">`CommandName`una stringa in genere utilizzata per identificare ogni pulsante nel modello</span><span class="sxs-lookup"><span data-stu-id="fac78-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="fac78-158">`CommandArgument`in genere utilizzato per contenere il valore di un campo di dati, ad esempio il valore di chiave primario</span><span class="sxs-lookup"><span data-stu-id="fac78-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="fac78-159">Per questo esempio, impostare il s LinkButton `CommandName` proprietà ShowProducts e associa il valore di chiave primaria corrente di record s `CategoryID` per il `CommandArgument` proprietà utilizzando la sintassi di associazione dati `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="fac78-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="fac78-160">Dopo aver specificato queste due proprietà, la sintassi dichiarativa s LinkButton dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="fac78-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="fac78-161">Quando viene scelto il pulsante, si verifica un postback e s DataList o Repeater `ItemCommand` viene generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="fac78-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="fac78-162">Il gestore dell'evento viene passato sul pulsante s `CommandName` e `CommandArgument` valori.</span><span class="sxs-lookup"><span data-stu-id="fac78-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="fac78-163">Creare un gestore eventi per il controllo Repeater s `ItemCommand` evento e notare il secondo parametro passato nel gestore eventi (denominato `e`).</span><span class="sxs-lookup"><span data-stu-id="fac78-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="fac78-164">Il secondo parametro è di tipo [ `RepeaterCommandEventArgs` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) e presenta le seguenti quattro proprietà:</span><span class="sxs-lookup"><span data-stu-id="fac78-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="fac78-165">`CommandArgument`il valore del pulsante selezionato s `CommandArgument` proprietà</span><span class="sxs-lookup"><span data-stu-id="fac78-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="fac78-166">`CommandName`il valore del pulsante s `CommandName` proprietà</span><span class="sxs-lookup"><span data-stu-id="fac78-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="fac78-167">`CommandSource`un riferimento al controllo che è stato fatto clic sul pulsante</span><span class="sxs-lookup"><span data-stu-id="fac78-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="fac78-168">`Item`un riferimento di [ `RepeaterItem` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeateritem.aspx) che contiene il pulsante su cui è stato fatto clic; ogni record associato al controllo Repeater si manifesta come una`RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="fac78-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="fac78-169">Poiché la categoria selezionata s `CategoryID` passato tramite la `CommandArgument` proprietà, è possibile ottenere il set di prodotti associati alla categoria selezionata nel `ItemCommand` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="fac78-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="fac78-170">Questi prodotti possono quindi essere associati a un controllo BulletedList nel `ItemTemplate` (che è ve aggiungere ancora).</span><span class="sxs-lookup"><span data-stu-id="fac78-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="fac78-171">Tutto ciò che rimane, quindi, consiste nell'aggiungere BulletedList, farvi riferimento nel `ItemCommand` gestore eventi e associare il set di prodotti per la categoria selezionata, che verranno affrontati nel passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="fac78-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="fac78-172">DataList s `ItemCommand` gestore eventi viene passato un oggetto di tipo [ `DataListCommandEventArgs` ](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), che offre le stesse quattro proprietà la `RepeaterCommandEventArgs` classe.</span><span class="sxs-lookup"><span data-stu-id="fac78-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>


## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="fac78-173">Passaggio 4: Visualizzare i prodotti s categoria selezionata in un elenco puntato</span><span class="sxs-lookup"><span data-stu-id="fac78-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="fac78-174">I prodotti della categoria selezionata s possono essere visualizzati in Ripetitore s `ItemTemplate` utilizzando un numero qualsiasi di controlli.</span><span class="sxs-lookup"><span data-stu-id="fac78-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="fac78-175">È possibile aggiungere che un altro annidati Repeater, DataList, un DropDownList, un controllo GridView e così via.</span><span class="sxs-lookup"><span data-stu-id="fac78-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="fac78-176">Poiché si desidera visualizzare i prodotti come un elenco puntato, tuttavia, si userà il controllo BulletedList.</span><span class="sxs-lookup"><span data-stu-id="fac78-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="fac78-177">Restituire il `CustomButtons.aspx` pagina dichiarativo s, aggiungere un controllo BulletedList al `ItemTemplate` dopo LinkButton di prodotti Mostra.</span><span class="sxs-lookup"><span data-stu-id="fac78-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="fac78-178">Impostare il s BulletedLists `ID` a `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="fac78-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="fac78-179">BulletedList Visualizza il valore del campo di dati specificato tramite il `DataTextField` proprietà; poiché il controllo dispone di informazioni sul prodotto associato, impostare il `DataTextField` proprietà `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="fac78-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="fac78-180">Nel `ItemCommand` gestore dell'evento, fare riferimento a questo controllo utilizzando `e.Item.FindControl("ProductsInCategory")` e associarlo al set di prodotti associati alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="fac78-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>


[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="fac78-181">Prima di eseguire qualsiasi azione nel `ItemCommand` gestore eventi, è s prudente verificare il valore in ingresso `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="fac78-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="fac78-182">Poiché il `ItemCommand` gestore dell'evento viene generato quando *qualsiasi* si fa clic sul pulsante, se sono presenti più pulsanti in uso il modello di `CommandName` valore distinguere l'azione da intraprendere.</span><span class="sxs-lookup"><span data-stu-id="fac78-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="fac78-183">Verifica il `CommandName` Ecco opinabile, poiché è disponibile un solo pulsante, ma è un'operazione consigliabile modulo.</span><span class="sxs-lookup"><span data-stu-id="fac78-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="fac78-184">Successivamente, il `CategoryID` della categoria selezionata viene recuperato dal `CommandArgument` proprietà.</span><span class="sxs-lookup"><span data-stu-id="fac78-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="fac78-185">Il controllo BulletedList nel modello viene quindi a cui fa riferimento e associato ai risultati del `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` metodo.</span><span class="sxs-lookup"><span data-stu-id="fac78-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="fac78-186">Nelle esercitazioni precedenti utilizzati i pulsanti all'interno di DataList, ad esempio [una panoramica di modifica e l'eliminazione di dati in DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), è stato determinato il valore di chiave primaria di un determinato elemento tramite il `DataKeys` insieme.</span><span class="sxs-lookup"><span data-stu-id="fac78-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="fac78-187">Questo approccio funziona bene con DataList, Repeater non dispone di un `DataKeys` proprietà.</span><span class="sxs-lookup"><span data-stu-id="fac78-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="fac78-188">In alternativa, è necessario utilizzare un approccio alternativo per fornire il valore di chiave primaria, ad esempio tramite il pulsante s `CommandArgument` proprietà o assegnando il valore della chiave primario a un controllo etichetta Web nascosto all'interno del modello e di leggerne il valore nel `ItemCommand`gestore eventi utilizzando `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="fac78-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="fac78-189">Dopo aver completato il `ItemCommand` gestore eventi, è opportuno testare questa pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="fac78-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="fac78-190">Come illustrato nella figura 7, facendo clic su Mostra prodotti collegamento provoca un postback e visualizza i prodotti per la categoria selezionata in un BulletedList.</span><span class="sxs-lookup"><span data-stu-id="fac78-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="fac78-191">Inoltre, si noti che queste informazioni sul prodotto rimane, anche se altre categorie di collegamenti di visualizzare i prodotti vengono selezionati.</span><span class="sxs-lookup"><span data-stu-id="fac78-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="fac78-192">Se si desidera modificare il comportamento di questo report, tale che sono elencati i prodotti solo una categoria s alla volta, è sufficiente impostare il controllo di BulletedList s `EnableViewState` proprietà `False`.</span><span class="sxs-lookup"><span data-stu-id="fac78-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>


<span data-ttu-id="fac78-193">[![Un BulletedList viene utilizzato per visualizzare i prodotti della categoria selezionata](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="fac78-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="fac78-194">**Figura 7**: BulletedList A viene utilizzato per visualizzare i prodotti della categoria selezionata ([fare clic per visualizzare l'immagine ingrandita](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="fac78-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="fac78-195">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="fac78-195">Summary</span></span>

<span data-ttu-id="fac78-196">I controlli DataList e Repeater possono includere un numero qualsiasi di pulsanti, LinkButton o ImageButtons all'interno dei modelli.</span><span class="sxs-lookup"><span data-stu-id="fac78-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="fac78-197">Questi pulsanti, quando si fa clic, provocare un postback e generare il `ItemCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="fac78-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="fac78-198">Per associare un pulsante di azione sul lato server personalizzato, creare un gestore eventi per il `ItemCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="fac78-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="fac78-199">In questo gestore eventi, controllare innanzi tutto in ingresso `CommandName` valore per determinare quale pulsante è stato fatto clic.</span><span class="sxs-lookup"><span data-stu-id="fac78-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="fac78-200">Informazioni aggiuntive, facoltativamente, possono essere fornite tramite il pulsante s `CommandArgument` proprietà.</span><span class="sxs-lookup"><span data-stu-id="fac78-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="fac78-201">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="fac78-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="fac78-202">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="fac78-202">About the Author</span></span>

<span data-ttu-id="fac78-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), l'autore di sette libri e fondatore di [4GuysFromRolla](http://www.4guysfromrolla.com), ha lavorato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="fac78-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="fac78-204">Scott funziona come un consulente trainer e writer.</span><span class="sxs-lookup"><span data-stu-id="fac78-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="fac78-205">Il suo ultimo libro è [ *SAM insegna manualmente ASP.NET 2.0 nelle 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="fac78-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="fac78-206">Egli può essere raggiunto al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o sul suo blog, cui è reperibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="fac78-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="fac78-207">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="fac78-207">Special Thanks To</span></span>

<span data-ttu-id="fac78-208">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="fac78-208">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="fac78-209">Il revisore per questa esercitazione è stata Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="fac78-209">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="fac78-210">Se si è interessati my prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="fac78-210">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="fac78-211">In caso affermativo, Inviami una riga alla [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="fac78-211">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="fac78-212">Successivo</span><span class="sxs-lookup"><span data-stu-id="fac78-212">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)
