---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
title: Appartenenze al ruolo del Database di distribuzione per gli ambienti di Test | Documenti Microsoft
author: jrjlee
description: In questo argomento viene descritto come aggiungere gli account utente ai ruoli del database come parte di una soluzione di distribuzione all'ambiente di test. Quando si distribuisce una soluzione che contiene...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 9b2af539-7ad9-47aa-b66e-873bd9906e79
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
msc.type: authoredcontent
ms.openlocfilehash: ac780c6cd522f9216cafe3b5f23772ef6ebf5d11
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/10/2017
---
<a name="deploying-database-role-memberships-to-test-environments"></a><span data-ttu-id="a318f-104">Appartenenze al ruolo del Database di distribuzione per gli ambienti di Test</span><span class="sxs-lookup"><span data-stu-id="a318f-104">Deploying Database Role Memberships to Test Environments</span></span>
====================
<span data-ttu-id="a318f-105">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="a318f-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="a318f-106">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="a318f-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="a318f-107">In questo argomento viene descritto come aggiungere gli account utente ai ruoli del database come parte di una soluzione di distribuzione all'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="a318f-107">This topic describes how to add user accounts to database roles as part of a solution deployment to a test environment.</span></span>
> 
> <span data-ttu-id="a318f-108">Quando si distribuisce una soluzione contenente un progetto di database in un ambiente di produzione o gestione temporanea, in genere non si desidera allo sviluppatore di automatizzare l'aggiunta di account utente ai ruoli del database.</span><span class="sxs-lookup"><span data-stu-id="a318f-108">When you deploy a solution containing a database project to a staging or production environment, you typically don't want the developer to automate the addition of user accounts to database roles.</span></span> <span data-ttu-id="a318f-109">Nella maggior parte dei casi, lo sviluppatore non sarà possibile individuare gli account utente che devono essere aggiunti ai quali ruoli del database, e questi requisiti potrebbero cambiare in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="a318f-109">In most cases, the developer won't know which user accounts need to be added to which database roles, and these requirements could change at any time.</span></span> <span data-ttu-id="a318f-110">Tuttavia, quando si distribuisce una soluzione contenente un progetto di database per lo sviluppo o ambiente di test, la situazione in genere è piuttosto diversa:</span><span class="sxs-lookup"><span data-stu-id="a318f-110">However, when you deploy a solution containing a database project to a development or test environment, the situation is usually rather different:</span></span>
> 
> - <span data-ttu-id="a318f-111">Lo sviluppatore in genere nuovamente distribuisce la soluzione a intervalli regolari, spesso più volte al giorno.</span><span class="sxs-lookup"><span data-stu-id="a318f-111">The developer typically re-deploys the solution on a regular basis, often several times a day.</span></span>
> - <span data-ttu-id="a318f-112">Il database viene in genere ricreato in ogni distribuzione, il che significa che gli utenti del database devono essere creati e aggiunto ai ruoli dopo ogni distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a318f-112">The database is typically re-created on every deployment, which means that database users must be created and added to roles after every deployment.</span></span>
> - <span data-ttu-id="a318f-113">Lo sviluppatore in genere abbia il pieno controllo sull'ambiente di sviluppo o test di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-113">The developer typically has full control over the target development or test environment.</span></span>
> 
> <span data-ttu-id="a318f-114">In questo scenario, è spesso utile per la creazione di utenti del database e assegnare le appartenenze ai ruoli di database come parte del processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a318f-114">In this scenario, it's often beneficial to automatically create database users and assign database role memberships as part of the deployment process.</span></span>
> 
> <span data-ttu-id="a318f-115">Il fattore chiave è che questa operazione deve essere condizionale in base all'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-115">The key factor is that this operation needs to be conditional based on the target environment.</span></span> <span data-ttu-id="a318f-116">Se si distribuisce in di gestione temporanea o di un ambiente di produzione, si desidera ignorare l'operazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-116">If you're deploying to a staging or a production environment, you want to skip the operation.</span></span> <span data-ttu-id="a318f-117">Se si distribuisce a uno sviluppatore o l'ambiente di test, si desidera distribuire le appartenenze ai ruoli senza ulteriore intervento.</span><span class="sxs-lookup"><span data-stu-id="a318f-117">If you're deploying to a developer or test environment, you want to deploy role memberships without further intervention.</span></span> <span data-ttu-id="a318f-118">In questo argomento viene descritto un approccio che è possibile utilizzare per risolvere questo problema.</span><span class="sxs-lookup"><span data-stu-id="a318f-118">This topic describes one approach you can use to address this challenge.</span></span>


<span data-ttu-id="a318f-119">In questo argomento fa parte di una serie di esercitazioni basate su requisiti di distribuzione dell'organizzazione di una società fittizia denominata Fabrikam, Inc. Questa serie di esercitazioni utilizza una soluzione di esempio & #x 2014; il [soluzione responsabile contatto](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; per rappresentare un'applicazione web con un livello di complessità, tra cui un'applicazione ASP.NET MVC 3, Windows realistico Servizio di Communication Foundation (WCF) e un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="a318f-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="a318f-120">Il metodo di distribuzione il fulcro di queste esercitazioni si basa sul progetto file split approccio descritto in [informazioni sui File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in cui il processo di compilazione è controllato da due progetti #x 2014; & file contenente una compilare le istruzioni che si applicano a ogni ambiente di destinazione e quella contenente impostazioni specifiche dell'ambiente di compilazione e distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a318f-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="a318f-121">In fase di compilazione, il file di progetto specifici dell'ambiente viene unito nel file di progetto indipendenti dall'ambiente in modo da formare un set completo di istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="a318f-122">Panoramica di Task</span><span class="sxs-lookup"><span data-stu-id="a318f-122">Task Overview</span></span>

<span data-ttu-id="a318f-123">In questo argomento si presuppone che:</span><span class="sxs-lookup"><span data-stu-id="a318f-123">This topic assumes that:</span></span>

- <span data-ttu-id="a318f-124">Utilizzare l'approccio di file di progetto split alla distribuzione della soluzione, come descritto in [informazioni sui File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="a318f-124">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="a318f-125">Si chiama VSDBCMD dal file di progetto per distribuire il progetto di database, come descritto in [comprendere il processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="a318f-125">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="a318f-126">Per creare utenti del database e assegnare le appartenenze ai ruoli quando si distribuisce un progetto di database in un ambiente di test, è necessario:</span><span class="sxs-lookup"><span data-stu-id="a318f-126">To create database users and assign role memberships when you deploy a database project to a test environment, you'll need to:</span></span>

- <span data-ttu-id="a318f-127">Creare uno script Transact Structured Query Language (Transact-SQL) che apporta le modifiche del database necessari.</span><span class="sxs-lookup"><span data-stu-id="a318f-127">Create a Transact Structured Query Language (Transact-SQL) script that makes the necessary database changes.</span></span>
- <span data-ttu-id="a318f-128">Creare una destinazione di Microsoft Build Engine (MSBuild) che utilizza l'utilità sqlcmd.exe per eseguire lo script SQL.</span><span class="sxs-lookup"><span data-stu-id="a318f-128">Create a Microsoft Build Engine (MSBuild) target that uses the sqlcmd.exe utility to run the SQL script.</span></span>
- <span data-ttu-id="a318f-129">Configurare i file di progetto per richiamare la destinazione quando si distribuisce la soluzione in un ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="a318f-129">Configure your project files to invoke the target when you're deploying your solution to a test environment.</span></span>

<span data-ttu-id="a318f-130">Questo argomento viene illustrato come eseguire ognuna di queste procedure.</span><span class="sxs-lookup"><span data-stu-id="a318f-130">This topic will show you how to perform each of these procedures.</span></span>

## <a name="scripting-the-database-role-memberships"></a><span data-ttu-id="a318f-131">Scripting le appartenenze al ruolo di Database</span><span class="sxs-lookup"><span data-stu-id="a318f-131">Scripting the Database Role Memberships</span></span>

<span data-ttu-id="a318f-132">È possibile creare uno script Transact-SQL in molti modi diversi, e in qualsiasi percorso prescelto.</span><span class="sxs-lookup"><span data-stu-id="a318f-132">You can create a Transact-SQL script in a lot of different ways, and in any location you choose.</span></span> <span data-ttu-id="a318f-133">L'approccio più semplice consiste nel creare lo script all'interno della soluzione in Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="a318f-133">The easiest approach is to create the script within your solution in Visual Studio 2010.</span></span>

<span data-ttu-id="a318f-134">**Per creare uno script SQL**</span><span class="sxs-lookup"><span data-stu-id="a318f-134">**To create a SQL script**</span></span>

1. <span data-ttu-id="a318f-135">Nel **Esplora** finestra, espandere il nodo del progetto di database.</span><span class="sxs-lookup"><span data-stu-id="a318f-135">In the **Solution Explorer** window, expand your database project node.</span></span>
2. <span data-ttu-id="a318f-136">Fare doppio clic sul **script** cartella, scegliere **Aggiungi**, quindi fare clic su **nuova cartella**.</span><span class="sxs-lookup"><span data-stu-id="a318f-136">Right-click the **Scripts** folder, point to **Add**, and then click **New Folder**.</span></span>
3. <span data-ttu-id="a318f-137">Tipo **Test** come il nome della cartella e quindi premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="a318f-137">Type **Test** as the folder name, and then press Enter.</span></span>
4. <span data-ttu-id="a318f-138">Fare doppio clic su di **Test** cartella, scegliere **Aggiungi**, quindi fare clic su **Script**.</span><span class="sxs-lookup"><span data-stu-id="a318f-138">Right-click the **Test** folder, point to **Add**, and then click **Script**.</span></span>
5. <span data-ttu-id="a318f-139">Nel **Aggiungi nuovo elemento** finestra di dialogo, assegnare un nome significativo di script (ad esempio, **AddRoleMemberships.sql**), quindi fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="a318f-139">In the **Add New Item** dialog box, give your script a meaningful name (for example, **AddRoleMemberships.sql**), and then click **Add**.</span></span>

    ![](deploying-database-role-memberships-to-test-environments/_static/image1.png)
6. <span data-ttu-id="a318f-140">Nel *AddRoleMemberships.sql* file, aggiungere le istruzioni Transact-SQL che:</span><span class="sxs-lookup"><span data-stu-id="a318f-140">In the *AddRoleMemberships.sql* file, add Transact-SQL statements that:</span></span>

    1. <span data-ttu-id="a318f-141">Creare un utente del database per l'account di accesso di SQL Server che avrà accesso al database.</span><span class="sxs-lookup"><span data-stu-id="a318f-141">Create a database user for the SQL Server login that will access your database.</span></span>
    2. <span data-ttu-id="a318f-142">Aggiungere l'utente del database per i ruoli di database necessari.</span><span class="sxs-lookup"><span data-stu-id="a318f-142">Add the database user to any required database roles.</span></span>
7. <span data-ttu-id="a318f-143">Il file deve essere analogo al seguente:</span><span class="sxs-lookup"><span data-stu-id="a318f-143">The file should resemble this:</span></span>

    [!code-sql[Main](deploying-database-role-memberships-to-test-environments/samples/sample1.sql)]
8. <span data-ttu-id="a318f-144">Salvare il file.</span><span class="sxs-lookup"><span data-stu-id="a318f-144">Save the file.</span></span>

## <a name="executing-the-script-on-the-target-database"></a><span data-ttu-id="a318f-145">L'esecuzione dello Script nel Database di destinazione</span><span class="sxs-lookup"><span data-stu-id="a318f-145">Executing the Script on the Target Database</span></span>

<span data-ttu-id="a318f-146">Idealmente, è necessario eseguire qualsiasi script di Transact-SQL necessarie come parte di uno script di post-distribuzione quando si distribuisce il progetto di database.</span><span class="sxs-lookup"><span data-stu-id="a318f-146">Ideally, you'd run any required Transact-SQL scripts as part of a post-deployment script when you deploy your database project.</span></span> <span data-ttu-id="a318f-147">Tuttavia, gli script di post-distribuzione non consentono di eseguire la logica condizionale in base alle configurazioni di soluzione o le proprietà di compilazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-147">However, post-deployment scripts don't allow you to execute logic conditionally based on solution configurations or build properties.</span></span> <span data-ttu-id="a318f-148">L'alternativa consiste nell'eseguire gli script SQL direttamente dal file di progetto MSBuild, creando un **destinazione** elemento che esegue un comando sqlcmd.exe.</span><span class="sxs-lookup"><span data-stu-id="a318f-148">The alternative is to run your SQL scripts directly from the MSBuild project file, by creating a **Target** element that executes a sqlcmd.exe command.</span></span> <span data-ttu-id="a318f-149">È possibile utilizzare questo comando per eseguire lo script nel database di destinazione:</span><span class="sxs-lookup"><span data-stu-id="a318f-149">You can use this command to run your script on the target database:</span></span>


[!code-console[Main](deploying-database-role-memberships-to-test-environments/samples/sample2.cmd)]


> [!NOTE]
> <span data-ttu-id="a318f-150">Per ulteriori informazioni sulle opzioni della riga di comando sqlcmd, vedere [utilità sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="a318f-150">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>


<span data-ttu-id="a318f-151">Prima di incorporare questo comando in una destinazione di MSBuild, è necessario determinare in quali condizioni in cui l'esecuzione dello script:</span><span class="sxs-lookup"><span data-stu-id="a318f-151">Before you embed this command in an MSBuild target, you need to consider under what conditions you want the script to run:</span></span>

- <span data-ttu-id="a318f-152">Il database di destinazione deve esistere prima di modificare l'appartenenza del ruolo.</span><span class="sxs-lookup"><span data-stu-id="a318f-152">The target database must exist before you change its role memberships.</span></span> <span data-ttu-id="a318f-153">Di conseguenza, è necessario eseguire questo script *dopo* la distribuzione di database.</span><span class="sxs-lookup"><span data-stu-id="a318f-153">As such, you need to run this script *after* the database deployment.</span></span>
- <span data-ttu-id="a318f-154">È necessario includere una condizione in modo che lo script viene eseguito solo per ambienti di test.</span><span class="sxs-lookup"><span data-stu-id="a318f-154">You need to include a condition so that the script is only executed for test environments.</span></span>
- <span data-ttu-id="a318f-155">Se si esegue una distribuzione "cosa accade se" & #x 2014; in altre parole, se si è la generazione di script di distribuzione ma non viene eseguita li & #x 2014; non deve eseguire lo script SQL.</span><span class="sxs-lookup"><span data-stu-id="a318f-155">If you're running a "what if" deployment&#x2014;in other words, if you're generating deployment scripts but not actually running them&#x2014;you shouldn't run the SQL script.</span></span>

<span data-ttu-id="a318f-156">Se si utilizza l'approccio di file di progetto split descritto in [informazioni sui File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), come illustrato dalla soluzione di esempio Contact Manager, è possibile dividere le istruzioni di compilazione per lo script SQL simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a318f-156">If you're using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), as demonstrated by the Contact Manager sample solution, you can split the build instructions for your SQL script like this:</span></span>

- <span data-ttu-id="a318f-157">Le necessarie proprietà specifiche dell'ambiente, con la proprietà che determina se distribuire le autorizzazioni, va nel file di progetto specifici dell'ambiente (ad esempio, *Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="a318f-157">Any required environment-specific properties, together with the property that determines whether to deploy permissions, should go in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>
- <span data-ttu-id="a318f-158">La destinazione di MSBuild, insieme a qualsiasi proprietà che non cambia tra ambienti di destinazione deve andare nel file di progetto universale (ad esempio, *Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="a318f-158">The MSBuild target itself, together with any properties that will not change between destination environments, should go in the universal project file (for example, *Publish.proj*).</span></span>

<span data-ttu-id="a318f-159">Nel file di progetto specifici dell'ambiente, è necessario definire il nome del server di database, il nome del database di destinazione e una proprietà booleana che consente di specificare se si desidera distribuire le appartenenze ai ruoli.</span><span class="sxs-lookup"><span data-stu-id="a318f-159">In the environment-specific project file, you need to define the database server name, the target database name, and a Boolean property that lets the user specify whether to deploy role memberships.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample3.xml)]


<span data-ttu-id="a318f-160">Nel file di progetto universale, è necessario fornire il percorso dell'eseguibile sqlcmd e il percorso dello script SQL da eseguire.</span><span class="sxs-lookup"><span data-stu-id="a318f-160">In the universal project file, you need to provide the location of the sqlcmd executable and the location of the SQL script you want to run.</span></span> <span data-ttu-id="a318f-161">Queste proprietà rimane lo stesso indipendentemente dall'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-161">These properties will remain the same regardless of the destination environment.</span></span> <span data-ttu-id="a318f-162">È inoltre necessario creare una destinazione di MSBuild per eseguire il comando sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="a318f-162">You also need to create an MSBuild target to execute the sqlcmd command.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample4.xml)]


<span data-ttu-id="a318f-163">Si noti che è aggiungere il percorso dell'eseguibile sqlcmd come proprietà statica, come può essere utile ad altre destinazioni.</span><span class="sxs-lookup"><span data-stu-id="a318f-163">Notice that you add the location of the sqlcmd executable as a static property, as this could be useful to other targets.</span></span> <span data-ttu-id="a318f-164">Al contrario, definire il percorso dello script SQL e la sintassi del comando sqlcmd come proprietà dinamiche all'interno della destinazione, come non saranno necessarie prima che venga eseguita la destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-164">In contrast, you define the location of your SQL script and the syntax of the sqlcmd command as dynamic properties within the target, as they will not be required before the target is executed.</span></span> <span data-ttu-id="a318f-165">In questo caso, il **DeployTestDBPermissions** destinazione verrà eseguita solo se vengono soddisfatte queste condizioni:</span><span class="sxs-lookup"><span data-stu-id="a318f-165">In this case, the **DeployTestDBPermissions** target will only be executed if these conditions are met:</span></span>

- <span data-ttu-id="a318f-166">Il **DeployTestDBRoleMemberships** è impostata su **true**.</span><span class="sxs-lookup"><span data-stu-id="a318f-166">The **DeployTestDBRoleMemberships** property is set to **true**.</span></span>
- <span data-ttu-id="a318f-167">L'utente non è stato specificato un **WhatIf = true** flag.</span><span class="sxs-lookup"><span data-stu-id="a318f-167">The user hasn't specified a **WhatIf=true** flag.</span></span>

<span data-ttu-id="a318f-168">Infine, non dimenticare di richiamare la destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-168">Finally, don't forget to invoke the target.</span></span> <span data-ttu-id="a318f-169">Nel *Publish.proj* file, è possibile farlo mediante l'aggiunta di destinazione per l'elenco di dipendenze per il valore predefinito **FullPublish** destinazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-169">In the *Publish.proj* file, you can do this by adding the target to the dependency list for the default **FullPublish** target.</span></span> <span data-ttu-id="a318f-170">È necessario assicurarsi che il **DeployTestDBPermissions** destinazione non viene eseguita finché il **PublishDbPackages** destinazione è stata eseguita.</span><span class="sxs-lookup"><span data-stu-id="a318f-170">You need to ensure that the **DeployTestDBPermissions** target is not executed until the **PublishDbPackages** target has been executed.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample5.xml)]


## <a name="conclusion"></a><span data-ttu-id="a318f-171">Conclusione</span><span class="sxs-lookup"><span data-stu-id="a318f-171">Conclusion</span></span>

<span data-ttu-id="a318f-172">In questo argomento viene descritto un modo in cui è possibile aggiungere gli utenti del database e le appartenenze ai ruoli come un'azione post-distribuzione quando si distribuisce un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="a318f-172">This topic described one way in which you can add database users and role memberships as a post-deployment action when you deploy a database project.</span></span> <span data-ttu-id="a318f-173">Si tratta in genere utile quando si regolarmente ricreare un database in un ambiente di test, ma devono essere evitato in genere quando si distribuiscono i database in ambienti di produzione o gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="a318f-173">This is typically useful when you regularly re-create a database in a test environment, but it should usually be avoided when you deploy databases to staging or production environments.</span></span> <span data-ttu-id="a318f-174">Di conseguenza, è necessario assicurarsi di usare la logica condizionale necessaria in modo che gli utenti del database e le appartenenze ai ruoli vengono creati solo quando è consigliabile eseguire questa operazione.</span><span class="sxs-lookup"><span data-stu-id="a318f-174">As such, you should ensure that you use the necessary conditional logic so that database users and role memberships are only created when it's appropriate to do so.</span></span>

## <a name="further-reading"></a><span data-ttu-id="a318f-175">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="a318f-175">Further Reading</span></span>

<span data-ttu-id="a318f-176">Per ulteriori informazioni sull'utilizzo VSDBCMD per distribuire i progetti di database, vedere [progetti di Database di distribuzione](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="a318f-176">For more information on using VSDBCMD to deploy database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="a318f-177">Per istruzioni sulla personalizzazione delle distribuzioni di database per gli ambienti di destinazione diverso, vedere [personalizzazione delle distribuzioni di Database per più ambienti](customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="a318f-177">For guidance on customizing database deployments for different target environments, see [Customizing Database Deployments for Multiple Environments](customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="a318f-178">Per ulteriori informazioni sull'utilizzo dei file di progetto MSBuild personalizzati per controllare il processo di distribuzione, vedere [informazioni sui File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) e [comprendere il processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="a318f-178">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="a318f-179">Per ulteriori informazioni sulle opzioni della riga di comando sqlcmd, vedere [utilità sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="a318f-179">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a318f-180">[Precedente](customizing-database-deployments-for-multiple-environments.md)
[Successivo](deploying-membership-databases-to-enterprise-environments.md)</span><span class="sxs-lookup"><span data-stu-id="a318f-180">[Previous](customizing-database-deployments-for-multiple-environments.md)
[Next](deploying-membership-databases-to-enterprise-environments.md)</span></span>
